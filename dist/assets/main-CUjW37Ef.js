(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function i(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(a){if(a.ep)return;a.ep=!0;const u=i(a);fetch(a.href,u)}})();function Of(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var dl={exports:{}},bs={},ml={exports:{}},ue={};var mm;function cy(){if(mm)return ue;mm=1;var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function w(C){return C===null||typeof C!="object"?null:(C=v&&C[v]||C["@@iterator"],typeof C=="function"?C:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,T={};function D(C,R,re){this.props=C,this.context=R,this.refs=T,this.updater=re||S}D.prototype.isReactComponent={},D.prototype.setState=function(C,R){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,R,"setState")},D.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function N(){}N.prototype=D.prototype;function V(C,R,re){this.props=C,this.context=R,this.refs=T,this.updater=re||S}var A=V.prototype=new N;A.constructor=V,b(A,D.prototype),A.isPureReactComponent=!0;var z=Array.isArray,F=Object.prototype.hasOwnProperty,J={current:null},ie={key:!0,ref:!0,__self:!0,__source:!0};function Q(C,R,re){var ae,ce={},de=null,ge=null;if(R!=null)for(ae in R.ref!==void 0&&(ge=R.ref),R.key!==void 0&&(de=""+R.key),R)F.call(R,ae)&&!ie.hasOwnProperty(ae)&&(ce[ae]=R[ae]);var pe=arguments.length-2;if(pe===1)ce.children=re;else if(1<pe){for(var Ee=Array(pe),Je=0;Je<pe;Je++)Ee[Je]=arguments[Je+2];ce.children=Ee}if(C&&C.defaultProps)for(ae in pe=C.defaultProps,pe)ce[ae]===void 0&&(ce[ae]=pe[ae]);return{$$typeof:r,type:C,key:de,ref:ge,props:ce,_owner:J.current}}function me(C,R){return{$$typeof:r,type:C.type,key:R,ref:C.ref,props:C.props,_owner:C._owner}}function ve(C){return typeof C=="object"&&C!==null&&C.$$typeof===r}function we(C){var R={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(re){return R[re]})}var Oe=/\/+/g;function je(C,R){return typeof C=="object"&&C!==null&&C.key!=null?we(""+C.key):R.toString(36)}function He(C,R,re,ae,ce){var de=typeof C;(de==="undefined"||de==="boolean")&&(C=null);var ge=!1;if(C===null)ge=!0;else switch(de){case"string":case"number":ge=!0;break;case"object":switch(C.$$typeof){case r:case n:ge=!0}}if(ge)return ge=C,ce=ce(ge),C=ae===""?"."+je(ge,0):ae,z(ce)?(re="",C!=null&&(re=C.replace(Oe,"$&/")+"/"),He(ce,R,re,"",function(Je){return Je})):ce!=null&&(ve(ce)&&(ce=me(ce,re+(!ce.key||ge&&ge.key===ce.key?"":(""+ce.key).replace(Oe,"$&/")+"/")+C)),R.push(ce)),1;if(ge=0,ae=ae===""?".":ae+":",z(C))for(var pe=0;pe<C.length;pe++){de=C[pe];var Ee=ae+je(de,pe);ge+=He(de,R,re,Ee,ce)}else if(Ee=w(C),typeof Ee=="function")for(C=Ee.call(C),pe=0;!(de=C.next()).done;)de=de.value,Ee=ae+je(de,pe++),ge+=He(de,R,re,Ee,ce);else if(de==="object")throw R=String(C),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.");return ge}function st(C,R,re){if(C==null)return C;var ae=[],ce=0;return He(C,ae,"","",function(de){return R.call(re,de,ce++)}),ae}function $e(C){if(C._status===-1){var R=C._result;R=R(),R.then(function(re){(C._status===0||C._status===-1)&&(C._status=1,C._result=re)},function(re){(C._status===0||C._status===-1)&&(C._status=2,C._result=re)}),C._status===-1&&(C._status=0,C._result=R)}if(C._status===1)return C._result.default;throw C._result}var oe={current:null},U={transition:null},X={ReactCurrentDispatcher:oe,ReactCurrentBatchConfig:U,ReactCurrentOwner:J};function H(){throw Error("act(...) is not supported in production builds of React.")}return ue.Children={map:st,forEach:function(C,R,re){st(C,function(){R.apply(this,arguments)},re)},count:function(C){var R=0;return st(C,function(){R++}),R},toArray:function(C){return st(C,function(R){return R})||[]},only:function(C){if(!ve(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},ue.Component=D,ue.Fragment=i,ue.Profiler=a,ue.PureComponent=V,ue.StrictMode=o,ue.Suspense=p,ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,ue.act=H,ue.cloneElement=function(C,R,re){if(C==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+C+".");var ae=b({},C.props),ce=C.key,de=C.ref,ge=C._owner;if(R!=null){if(R.ref!==void 0&&(de=R.ref,ge=J.current),R.key!==void 0&&(ce=""+R.key),C.type&&C.type.defaultProps)var pe=C.type.defaultProps;for(Ee in R)F.call(R,Ee)&&!ie.hasOwnProperty(Ee)&&(ae[Ee]=R[Ee]===void 0&&pe!==void 0?pe[Ee]:R[Ee])}var Ee=arguments.length-2;if(Ee===1)ae.children=re;else if(1<Ee){pe=Array(Ee);for(var Je=0;Je<Ee;Je++)pe[Je]=arguments[Je+2];ae.children=pe}return{$$typeof:r,type:C.type,key:ce,ref:de,props:ae,_owner:ge}},ue.createContext=function(C){return C={$$typeof:d,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},C.Provider={$$typeof:u,_context:C},C.Consumer=C},ue.createElement=Q,ue.createFactory=function(C){var R=Q.bind(null,C);return R.type=C,R},ue.createRef=function(){return{current:null}},ue.forwardRef=function(C){return{$$typeof:m,render:C}},ue.isValidElement=ve,ue.lazy=function(C){return{$$typeof:g,_payload:{_status:-1,_result:C},_init:$e}},ue.memo=function(C,R){return{$$typeof:h,type:C,compare:R===void 0?null:R}},ue.startTransition=function(C){var R=U.transition;U.transition={};try{C()}finally{U.transition=R}},ue.unstable_act=H,ue.useCallback=function(C,R){return oe.current.useCallback(C,R)},ue.useContext=function(C){return oe.current.useContext(C)},ue.useDebugValue=function(){},ue.useDeferredValue=function(C){return oe.current.useDeferredValue(C)},ue.useEffect=function(C,R){return oe.current.useEffect(C,R)},ue.useId=function(){return oe.current.useId()},ue.useImperativeHandle=function(C,R,re){return oe.current.useImperativeHandle(C,R,re)},ue.useInsertionEffect=function(C,R){return oe.current.useInsertionEffect(C,R)},ue.useLayoutEffect=function(C,R){return oe.current.useLayoutEffect(C,R)},ue.useMemo=function(C,R){return oe.current.useMemo(C,R)},ue.useReducer=function(C,R,re){return oe.current.useReducer(C,R,re)},ue.useRef=function(C){return oe.current.useRef(C)},ue.useState=function(C){return oe.current.useState(C)},ue.useSyncExternalStore=function(C,R,re){return oe.current.useSyncExternalStore(C,R,re)},ue.useTransition=function(){return oe.current.useTransition()},ue.version="18.3.1",ue}var fm;function Kl(){return fm||(fm=1,ml.exports=cy()),ml.exports}var pm;function dy(){if(pm)return bs;pm=1;var r=Kl(),n=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(m,p,h){var g,v={},w=null,S=null;h!==void 0&&(w=""+h),p.key!==void 0&&(w=""+p.key),p.ref!==void 0&&(S=p.ref);for(g in p)o.call(p,g)&&!u.hasOwnProperty(g)&&(v[g]=p[g]);if(m&&m.defaultProps)for(g in p=m.defaultProps,p)v[g]===void 0&&(v[g]=p[g]);return{$$typeof:n,type:m,key:w,ref:S,props:v,_owner:a.current}}return bs.Fragment=i,bs.jsx=d,bs.jsxs=d,bs}var hm;function my(){return hm||(hm=1,dl.exports=dy()),dl.exports}var B=my(),se=Kl();const fy=Of(se);var eo={},fl={exports:{}},ct={},pl={exports:{}},hl={};var gm;function py(){return gm||(gm=1,(function(r){function n(U,X){var H=U.length;U.push(X);e:for(;0<H;){var C=H-1>>>1,R=U[C];if(0<a(R,X))U[C]=X,U[H]=R,H=C;else break e}}function i(U){return U.length===0?null:U[0]}function o(U){if(U.length===0)return null;var X=U[0],H=U.pop();if(H!==X){U[0]=H;e:for(var C=0,R=U.length,re=R>>>1;C<re;){var ae=2*(C+1)-1,ce=U[ae],de=ae+1,ge=U[de];if(0>a(ce,H))de<R&&0>a(ge,ce)?(U[C]=ge,U[de]=H,C=de):(U[C]=ce,U[ae]=H,C=ae);else if(de<R&&0>a(ge,H))U[C]=ge,U[de]=H,C=de;else break e}}return X}function a(U,X){var H=U.sortIndex-X.sortIndex;return H!==0?H:U.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();r.unstable_now=function(){return d.now()-m}}var p=[],h=[],g=1,v=null,w=3,S=!1,b=!1,T=!1,D=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(U){for(var X=i(h);X!==null;){if(X.callback===null)o(h);else if(X.startTime<=U)o(h),X.sortIndex=X.expirationTime,n(p,X);else break;X=i(h)}}function z(U){if(T=!1,A(U),!b)if(i(p)!==null)b=!0,$e(F);else{var X=i(h);X!==null&&oe(z,X.startTime-U)}}function F(U,X){b=!1,T&&(T=!1,N(Q),Q=-1),S=!0;var H=w;try{for(A(X),v=i(p);v!==null&&(!(v.expirationTime>X)||U&&!we());){var C=v.callback;if(typeof C=="function"){v.callback=null,w=v.priorityLevel;var R=C(v.expirationTime<=X);X=r.unstable_now(),typeof R=="function"?v.callback=R:v===i(p)&&o(p),A(X)}else o(p);v=i(p)}if(v!==null)var re=!0;else{var ae=i(h);ae!==null&&oe(z,ae.startTime-X),re=!1}return re}finally{v=null,w=H,S=!1}}var J=!1,ie=null,Q=-1,me=5,ve=-1;function we(){return!(r.unstable_now()-ve<me)}function Oe(){if(ie!==null){var U=r.unstable_now();ve=U;var X=!0;try{X=ie(!0,U)}finally{X?je():(J=!1,ie=null)}}else J=!1}var je;if(typeof V=="function")je=function(){V(Oe)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,st=He.port2;He.port1.onmessage=Oe,je=function(){st.postMessage(null)}}else je=function(){D(Oe,0)};function $e(U){ie=U,J||(J=!0,je())}function oe(U,X){Q=D(function(){U(r.unstable_now())},X)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(U){U.callback=null},r.unstable_continueExecution=function(){b||S||(b=!0,$e(F))},r.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):me=0<U?Math.floor(1e3/U):5},r.unstable_getCurrentPriorityLevel=function(){return w},r.unstable_getFirstCallbackNode=function(){return i(p)},r.unstable_next=function(U){switch(w){case 1:case 2:case 3:var X=3;break;default:X=w}var H=w;w=X;try{return U()}finally{w=H}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(U,X){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var H=w;w=U;try{return X()}finally{w=H}},r.unstable_scheduleCallback=function(U,X,H){var C=r.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?C+H:C):H=C,U){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=H+R,U={id:g++,callback:X,priorityLevel:U,startTime:H,expirationTime:R,sortIndex:-1},H>C?(U.sortIndex=H,n(h,U),i(p)===null&&U===i(h)&&(T?(N(Q),Q=-1):T=!0,oe(z,H-C))):(U.sortIndex=R,n(p,U),b||S||(b=!0,$e(F))),U},r.unstable_shouldYield=we,r.unstable_wrapCallback=function(U){var X=w;return function(){var H=w;w=X;try{return U.apply(this,arguments)}finally{w=H}}}})(hl)),hl}var ym;function hy(){return ym||(ym=1,pl.exports=py()),pl.exports}var vm;function gy(){if(vm)return ct;vm=1;var r=Kl(),n=hy();function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function u(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function w(e){return p.call(v,e)?!0:p.call(g,e)?!1:h.test(e)?v[e]=!0:(g[e]=!0,!1)}function S(e,t,s,l){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function b(e,t,s,l){if(t===null||typeof t>"u"||S(e,t,s,l))return!0;if(l)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function T(e,t,s,l,c,f,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=c,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=y}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){D[e]=new T(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];D[t]=new T(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){D[e]=new T(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){D[e]=new T(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){D[e]=new T(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){D[e]=new T(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){D[e]=new T(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){D[e]=new T(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){D[e]=new T(e,5,!1,e.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function V(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(N,V);D[t]=new T(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(N,V);D[t]=new T(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(N,V);D[t]=new T(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){D[e]=new T(e,1,!1,e.toLowerCase(),null,!1,!1)}),D.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){D[e]=new T(e,1,!1,e.toLowerCase(),null,!0,!0)});function A(e,t,s,l){var c=D.hasOwnProperty(t)?D[t]:null;(c!==null?c.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(b(t,s,c,l)&&(s=null),l||c===null?w(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):c.mustUseProperty?e[c.propertyName]=s===null?c.type===3?!1:"":s:(t=c.attributeName,l=c.attributeNamespace,s===null?e.removeAttribute(t):(c=c.type,s=c===3||c===4&&s===!0?"":""+s,l?e.setAttributeNS(l,t,s):e.setAttribute(t,s))))}var z=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),J=Symbol.for("react.portal"),ie=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),me=Symbol.for("react.profiler"),ve=Symbol.for("react.provider"),we=Symbol.for("react.context"),Oe=Symbol.for("react.forward_ref"),je=Symbol.for("react.suspense"),He=Symbol.for("react.suspense_list"),st=Symbol.for("react.memo"),$e=Symbol.for("react.lazy"),oe=Symbol.for("react.offscreen"),U=Symbol.iterator;function X(e){return e===null||typeof e!="object"?null:(e=U&&e[U]||e["@@iterator"],typeof e=="function"?e:null)}var H=Object.assign,C;function R(e){if(C===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);C=t&&t[1]||""}return`
`+C+e}var re=!1;function ae(e,t){if(!e||re)return"";re=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(M){var l=M}Reflect.construct(e,[],t)}else{try{t.call()}catch(M){l=M}e.call(t.prototype)}else{try{throw Error()}catch(M){l=M}e()}}catch(M){if(M&&l&&typeof M.stack=="string"){for(var c=M.stack.split(`
`),f=l.stack.split(`
`),y=c.length-1,E=f.length-1;1<=y&&0<=E&&c[y]!==f[E];)E--;for(;1<=y&&0<=E;y--,E--)if(c[y]!==f[E]){if(y!==1||E!==1)do if(y--,E--,0>E||c[y]!==f[E]){var x=`
`+c[y].replace(" at new "," at ");return e.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",e.displayName)),x}while(1<=y&&0<=E);break}}}finally{re=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?R(e):""}function ce(e){switch(e.tag){case 5:return R(e.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 2:case 15:return e=ae(e.type,!1),e;case 11:return e=ae(e.type.render,!1),e;case 1:return e=ae(e.type,!0),e;default:return""}}function de(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ie:return"Fragment";case J:return"Portal";case me:return"Profiler";case Q:return"StrictMode";case je:return"Suspense";case He:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case we:return(e.displayName||"Context")+".Consumer";case ve:return(e._context.displayName||"Context")+".Provider";case Oe:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case st:return t=e.displayName||null,t!==null?t:de(e.type)||"Memo";case $e:t=e._payload,e=e._init;try{return de(e(t))}catch{}}return null}function ge(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(t);case 8:return t===Q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function pe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ee(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Je(e){var t=Ee(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,f=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(y){l=""+y,f.call(this,y)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(y){l=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Mn(e){e._valueTracker||(e._valueTracker=Je(e))}function Ri(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),l="";return e&&(l=Ee(e)?e.checked?"true":"false":e.value),e=l,e!==s?(t.setValue(e),!0):!1}function Tn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Qn(e,t){var s=t.checked;return H({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function _i(e,t){var s=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;s=pe(t.value!=null?t.value:s),e._wrapperState={initialChecked:l,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Oi(e,t){t=t.checked,t!=null&&A(e,"checked",t,!1)}function Xn(e,t){Oi(e,t);var s=pe(t.value),l=t.type;if(s!=null)l==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Zn(e,t.type,s):t.hasOwnProperty("defaultValue")&&Zn(e,t.type,pe(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ji(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Zn(e,t,s){(t!=="number"||Tn(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var sn=Array.isArray;function Ht(e,t,s,l){if(e=e.options,t){t={};for(var c=0;c<s.length;c++)t["$"+s[c]]=!0;for(s=0;s<e.length;s++)c=t.hasOwnProperty("$"+e[s].value),e[s].selected!==c&&(e[s].selected=c),c&&l&&(e[s].defaultSelected=!0)}else{for(s=""+pe(s),t=null,c=0;c<e.length;c++){if(e[c].value===s){e[c].selected=!0,l&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function ei(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(i(91));return H({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $i(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(i(92));if(sn(s)){if(1<s.length)throw Error(i(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:pe(s)}}function Vi(e,t){var s=pe(t.value),l=pe(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),l!=null&&(e.defaultValue=""+l)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ws(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ws(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Gs,bu=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,l,c){MSApp.execUnsafeLocalFunction(function(){return e(t,s,l,c)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Gs=Gs||document.createElement("div"),Gs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Gs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ui(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ph=["Webkit","ms","Moz","O"];Object.keys(zi).forEach(function(e){ph.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),zi[t]=zi[e]})});function Pu(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||zi.hasOwnProperty(e)&&zi[e]?(""+t).trim():t+"px"}function Bu(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var l=s.indexOf("--")===0,c=Pu(s,t[s],l);s==="float"&&(s="cssFloat"),l?e.setProperty(s,c):e[s]=c}}var hh=H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ko(e,t){if(t){if(hh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(i(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(i(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(t.style!=null&&typeof t.style!="object")throw Error(i(62))}}function Co(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Io=null;function bo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Po=null,ti=null,ni=null;function Lu(e){if(e=ds(e)){if(typeof Po!="function")throw Error(i(280));var t=e.stateNode;t&&(t=hr(t),Po(e.stateNode,e.type,t))}}function Mu(e){ti?ni?ni.push(e):ni=[e]:ti=e}function Tu(){if(ti){var e=ti,t=ni;if(ni=ti=null,Lu(e),t)for(e=0;e<t.length;e++)Lu(t[e])}}function Au(e,t){return e(t)}function Du(){}var Bo=!1;function Nu(e,t,s){if(Bo)return e(t,s);Bo=!0;try{return Au(e,t,s)}finally{Bo=!1,(ti!==null||ni!==null)&&(Du(),Tu())}}function Hi(e,t){var s=e.stateNode;if(s===null)return null;var l=hr(s);if(l===null)return null;s=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(i(231,t,typeof s));return s}var Lo=!1;if(m)try{var Wi={};Object.defineProperty(Wi,"passive",{get:function(){Lo=!0}}),window.addEventListener("test",Wi,Wi),window.removeEventListener("test",Wi,Wi)}catch{Lo=!1}function gh(e,t,s,l,c,f,y,E,x){var M=Array.prototype.slice.call(arguments,3);try{t.apply(s,M)}catch(O){this.onError(O)}}var Gi=!1,Ks=null,Js=!1,Mo=null,yh={onError:function(e){Gi=!0,Ks=e}};function vh(e,t,s,l,c,f,y,E,x){Gi=!1,Ks=null,gh.apply(yh,arguments)}function wh(e,t,s,l,c,f,y,E,x){if(vh.apply(this,arguments),Gi){if(Gi){var M=Ks;Gi=!1,Ks=null}else throw Error(i(198));Js||(Js=!0,Mo=M)}}function An(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Fu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ru(e){if(An(e)!==e)throw Error(i(188))}function Eh(e){var t=e.alternate;if(!t){if(t=An(e),t===null)throw Error(i(188));return t!==e?null:e}for(var s=e,l=t;;){var c=s.return;if(c===null)break;var f=c.alternate;if(f===null){if(l=c.return,l!==null){s=l;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===s)return Ru(c),e;if(f===l)return Ru(c),t;f=f.sibling}throw Error(i(188))}if(s.return!==l.return)s=c,l=f;else{for(var y=!1,E=c.child;E;){if(E===s){y=!0,s=c,l=f;break}if(E===l){y=!0,l=c,s=f;break}E=E.sibling}if(!y){for(E=f.child;E;){if(E===s){y=!0,s=f,l=c;break}if(E===l){y=!0,l=f,s=c;break}E=E.sibling}if(!y)throw Error(i(189))}}if(s.alternate!==l)throw Error(i(190))}if(s.tag!==3)throw Error(i(188));return s.stateNode.current===s?e:t}function _u(e){return e=Eh(e),e!==null?Ou(e):null}function Ou(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ou(e);if(t!==null)return t;e=e.sibling}return null}var ju=n.unstable_scheduleCallback,$u=n.unstable_cancelCallback,Sh=n.unstable_shouldYield,xh=n.unstable_requestPaint,Ae=n.unstable_now,kh=n.unstable_getCurrentPriorityLevel,To=n.unstable_ImmediatePriority,Vu=n.unstable_UserBlockingPriority,Ys=n.unstable_NormalPriority,Ch=n.unstable_LowPriority,Uu=n.unstable_IdlePriority,qs=null,_t=null;function Ih(e){if(_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(qs,e,void 0,(e.current.flags&128)===128)}catch{}}var Pt=Math.clz32?Math.clz32:Bh,bh=Math.log,Ph=Math.LN2;function Bh(e){return e>>>=0,e===0?32:31-(bh(e)/Ph|0)|0}var Qs=64,Xs=4194304;function Ki(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Zs(e,t){var s=e.pendingLanes;if(s===0)return 0;var l=0,c=e.suspendedLanes,f=e.pingedLanes,y=s&268435455;if(y!==0){var E=y&~c;E!==0?l=Ki(E):(f&=y,f!==0&&(l=Ki(f)))}else y=s&~c,y!==0?l=Ki(y):f!==0&&(l=Ki(f));if(l===0)return 0;if(t!==0&&t!==l&&(t&c)===0&&(c=l&-l,f=t&-t,c>=f||c===16&&(f&4194240)!==0))return t;if((l&4)!==0&&(l|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)s=31-Pt(t),c=1<<s,l|=e[s],t&=~c;return l}function Lh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mh(e,t){for(var s=e.suspendedLanes,l=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes;0<f;){var y=31-Pt(f),E=1<<y,x=c[y];x===-1?((E&s)===0||(E&l)!==0)&&(c[y]=Lh(E,t)):x<=t&&(e.expiredLanes|=E),f&=~E}}function Ao(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function zu(){var e=Qs;return Qs<<=1,(Qs&4194240)===0&&(Qs=64),e}function Do(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Ji(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Pt(t),e[t]=s}function Th(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<s;){var c=31-Pt(s),f=1<<c;t[c]=0,l[c]=-1,e[c]=-1,s&=~f}}function No(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var l=31-Pt(s),c=1<<l;c&t|e[l]&t&&(e[l]|=t),s&=~c}}var ye=0;function Hu(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Wu,Fo,Gu,Ku,Ju,Ro=!1,er=[],rn=null,on=null,an=null,Yi=new Map,qi=new Map,ln=[],Ah="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yu(e,t){switch(e){case"focusin":case"focusout":rn=null;break;case"dragenter":case"dragleave":on=null;break;case"mouseover":case"mouseout":an=null;break;case"pointerover":case"pointerout":Yi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qi.delete(t.pointerId)}}function Qi(e,t,s,l,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:s,eventSystemFlags:l,nativeEvent:f,targetContainers:[c]},t!==null&&(t=ds(t),t!==null&&Fo(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Dh(e,t,s,l,c){switch(t){case"focusin":return rn=Qi(rn,e,t,s,l,c),!0;case"dragenter":return on=Qi(on,e,t,s,l,c),!0;case"mouseover":return an=Qi(an,e,t,s,l,c),!0;case"pointerover":var f=c.pointerId;return Yi.set(f,Qi(Yi.get(f)||null,e,t,s,l,c)),!0;case"gotpointercapture":return f=c.pointerId,qi.set(f,Qi(qi.get(f)||null,e,t,s,l,c)),!0}return!1}function qu(e){var t=Dn(e.target);if(t!==null){var s=An(t);if(s!==null){if(t=s.tag,t===13){if(t=Fu(s),t!==null){e.blockedOn=t,Ju(e.priority,function(){Gu(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Oo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);Io=l,s.target.dispatchEvent(l),Io=null}else return t=ds(s),t!==null&&Fo(t),e.blockedOn=s,!1;t.shift()}return!0}function Qu(e,t,s){tr(e)&&s.delete(t)}function Nh(){Ro=!1,rn!==null&&tr(rn)&&(rn=null),on!==null&&tr(on)&&(on=null),an!==null&&tr(an)&&(an=null),Yi.forEach(Qu),qi.forEach(Qu)}function Xi(e,t){e.blockedOn===t&&(e.blockedOn=null,Ro||(Ro=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Nh)))}function Zi(e){function t(c){return Xi(c,e)}if(0<er.length){Xi(er[0],e);for(var s=1;s<er.length;s++){var l=er[s];l.blockedOn===e&&(l.blockedOn=null)}}for(rn!==null&&Xi(rn,e),on!==null&&Xi(on,e),an!==null&&Xi(an,e),Yi.forEach(t),qi.forEach(t),s=0;s<ln.length;s++)l=ln[s],l.blockedOn===e&&(l.blockedOn=null);for(;0<ln.length&&(s=ln[0],s.blockedOn===null);)qu(s),s.blockedOn===null&&ln.shift()}var ii=z.ReactCurrentBatchConfig,nr=!0;function Fh(e,t,s,l){var c=ye,f=ii.transition;ii.transition=null;try{ye=1,_o(e,t,s,l)}finally{ye=c,ii.transition=f}}function Rh(e,t,s,l){var c=ye,f=ii.transition;ii.transition=null;try{ye=4,_o(e,t,s,l)}finally{ye=c,ii.transition=f}}function _o(e,t,s,l){if(nr){var c=Oo(e,t,s,l);if(c===null)ta(e,t,l,ir,s),Yu(e,l);else if(Dh(c,e,t,s,l))l.stopPropagation();else if(Yu(e,l),t&4&&-1<Ah.indexOf(e)){for(;c!==null;){var f=ds(c);if(f!==null&&Wu(f),f=Oo(e,t,s,l),f===null&&ta(e,t,l,ir,s),f===c)break;c=f}c!==null&&l.stopPropagation()}else ta(e,t,l,null,s)}}var ir=null;function Oo(e,t,s,l){if(ir=null,e=bo(l),e=Dn(e),e!==null)if(t=An(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Fu(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ir=e,null}function Xu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kh()){case To:return 1;case Vu:return 4;case Ys:case Ch:return 16;case Uu:return 536870912;default:return 16}default:return 16}}var un=null,jo=null,sr=null;function Zu(){if(sr)return sr;var e,t=jo,s=t.length,l,c="value"in un?un.value:un.textContent,f=c.length;for(e=0;e<s&&t[e]===c[e];e++);var y=s-e;for(l=1;l<=y&&t[s-l]===c[f-l];l++);return sr=c.slice(e,1<l?1-l:void 0)}function rr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function or(){return!0}function ec(){return!1}function dt(e){function t(s,l,c,f,y){this._reactName=s,this._targetInst=c,this.type=l,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(s=e[E],this[E]=s?s(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?or:ec,this.isPropagationStopped=ec,this}return H(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=or)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=or)},persist:function(){},isPersistent:or}),t}var si={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$o=dt(si),es=H({},si,{view:0,detail:0}),_h=dt(es),Vo,Uo,ts,ar=H({},es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ho,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ts&&(ts&&e.type==="mousemove"?(Vo=e.screenX-ts.screenX,Uo=e.screenY-ts.screenY):Uo=Vo=0,ts=e),Vo)},movementY:function(e){return"movementY"in e?e.movementY:Uo}}),tc=dt(ar),Oh=H({},ar,{dataTransfer:0}),jh=dt(Oh),$h=H({},es,{relatedTarget:0}),zo=dt($h),Vh=H({},si,{animationName:0,elapsedTime:0,pseudoElement:0}),Uh=dt(Vh),zh=H({},si,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Hh=dt(zh),Wh=H({},si,{data:0}),nc=dt(Wh),Gh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Jh[e])?!!t[e]:!1}function Ho(){return Yh}var qh=H({},es,{key:function(e){if(e.key){var t=Gh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=rr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Kh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ho,charCode:function(e){return e.type==="keypress"?rr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?rr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Qh=dt(qh),Xh=H({},ar,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ic=dt(Xh),Zh=H({},es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ho}),eg=dt(Zh),tg=H({},si,{propertyName:0,elapsedTime:0,pseudoElement:0}),ng=dt(tg),ig=H({},ar,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sg=dt(ig),rg=[9,13,27,32],Wo=m&&"CompositionEvent"in window,ns=null;m&&"documentMode"in document&&(ns=document.documentMode);var og=m&&"TextEvent"in window&&!ns,sc=m&&(!Wo||ns&&8<ns&&11>=ns),rc=" ",oc=!1;function ac(e,t){switch(e){case"keyup":return rg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ri=!1;function ag(e,t){switch(e){case"compositionend":return lc(t);case"keypress":return t.which!==32?null:(oc=!0,rc);case"textInput":return e=t.data,e===rc&&oc?null:e;default:return null}}function lg(e,t){if(ri)return e==="compositionend"||!Wo&&ac(e,t)?(e=Zu(),sr=jo=un=null,ri=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sc&&t.locale!=="ko"?null:t.data;default:return null}}var ug={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ug[e.type]:t==="textarea"}function cc(e,t,s,l){Mu(l),t=mr(t,"onChange"),0<t.length&&(s=new $o("onChange","change",null,s,l),e.push({event:s,listeners:t}))}var is=null,ss=null;function cg(e){Bc(e,0)}function lr(e){var t=ci(e);if(Ri(t))return e}function dg(e,t){if(e==="change")return t}var dc=!1;if(m){var Go;if(m){var Ko="oninput"in document;if(!Ko){var mc=document.createElement("div");mc.setAttribute("oninput","return;"),Ko=typeof mc.oninput=="function"}Go=Ko}else Go=!1;dc=Go&&(!document.documentMode||9<document.documentMode)}function fc(){is&&(is.detachEvent("onpropertychange",pc),ss=is=null)}function pc(e){if(e.propertyName==="value"&&lr(ss)){var t=[];cc(t,ss,e,bo(e)),Nu(cg,t)}}function mg(e,t,s){e==="focusin"?(fc(),is=t,ss=s,is.attachEvent("onpropertychange",pc)):e==="focusout"&&fc()}function fg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return lr(ss)}function pg(e,t){if(e==="click")return lr(t)}function hg(e,t){if(e==="input"||e==="change")return lr(t)}function gg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bt=typeof Object.is=="function"?Object.is:gg;function rs(e,t){if(Bt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),l=Object.keys(t);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var c=s[l];if(!p.call(t,c)||!Bt(e[c],t[c]))return!1}return!0}function hc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gc(e,t){var s=hc(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=t&&l>=t)return{node:s,offset:t-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=hc(s)}}function yc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?yc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vc(){for(var e=window,t=Tn();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Tn(e.document)}return t}function Jo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function yg(e){var t=vc(),s=e.focusedElem,l=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&yc(s.ownerDocument.documentElement,s)){if(l!==null&&Jo(s)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=s.textContent.length,f=Math.min(l.start,c);l=l.end===void 0?f:Math.min(l.end,c),!e.extend&&f>l&&(c=l,l=f,f=c),c=gc(s,f);var y=gc(s,l);c&&y&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),f>l?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vg=m&&"documentMode"in document&&11>=document.documentMode,oi=null,Yo=null,os=null,qo=!1;function wc(e,t,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;qo||oi==null||oi!==Tn(l)||(l=oi,"selectionStart"in l&&Jo(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),os&&rs(os,l)||(os=l,l=mr(Yo,"onSelect"),0<l.length&&(t=new $o("onSelect","select",null,t,s),e.push({event:t,listeners:l}),t.target=oi)))}function ur(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var ai={animationend:ur("Animation","AnimationEnd"),animationiteration:ur("Animation","AnimationIteration"),animationstart:ur("Animation","AnimationStart"),transitionend:ur("Transition","TransitionEnd")},Qo={},Ec={};m&&(Ec=document.createElement("div").style,"AnimationEvent"in window||(delete ai.animationend.animation,delete ai.animationiteration.animation,delete ai.animationstart.animation),"TransitionEvent"in window||delete ai.transitionend.transition);function cr(e){if(Qo[e])return Qo[e];if(!ai[e])return e;var t=ai[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Ec)return Qo[e]=t[s];return e}var Sc=cr("animationend"),xc=cr("animationiteration"),kc=cr("animationstart"),Cc=cr("transitionend"),Ic=new Map,bc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cn(e,t){Ic.set(e,t),u(t,[e])}for(var Xo=0;Xo<bc.length;Xo++){var Zo=bc[Xo],wg=Zo.toLowerCase(),Eg=Zo[0].toUpperCase()+Zo.slice(1);cn(wg,"on"+Eg)}cn(Sc,"onAnimationEnd"),cn(xc,"onAnimationIteration"),cn(kc,"onAnimationStart"),cn("dblclick","onDoubleClick"),cn("focusin","onFocus"),cn("focusout","onBlur"),cn(Cc,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var as="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sg=new Set("cancel close invalid load scroll toggle".split(" ").concat(as));function Pc(e,t,s){var l=e.type||"unknown-event";e.currentTarget=s,wh(l,t,void 0,e),e.currentTarget=null}function Bc(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],c=l.event;l=l.listeners;e:{var f=void 0;if(t)for(var y=l.length-1;0<=y;y--){var E=l[y],x=E.instance,M=E.currentTarget;if(E=E.listener,x!==f&&c.isPropagationStopped())break e;Pc(c,E,M),f=x}else for(y=0;y<l.length;y++){if(E=l[y],x=E.instance,M=E.currentTarget,E=E.listener,x!==f&&c.isPropagationStopped())break e;Pc(c,E,M),f=x}}}if(Js)throw e=Mo,Js=!1,Mo=null,e}function xe(e,t){var s=t[aa];s===void 0&&(s=t[aa]=new Set);var l=e+"__bubble";s.has(l)||(Lc(t,e,2,!1),s.add(l))}function ea(e,t,s){var l=0;t&&(l|=4),Lc(s,e,l,t)}var dr="_reactListening"+Math.random().toString(36).slice(2);function ls(e){if(!e[dr]){e[dr]=!0,o.forEach(function(s){s!=="selectionchange"&&(Sg.has(s)||ea(s,!1,e),ea(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[dr]||(t[dr]=!0,ea("selectionchange",!1,t))}}function Lc(e,t,s,l){switch(Xu(t)){case 1:var c=Fh;break;case 4:c=Rh;break;default:c=_o}s=c.bind(null,t,s,e),c=void 0,!Lo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),l?c!==void 0?e.addEventListener(t,s,{capture:!0,passive:c}):e.addEventListener(t,s,!0):c!==void 0?e.addEventListener(t,s,{passive:c}):e.addEventListener(t,s,!1)}function ta(e,t,s,l,c){var f=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var E=l.stateNode.containerInfo;if(E===c||E.nodeType===8&&E.parentNode===c)break;if(y===4)for(y=l.return;y!==null;){var x=y.tag;if((x===3||x===4)&&(x=y.stateNode.containerInfo,x===c||x.nodeType===8&&x.parentNode===c))return;y=y.return}for(;E!==null;){if(y=Dn(E),y===null)return;if(x=y.tag,x===5||x===6){l=f=y;continue e}E=E.parentNode}}l=l.return}Nu(function(){var M=f,O=bo(s),j=[];e:{var _=Ic.get(e);if(_!==void 0){var W=$o,K=e;switch(e){case"keypress":if(rr(s)===0)break e;case"keydown":case"keyup":W=Qh;break;case"focusin":K="focus",W=zo;break;case"focusout":K="blur",W=zo;break;case"beforeblur":case"afterblur":W=zo;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=tc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=jh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=eg;break;case Sc:case xc:case kc:W=Uh;break;case Cc:W=ng;break;case"scroll":W=_h;break;case"wheel":W=sg;break;case"copy":case"cut":case"paste":W=Hh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=ic}var Y=(t&4)!==0,De=!Y&&e==="scroll",I=Y?_!==null?_+"Capture":null:_;Y=[];for(var k=M,P;k!==null;){P=k;var $=P.stateNode;if(P.tag===5&&$!==null&&(P=$,I!==null&&($=Hi(k,I),$!=null&&Y.push(us(k,$,P)))),De)break;k=k.return}0<Y.length&&(_=new W(_,K,null,s,O),j.push({event:_,listeners:Y}))}}if((t&7)===0){e:{if(_=e==="mouseover"||e==="pointerover",W=e==="mouseout"||e==="pointerout",_&&s!==Io&&(K=s.relatedTarget||s.fromElement)&&(Dn(K)||K[Wt]))break e;if((W||_)&&(_=O.window===O?O:(_=O.ownerDocument)?_.defaultView||_.parentWindow:window,W?(K=s.relatedTarget||s.toElement,W=M,K=K?Dn(K):null,K!==null&&(De=An(K),K!==De||K.tag!==5&&K.tag!==6)&&(K=null)):(W=null,K=M),W!==K)){if(Y=tc,$="onMouseLeave",I="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(Y=ic,$="onPointerLeave",I="onPointerEnter",k="pointer"),De=W==null?_:ci(W),P=K==null?_:ci(K),_=new Y($,k+"leave",W,s,O),_.target=De,_.relatedTarget=P,$=null,Dn(O)===M&&(Y=new Y(I,k+"enter",K,s,O),Y.target=P,Y.relatedTarget=De,$=Y),De=$,W&&K)t:{for(Y=W,I=K,k=0,P=Y;P;P=li(P))k++;for(P=0,$=I;$;$=li($))P++;for(;0<k-P;)Y=li(Y),k--;for(;0<P-k;)I=li(I),P--;for(;k--;){if(Y===I||I!==null&&Y===I.alternate)break t;Y=li(Y),I=li(I)}Y=null}else Y=null;W!==null&&Mc(j,_,W,Y,!1),K!==null&&De!==null&&Mc(j,De,K,Y,!0)}}e:{if(_=M?ci(M):window,W=_.nodeName&&_.nodeName.toLowerCase(),W==="select"||W==="input"&&_.type==="file")var q=dg;else if(uc(_))if(dc)q=hg;else{q=fg;var Z=mg}else(W=_.nodeName)&&W.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(q=pg);if(q&&(q=q(e,M))){cc(j,q,s,O);break e}Z&&Z(e,_,M),e==="focusout"&&(Z=_._wrapperState)&&Z.controlled&&_.type==="number"&&Zn(_,"number",_.value)}switch(Z=M?ci(M):window,e){case"focusin":(uc(Z)||Z.contentEditable==="true")&&(oi=Z,Yo=M,os=null);break;case"focusout":os=Yo=oi=null;break;case"mousedown":qo=!0;break;case"contextmenu":case"mouseup":case"dragend":qo=!1,wc(j,s,O);break;case"selectionchange":if(vg)break;case"keydown":case"keyup":wc(j,s,O)}var ee;if(Wo)e:{switch(e){case"compositionstart":var ne="onCompositionStart";break e;case"compositionend":ne="onCompositionEnd";break e;case"compositionupdate":ne="onCompositionUpdate";break e}ne=void 0}else ri?ac(e,s)&&(ne="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(ne="onCompositionStart");ne&&(sc&&s.locale!=="ko"&&(ri||ne!=="onCompositionStart"?ne==="onCompositionEnd"&&ri&&(ee=Zu()):(un=O,jo="value"in un?un.value:un.textContent,ri=!0)),Z=mr(M,ne),0<Z.length&&(ne=new nc(ne,e,null,s,O),j.push({event:ne,listeners:Z}),ee?ne.data=ee:(ee=lc(s),ee!==null&&(ne.data=ee)))),(ee=og?ag(e,s):lg(e,s))&&(M=mr(M,"onBeforeInput"),0<M.length&&(O=new nc("onBeforeInput","beforeinput",null,s,O),j.push({event:O,listeners:M}),O.data=ee))}Bc(j,t)})}function us(e,t,s){return{instance:e,listener:t,currentTarget:s}}function mr(e,t){for(var s=t+"Capture",l=[];e!==null;){var c=e,f=c.stateNode;c.tag===5&&f!==null&&(c=f,f=Hi(e,s),f!=null&&l.unshift(us(e,f,c)),f=Hi(e,t),f!=null&&l.push(us(e,f,c))),e=e.return}return l}function li(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Mc(e,t,s,l,c){for(var f=t._reactName,y=[];s!==null&&s!==l;){var E=s,x=E.alternate,M=E.stateNode;if(x!==null&&x===l)break;E.tag===5&&M!==null&&(E=M,c?(x=Hi(s,f),x!=null&&y.unshift(us(s,x,E))):c||(x=Hi(s,f),x!=null&&y.push(us(s,x,E)))),s=s.return}y.length!==0&&e.push({event:t,listeners:y})}var xg=/\r\n?/g,kg=/\u0000|\uFFFD/g;function Tc(e){return(typeof e=="string"?e:""+e).replace(xg,`
`).replace(kg,"")}function fr(e,t,s){if(t=Tc(t),Tc(e)!==t&&s)throw Error(i(425))}function pr(){}var na=null,ia=null;function sa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ra=typeof setTimeout=="function"?setTimeout:void 0,Cg=typeof clearTimeout=="function"?clearTimeout:void 0,Ac=typeof Promise=="function"?Promise:void 0,Ig=typeof queueMicrotask=="function"?queueMicrotask:typeof Ac<"u"?function(e){return Ac.resolve(null).then(e).catch(bg)}:ra;function bg(e){setTimeout(function(){throw e})}function oa(e,t){var s=t,l=0;do{var c=s.nextSibling;if(e.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"){if(l===0){e.removeChild(c),Zi(t);return}l--}else s!=="$"&&s!=="$?"&&s!=="$!"||l++;s=c}while(s);Zi(t)}function dn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Dc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var ui=Math.random().toString(36).slice(2),Ot="__reactFiber$"+ui,cs="__reactProps$"+ui,Wt="__reactContainer$"+ui,aa="__reactEvents$"+ui,Pg="__reactListeners$"+ui,Bg="__reactHandles$"+ui;function Dn(e){var t=e[Ot];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Wt]||s[Ot]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Dc(e);e!==null;){if(s=e[Ot])return s;e=Dc(e)}return t}e=s,s=e.parentNode}return null}function ds(e){return e=e[Ot]||e[Wt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ci(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(i(33))}function hr(e){return e[cs]||null}var la=[],di=-1;function mn(e){return{current:e}}function ke(e){0>di||(e.current=la[di],la[di]=null,di--)}function Se(e,t){di++,la[di]=e.current,e.current=t}var fn={},Ye=mn(fn),rt=mn(!1),Nn=fn;function mi(e,t){var s=e.type.contextTypes;if(!s)return fn;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var c={},f;for(f in s)c[f]=t[f];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function ot(e){return e=e.childContextTypes,e!=null}function gr(){ke(rt),ke(Ye)}function Nc(e,t,s){if(Ye.current!==fn)throw Error(i(168));Se(Ye,t),Se(rt,s)}function Fc(e,t,s){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return s;l=l.getChildContext();for(var c in l)if(!(c in t))throw Error(i(108,ge(e)||"Unknown",c));return H({},s,l)}function yr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fn,Nn=Ye.current,Se(Ye,e),Se(rt,rt.current),!0}function Rc(e,t,s){var l=e.stateNode;if(!l)throw Error(i(169));s?(e=Fc(e,t,Nn),l.__reactInternalMemoizedMergedChildContext=e,ke(rt),ke(Ye),Se(Ye,e)):ke(rt),Se(rt,s)}var Gt=null,vr=!1,ua=!1;function _c(e){Gt===null?Gt=[e]:Gt.push(e)}function Lg(e){vr=!0,_c(e)}function pn(){if(!ua&&Gt!==null){ua=!0;var e=0,t=ye;try{var s=Gt;for(ye=1;e<s.length;e++){var l=s[e];do l=l(!0);while(l!==null)}Gt=null,vr=!1}catch(c){throw Gt!==null&&(Gt=Gt.slice(e+1)),ju(To,pn),c}finally{ye=t,ua=!1}}return null}var fi=[],pi=0,wr=null,Er=0,vt=[],wt=0,Fn=null,Kt=1,Jt="";function Rn(e,t){fi[pi++]=Er,fi[pi++]=wr,wr=e,Er=t}function Oc(e,t,s){vt[wt++]=Kt,vt[wt++]=Jt,vt[wt++]=Fn,Fn=e;var l=Kt;e=Jt;var c=32-Pt(l)-1;l&=~(1<<c),s+=1;var f=32-Pt(t)+c;if(30<f){var y=c-c%5;f=(l&(1<<y)-1).toString(32),l>>=y,c-=y,Kt=1<<32-Pt(t)+c|s<<c|l,Jt=f+e}else Kt=1<<f|s<<c|l,Jt=e}function ca(e){e.return!==null&&(Rn(e,1),Oc(e,1,0))}function da(e){for(;e===wr;)wr=fi[--pi],fi[pi]=null,Er=fi[--pi],fi[pi]=null;for(;e===Fn;)Fn=vt[--wt],vt[wt]=null,Jt=vt[--wt],vt[wt]=null,Kt=vt[--wt],vt[wt]=null}var mt=null,ft=null,Ie=!1,Lt=null;function jc(e,t){var s=kt(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function $c(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,mt=e,ft=dn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,mt=e,ft=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Fn!==null?{id:Kt,overflow:Jt}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=kt(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,mt=e,ft=null,!0):!1;default:return!1}}function ma(e){return(e.mode&1)!==0&&(e.flags&128)===0}function fa(e){if(Ie){var t=ft;if(t){var s=t;if(!$c(e,t)){if(ma(e))throw Error(i(418));t=dn(s.nextSibling);var l=mt;t&&$c(e,t)?jc(l,s):(e.flags=e.flags&-4097|2,Ie=!1,mt=e)}}else{if(ma(e))throw Error(i(418));e.flags=e.flags&-4097|2,Ie=!1,mt=e}}}function Vc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;mt=e}function Sr(e){if(e!==mt)return!1;if(!Ie)return Vc(e),Ie=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!sa(e.type,e.memoizedProps)),t&&(t=ft)){if(ma(e))throw Uc(),Error(i(418));for(;t;)jc(e,t),t=dn(t.nextSibling)}if(Vc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){ft=dn(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}ft=null}}else ft=mt?dn(e.stateNode.nextSibling):null;return!0}function Uc(){for(var e=ft;e;)e=dn(e.nextSibling)}function hi(){ft=mt=null,Ie=!1}function pa(e){Lt===null?Lt=[e]:Lt.push(e)}var Mg=z.ReactCurrentBatchConfig;function ms(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(i(309));var l=s.stateNode}if(!l)throw Error(i(147,e));var c=l,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(y){var E=c.refs;y===null?delete E[f]:E[f]=y},t._stringRef=f,t)}if(typeof e!="string")throw Error(i(284));if(!s._owner)throw Error(i(290,e))}return e}function xr(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function zc(e){var t=e._init;return t(e._payload)}function Hc(e){function t(I,k){if(e){var P=I.deletions;P===null?(I.deletions=[k],I.flags|=16):P.push(k)}}function s(I,k){if(!e)return null;for(;k!==null;)t(I,k),k=k.sibling;return null}function l(I,k){for(I=new Map;k!==null;)k.key!==null?I.set(k.key,k):I.set(k.index,k),k=k.sibling;return I}function c(I,k){return I=xn(I,k),I.index=0,I.sibling=null,I}function f(I,k,P){return I.index=P,e?(P=I.alternate,P!==null?(P=P.index,P<k?(I.flags|=2,k):P):(I.flags|=2,k)):(I.flags|=1048576,k)}function y(I){return e&&I.alternate===null&&(I.flags|=2),I}function E(I,k,P,$){return k===null||k.tag!==6?(k=rl(P,I.mode,$),k.return=I,k):(k=c(k,P),k.return=I,k)}function x(I,k,P,$){var q=P.type;return q===ie?O(I,k,P.props.children,$,P.key):k!==null&&(k.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===$e&&zc(q)===k.type)?($=c(k,P.props),$.ref=ms(I,k,P),$.return=I,$):($=Gr(P.type,P.key,P.props,null,I.mode,$),$.ref=ms(I,k,P),$.return=I,$)}function M(I,k,P,$){return k===null||k.tag!==4||k.stateNode.containerInfo!==P.containerInfo||k.stateNode.implementation!==P.implementation?(k=ol(P,I.mode,$),k.return=I,k):(k=c(k,P.children||[]),k.return=I,k)}function O(I,k,P,$,q){return k===null||k.tag!==7?(k=Hn(P,I.mode,$,q),k.return=I,k):(k=c(k,P),k.return=I,k)}function j(I,k,P){if(typeof k=="string"&&k!==""||typeof k=="number")return k=rl(""+k,I.mode,P),k.return=I,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case F:return P=Gr(k.type,k.key,k.props,null,I.mode,P),P.ref=ms(I,null,k),P.return=I,P;case J:return k=ol(k,I.mode,P),k.return=I,k;case $e:var $=k._init;return j(I,$(k._payload),P)}if(sn(k)||X(k))return k=Hn(k,I.mode,P,null),k.return=I,k;xr(I,k)}return null}function _(I,k,P,$){var q=k!==null?k.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return q!==null?null:E(I,k,""+P,$);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case F:return P.key===q?x(I,k,P,$):null;case J:return P.key===q?M(I,k,P,$):null;case $e:return q=P._init,_(I,k,q(P._payload),$)}if(sn(P)||X(P))return q!==null?null:O(I,k,P,$,null);xr(I,P)}return null}function W(I,k,P,$,q){if(typeof $=="string"&&$!==""||typeof $=="number")return I=I.get(P)||null,E(k,I,""+$,q);if(typeof $=="object"&&$!==null){switch($.$$typeof){case F:return I=I.get($.key===null?P:$.key)||null,x(k,I,$,q);case J:return I=I.get($.key===null?P:$.key)||null,M(k,I,$,q);case $e:var Z=$._init;return W(I,k,P,Z($._payload),q)}if(sn($)||X($))return I=I.get(P)||null,O(k,I,$,q,null);xr(k,$)}return null}function K(I,k,P,$){for(var q=null,Z=null,ee=k,ne=k=0,ze=null;ee!==null&&ne<P.length;ne++){ee.index>ne?(ze=ee,ee=null):ze=ee.sibling;var he=_(I,ee,P[ne],$);if(he===null){ee===null&&(ee=ze);break}e&&ee&&he.alternate===null&&t(I,ee),k=f(he,k,ne),Z===null?q=he:Z.sibling=he,Z=he,ee=ze}if(ne===P.length)return s(I,ee),Ie&&Rn(I,ne),q;if(ee===null){for(;ne<P.length;ne++)ee=j(I,P[ne],$),ee!==null&&(k=f(ee,k,ne),Z===null?q=ee:Z.sibling=ee,Z=ee);return Ie&&Rn(I,ne),q}for(ee=l(I,ee);ne<P.length;ne++)ze=W(ee,I,ne,P[ne],$),ze!==null&&(e&&ze.alternate!==null&&ee.delete(ze.key===null?ne:ze.key),k=f(ze,k,ne),Z===null?q=ze:Z.sibling=ze,Z=ze);return e&&ee.forEach(function(kn){return t(I,kn)}),Ie&&Rn(I,ne),q}function Y(I,k,P,$){var q=X(P);if(typeof q!="function")throw Error(i(150));if(P=q.call(P),P==null)throw Error(i(151));for(var Z=q=null,ee=k,ne=k=0,ze=null,he=P.next();ee!==null&&!he.done;ne++,he=P.next()){ee.index>ne?(ze=ee,ee=null):ze=ee.sibling;var kn=_(I,ee,he.value,$);if(kn===null){ee===null&&(ee=ze);break}e&&ee&&kn.alternate===null&&t(I,ee),k=f(kn,k,ne),Z===null?q=kn:Z.sibling=kn,Z=kn,ee=ze}if(he.done)return s(I,ee),Ie&&Rn(I,ne),q;if(ee===null){for(;!he.done;ne++,he=P.next())he=j(I,he.value,$),he!==null&&(k=f(he,k,ne),Z===null?q=he:Z.sibling=he,Z=he);return Ie&&Rn(I,ne),q}for(ee=l(I,ee);!he.done;ne++,he=P.next())he=W(ee,I,ne,he.value,$),he!==null&&(e&&he.alternate!==null&&ee.delete(he.key===null?ne:he.key),k=f(he,k,ne),Z===null?q=he:Z.sibling=he,Z=he);return e&&ee.forEach(function(uy){return t(I,uy)}),Ie&&Rn(I,ne),q}function De(I,k,P,$){if(typeof P=="object"&&P!==null&&P.type===ie&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case F:e:{for(var q=P.key,Z=k;Z!==null;){if(Z.key===q){if(q=P.type,q===ie){if(Z.tag===7){s(I,Z.sibling),k=c(Z,P.props.children),k.return=I,I=k;break e}}else if(Z.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===$e&&zc(q)===Z.type){s(I,Z.sibling),k=c(Z,P.props),k.ref=ms(I,Z,P),k.return=I,I=k;break e}s(I,Z);break}else t(I,Z);Z=Z.sibling}P.type===ie?(k=Hn(P.props.children,I.mode,$,P.key),k.return=I,I=k):($=Gr(P.type,P.key,P.props,null,I.mode,$),$.ref=ms(I,k,P),$.return=I,I=$)}return y(I);case J:e:{for(Z=P.key;k!==null;){if(k.key===Z)if(k.tag===4&&k.stateNode.containerInfo===P.containerInfo&&k.stateNode.implementation===P.implementation){s(I,k.sibling),k=c(k,P.children||[]),k.return=I,I=k;break e}else{s(I,k);break}else t(I,k);k=k.sibling}k=ol(P,I.mode,$),k.return=I,I=k}return y(I);case $e:return Z=P._init,De(I,k,Z(P._payload),$)}if(sn(P))return K(I,k,P,$);if(X(P))return Y(I,k,P,$);xr(I,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,k!==null&&k.tag===6?(s(I,k.sibling),k=c(k,P),k.return=I,I=k):(s(I,k),k=rl(P,I.mode,$),k.return=I,I=k),y(I)):s(I,k)}return De}var gi=Hc(!0),Wc=Hc(!1),kr=mn(null),Cr=null,yi=null,ha=null;function ga(){ha=yi=Cr=null}function ya(e){var t=kr.current;ke(kr),e._currentValue=t}function va(e,t,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===s)break;e=e.return}}function vi(e,t){Cr=e,ha=yi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(at=!0),e.firstContext=null)}function Et(e){var t=e._currentValue;if(ha!==e)if(e={context:e,memoizedValue:t,next:null},yi===null){if(Cr===null)throw Error(i(308));yi=e,Cr.dependencies={lanes:0,firstContext:e}}else yi=yi.next=e;return t}var _n=null;function wa(e){_n===null?_n=[e]:_n.push(e)}function Gc(e,t,s,l){var c=t.interleaved;return c===null?(s.next=s,wa(t)):(s.next=c.next,c.next=s),t.interleaved=s,Yt(e,l)}function Yt(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var hn=!1;function Ea(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gn(e,t,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(fe&2)!==0){var c=l.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),l.pending=t,Yt(e,s)}return c=l.interleaved,c===null?(t.next=t,wa(l)):(t.next=c.next,c.next=t),l.interleaved=t,Yt(e,s)}function Ir(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,No(e,s)}}function Jc(e,t){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var c=null,f=null;if(s=s.firstBaseUpdate,s!==null){do{var y={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};f===null?c=f=y:f=f.next=y,s=s.next}while(s!==null);f===null?c=f=t:f=f.next=t}else c=f=t;s={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:l.shared,effects:l.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function br(e,t,s,l){var c=e.updateQueue;hn=!1;var f=c.firstBaseUpdate,y=c.lastBaseUpdate,E=c.shared.pending;if(E!==null){c.shared.pending=null;var x=E,M=x.next;x.next=null,y===null?f=M:y.next=M,y=x;var O=e.alternate;O!==null&&(O=O.updateQueue,E=O.lastBaseUpdate,E!==y&&(E===null?O.firstBaseUpdate=M:E.next=M,O.lastBaseUpdate=x))}if(f!==null){var j=c.baseState;y=0,O=M=x=null,E=f;do{var _=E.lane,W=E.eventTime;if((l&_)===_){O!==null&&(O=O.next={eventTime:W,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var K=e,Y=E;switch(_=t,W=s,Y.tag){case 1:if(K=Y.payload,typeof K=="function"){j=K.call(W,j,_);break e}j=K;break e;case 3:K.flags=K.flags&-65537|128;case 0:if(K=Y.payload,_=typeof K=="function"?K.call(W,j,_):K,_==null)break e;j=H({},j,_);break e;case 2:hn=!0}}E.callback!==null&&E.lane!==0&&(e.flags|=64,_=c.effects,_===null?c.effects=[E]:_.push(E))}else W={eventTime:W,lane:_,tag:E.tag,payload:E.payload,callback:E.callback,next:null},O===null?(M=O=W,x=j):O=O.next=W,y|=_;if(E=E.next,E===null){if(E=c.shared.pending,E===null)break;_=E,E=_.next,_.next=null,c.lastBaseUpdate=_,c.shared.pending=null}}while(!0);if(O===null&&(x=j),c.baseState=x,c.firstBaseUpdate=M,c.lastBaseUpdate=O,t=c.shared.interleaved,t!==null){c=t;do y|=c.lane,c=c.next;while(c!==t)}else f===null&&(c.shared.lanes=0);$n|=y,e.lanes=y,e.memoizedState=j}}function Yc(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],c=l.callback;if(c!==null){if(l.callback=null,l=s,typeof c!="function")throw Error(i(191,c));c.call(l)}}}var fs={},jt=mn(fs),ps=mn(fs),hs=mn(fs);function On(e){if(e===fs)throw Error(i(174));return e}function Sa(e,t){switch(Se(hs,t),Se(ps,e),Se(jt,fs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:xo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=xo(t,e)}ke(jt),Se(jt,t)}function wi(){ke(jt),ke(ps),ke(hs)}function qc(e){On(hs.current);var t=On(jt.current),s=xo(t,e.type);t!==s&&(Se(ps,e),Se(jt,s))}function xa(e){ps.current===e&&(ke(jt),ke(ps))}var be=mn(0);function Pr(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ka=[];function Ca(){for(var e=0;e<ka.length;e++)ka[e]._workInProgressVersionPrimary=null;ka.length=0}var Br=z.ReactCurrentDispatcher,Ia=z.ReactCurrentBatchConfig,jn=0,Pe=null,Re=null,Ve=null,Lr=!1,gs=!1,ys=0,Tg=0;function qe(){throw Error(i(321))}function ba(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Bt(e[s],t[s]))return!1;return!0}function Pa(e,t,s,l,c,f){if(jn=f,Pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Br.current=e===null||e.memoizedState===null?Fg:Rg,e=s(l,c),gs){f=0;do{if(gs=!1,ys=0,25<=f)throw Error(i(301));f+=1,Ve=Re=null,t.updateQueue=null,Br.current=_g,e=s(l,c)}while(gs)}if(Br.current=Ar,t=Re!==null&&Re.next!==null,jn=0,Ve=Re=Pe=null,Lr=!1,t)throw Error(i(300));return e}function Ba(){var e=ys!==0;return ys=0,e}function $t(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?Pe.memoizedState=Ve=e:Ve=Ve.next=e,Ve}function St(){if(Re===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=Re.next;var t=Ve===null?Pe.memoizedState:Ve.next;if(t!==null)Ve=t,Re=e;else{if(e===null)throw Error(i(310));Re=e,e={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},Ve===null?Pe.memoizedState=Ve=e:Ve=Ve.next=e}return Ve}function vs(e,t){return typeof t=="function"?t(e):t}function La(e){var t=St(),s=t.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=e;var l=Re,c=l.baseQueue,f=s.pending;if(f!==null){if(c!==null){var y=c.next;c.next=f.next,f.next=y}l.baseQueue=c=f,s.pending=null}if(c!==null){f=c.next,l=l.baseState;var E=y=null,x=null,M=f;do{var O=M.lane;if((jn&O)===O)x!==null&&(x=x.next={lane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),l=M.hasEagerState?M.eagerState:e(l,M.action);else{var j={lane:O,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null};x===null?(E=x=j,y=l):x=x.next=j,Pe.lanes|=O,$n|=O}M=M.next}while(M!==null&&M!==f);x===null?y=l:x.next=E,Bt(l,t.memoizedState)||(at=!0),t.memoizedState=l,t.baseState=y,t.baseQueue=x,s.lastRenderedState=l}if(e=s.interleaved,e!==null){c=e;do f=c.lane,Pe.lanes|=f,$n|=f,c=c.next;while(c!==e)}else c===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Ma(e){var t=St(),s=t.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=e;var l=s.dispatch,c=s.pending,f=t.memoizedState;if(c!==null){s.pending=null;var y=c=c.next;do f=e(f,y.action),y=y.next;while(y!==c);Bt(f,t.memoizedState)||(at=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),s.lastRenderedState=f}return[f,l]}function Qc(){}function Xc(e,t){var s=Pe,l=St(),c=t(),f=!Bt(l.memoizedState,c);if(f&&(l.memoizedState=c,at=!0),l=l.queue,Ta(td.bind(null,s,l,e),[e]),l.getSnapshot!==t||f||Ve!==null&&Ve.memoizedState.tag&1){if(s.flags|=2048,ws(9,ed.bind(null,s,l,c,t),void 0,null),Ue===null)throw Error(i(349));(jn&30)!==0||Zc(s,t,c)}return c}function Zc(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function ed(e,t,s,l){t.value=s,t.getSnapshot=l,nd(t)&&id(e)}function td(e,t,s){return s(function(){nd(t)&&id(e)})}function nd(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Bt(e,s)}catch{return!0}}function id(e){var t=Yt(e,1);t!==null&&Dt(t,e,1,-1)}function sd(e){var t=$t();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:e},t.queue=e,e=e.dispatch=Ng.bind(null,Pe,e),[t.memoizedState,e]}function ws(e,t,s,l){return e={tag:e,create:t,destroy:s,deps:l,next:null},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,t.lastEffect=e)),e}function rd(){return St().memoizedState}function Mr(e,t,s,l){var c=$t();Pe.flags|=e,c.memoizedState=ws(1|t,s,void 0,l===void 0?null:l)}function Tr(e,t,s,l){var c=St();l=l===void 0?null:l;var f=void 0;if(Re!==null){var y=Re.memoizedState;if(f=y.destroy,l!==null&&ba(l,y.deps)){c.memoizedState=ws(t,s,f,l);return}}Pe.flags|=e,c.memoizedState=ws(1|t,s,f,l)}function od(e,t){return Mr(8390656,8,e,t)}function Ta(e,t){return Tr(2048,8,e,t)}function ad(e,t){return Tr(4,2,e,t)}function ld(e,t){return Tr(4,4,e,t)}function ud(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cd(e,t,s){return s=s!=null?s.concat([e]):null,Tr(4,4,ud.bind(null,t,e),s)}function Aa(){}function dd(e,t){var s=St();t=t===void 0?null:t;var l=s.memoizedState;return l!==null&&t!==null&&ba(t,l[1])?l[0]:(s.memoizedState=[e,t],e)}function md(e,t){var s=St();t=t===void 0?null:t;var l=s.memoizedState;return l!==null&&t!==null&&ba(t,l[1])?l[0]:(e=e(),s.memoizedState=[e,t],e)}function fd(e,t,s){return(jn&21)===0?(e.baseState&&(e.baseState=!1,at=!0),e.memoizedState=s):(Bt(s,t)||(s=zu(),Pe.lanes|=s,$n|=s,e.baseState=!0),t)}function Ag(e,t){var s=ye;ye=s!==0&&4>s?s:4,e(!0);var l=Ia.transition;Ia.transition={};try{e(!1),t()}finally{ye=s,Ia.transition=l}}function pd(){return St().memoizedState}function Dg(e,t,s){var l=En(e);if(s={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null},hd(e))gd(t,s);else if(s=Gc(e,t,s,l),s!==null){var c=nt();Dt(s,e,l,c),yd(s,t,l)}}function Ng(e,t,s){var l=En(e),c={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null};if(hd(e))gd(t,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var y=t.lastRenderedState,E=f(y,s);if(c.hasEagerState=!0,c.eagerState=E,Bt(E,y)){var x=t.interleaved;x===null?(c.next=c,wa(t)):(c.next=x.next,x.next=c),t.interleaved=c;return}}catch{}s=Gc(e,t,c,l),s!==null&&(c=nt(),Dt(s,e,l,c),yd(s,t,l))}}function hd(e){var t=e.alternate;return e===Pe||t!==null&&t===Pe}function gd(e,t){gs=Lr=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function yd(e,t,s){if((s&4194240)!==0){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,No(e,s)}}var Ar={readContext:Et,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useInsertionEffect:qe,useLayoutEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useMutableSource:qe,useSyncExternalStore:qe,useId:qe,unstable_isNewReconciler:!1},Fg={readContext:Et,useCallback:function(e,t){return $t().memoizedState=[e,t===void 0?null:t],e},useContext:Et,useEffect:od,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Mr(4194308,4,ud.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Mr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mr(4,2,e,t)},useMemo:function(e,t){var s=$t();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var l=$t();return t=s!==void 0?s(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=Dg.bind(null,Pe,e),[l.memoizedState,e]},useRef:function(e){var t=$t();return e={current:e},t.memoizedState=e},useState:sd,useDebugValue:Aa,useDeferredValue:function(e){return $t().memoizedState=e},useTransition:function(){var e=sd(!1),t=e[0];return e=Ag.bind(null,e[1]),$t().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var l=Pe,c=$t();if(Ie){if(s===void 0)throw Error(i(407));s=s()}else{if(s=t(),Ue===null)throw Error(i(349));(jn&30)!==0||Zc(l,t,s)}c.memoizedState=s;var f={value:s,getSnapshot:t};return c.queue=f,od(td.bind(null,l,f,e),[e]),l.flags|=2048,ws(9,ed.bind(null,l,f,s,t),void 0,null),s},useId:function(){var e=$t(),t=Ue.identifierPrefix;if(Ie){var s=Jt,l=Kt;s=(l&~(1<<32-Pt(l)-1)).toString(32)+s,t=":"+t+"R"+s,s=ys++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=Tg++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Rg={readContext:Et,useCallback:dd,useContext:Et,useEffect:Ta,useImperativeHandle:cd,useInsertionEffect:ad,useLayoutEffect:ld,useMemo:md,useReducer:La,useRef:rd,useState:function(){return La(vs)},useDebugValue:Aa,useDeferredValue:function(e){var t=St();return fd(t,Re.memoizedState,e)},useTransition:function(){var e=La(vs)[0],t=St().memoizedState;return[e,t]},useMutableSource:Qc,useSyncExternalStore:Xc,useId:pd,unstable_isNewReconciler:!1},_g={readContext:Et,useCallback:dd,useContext:Et,useEffect:Ta,useImperativeHandle:cd,useInsertionEffect:ad,useLayoutEffect:ld,useMemo:md,useReducer:Ma,useRef:rd,useState:function(){return Ma(vs)},useDebugValue:Aa,useDeferredValue:function(e){var t=St();return Re===null?t.memoizedState=e:fd(t,Re.memoizedState,e)},useTransition:function(){var e=Ma(vs)[0],t=St().memoizedState;return[e,t]},useMutableSource:Qc,useSyncExternalStore:Xc,useId:pd,unstable_isNewReconciler:!1};function Mt(e,t){if(e&&e.defaultProps){t=H({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Da(e,t,s,l){t=e.memoizedState,s=s(l,t),s=s==null?t:H({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Dr={isMounted:function(e){return(e=e._reactInternals)?An(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var l=nt(),c=En(e),f=qt(l,c);f.payload=t,s!=null&&(f.callback=s),t=gn(e,f,c),t!==null&&(Dt(t,e,c,l),Ir(t,e,c))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var l=nt(),c=En(e),f=qt(l,c);f.tag=1,f.payload=t,s!=null&&(f.callback=s),t=gn(e,f,c),t!==null&&(Dt(t,e,c,l),Ir(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=nt(),l=En(e),c=qt(s,l);c.tag=2,t!=null&&(c.callback=t),t=gn(e,c,l),t!==null&&(Dt(t,e,l,s),Ir(t,e,l))}};function vd(e,t,s,l,c,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,y):t.prototype&&t.prototype.isPureReactComponent?!rs(s,l)||!rs(c,f):!0}function wd(e,t,s){var l=!1,c=fn,f=t.contextType;return typeof f=="object"&&f!==null?f=Et(f):(c=ot(t)?Nn:Ye.current,l=t.contextTypes,f=(l=l!=null)?mi(e,c):fn),t=new t(s,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Dr,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=f),t}function Ed(e,t,s,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,l),t.state!==e&&Dr.enqueueReplaceState(t,t.state,null)}function Na(e,t,s,l){var c=e.stateNode;c.props=s,c.state=e.memoizedState,c.refs={},Ea(e);var f=t.contextType;typeof f=="object"&&f!==null?c.context=Et(f):(f=ot(t)?Nn:Ye.current,c.context=mi(e,f)),c.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(Da(e,t,f,s),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Dr.enqueueReplaceState(c,c.state,null),br(e,s,c,l),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Ei(e,t){try{var s="",l=t;do s+=ce(l),l=l.return;while(l);var c=s}catch(f){c=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:c,digest:null}}function Fa(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Ra(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var Og=typeof WeakMap=="function"?WeakMap:Map;function Sd(e,t,s){s=qt(-1,s),s.tag=3,s.payload={element:null};var l=t.value;return s.callback=function(){$r||($r=!0,Qa=l),Ra(e,t)},s}function xd(e,t,s){s=qt(-1,s),s.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var c=t.value;s.payload=function(){return l(c)},s.callback=function(){Ra(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(s.callback=function(){Ra(e,t),typeof l!="function"&&(vn===null?vn=new Set([this]):vn.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),s}function kd(e,t,s){var l=e.pingCache;if(l===null){l=e.pingCache=new Og;var c=new Set;l.set(t,c)}else c=l.get(t),c===void 0&&(c=new Set,l.set(t,c));c.has(s)||(c.add(s),e=Xg.bind(null,e,t,s),t.then(e,e))}function Cd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Id(e,t,s,l,c){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=qt(-1,1),t.tag=2,gn(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=c,e)}var jg=z.ReactCurrentOwner,at=!1;function tt(e,t,s,l){t.child=e===null?Wc(t,null,s,l):gi(t,e.child,s,l)}function bd(e,t,s,l,c){s=s.render;var f=t.ref;return vi(t,c),l=Pa(e,t,s,l,f,c),s=Ba(),e!==null&&!at?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Qt(e,t,c)):(Ie&&s&&ca(t),t.flags|=1,tt(e,t,l,c),t.child)}function Pd(e,t,s,l,c){if(e===null){var f=s.type;return typeof f=="function"&&!sl(f)&&f.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=f,Bd(e,t,f,l,c)):(e=Gr(s.type,null,l,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&c)===0){var y=f.memoizedProps;if(s=s.compare,s=s!==null?s:rs,s(y,l)&&e.ref===t.ref)return Qt(e,t,c)}return t.flags|=1,e=xn(f,l),e.ref=t.ref,e.return=t,t.child=e}function Bd(e,t,s,l,c){if(e!==null){var f=e.memoizedProps;if(rs(f,l)&&e.ref===t.ref)if(at=!1,t.pendingProps=l=f,(e.lanes&c)!==0)(e.flags&131072)!==0&&(at=!0);else return t.lanes=e.lanes,Qt(e,t,c)}return _a(e,t,s,l,c)}function Ld(e,t,s){var l=t.pendingProps,c=l.children,f=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(xi,pt),pt|=s;else{if((s&1073741824)===0)return e=f!==null?f.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Se(xi,pt),pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=f!==null?f.baseLanes:s,Se(xi,pt),pt|=l}else f!==null?(l=f.baseLanes|s,t.memoizedState=null):l=s,Se(xi,pt),pt|=l;return tt(e,t,c,s),t.child}function Md(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function _a(e,t,s,l,c){var f=ot(s)?Nn:Ye.current;return f=mi(t,f),vi(t,c),s=Pa(e,t,s,l,f,c),l=Ba(),e!==null&&!at?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Qt(e,t,c)):(Ie&&l&&ca(t),t.flags|=1,tt(e,t,s,c),t.child)}function Td(e,t,s,l,c){if(ot(s)){var f=!0;yr(t)}else f=!1;if(vi(t,c),t.stateNode===null)Fr(e,t),wd(t,s,l),Na(t,s,l,c),l=!0;else if(e===null){var y=t.stateNode,E=t.memoizedProps;y.props=E;var x=y.context,M=s.contextType;typeof M=="object"&&M!==null?M=Et(M):(M=ot(s)?Nn:Ye.current,M=mi(t,M));var O=s.getDerivedStateFromProps,j=typeof O=="function"||typeof y.getSnapshotBeforeUpdate=="function";j||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==l||x!==M)&&Ed(t,y,l,M),hn=!1;var _=t.memoizedState;y.state=_,br(t,l,y,c),x=t.memoizedState,E!==l||_!==x||rt.current||hn?(typeof O=="function"&&(Da(t,s,O,l),x=t.memoizedState),(E=hn||vd(t,s,E,l,_,x,M))?(j||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=x),y.props=l,y.state=x,y.context=M,l=E):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{y=t.stateNode,Kc(e,t),E=t.memoizedProps,M=t.type===t.elementType?E:Mt(t.type,E),y.props=M,j=t.pendingProps,_=y.context,x=s.contextType,typeof x=="object"&&x!==null?x=Et(x):(x=ot(s)?Nn:Ye.current,x=mi(t,x));var W=s.getDerivedStateFromProps;(O=typeof W=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==j||_!==x)&&Ed(t,y,l,x),hn=!1,_=t.memoizedState,y.state=_,br(t,l,y,c);var K=t.memoizedState;E!==j||_!==K||rt.current||hn?(typeof W=="function"&&(Da(t,s,W,l),K=t.memoizedState),(M=hn||vd(t,s,M,l,_,K,x)||!1)?(O||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(l,K,x),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(l,K,x)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===e.memoizedProps&&_===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&_===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=K),y.props=l,y.state=K,y.context=x,l=M):(typeof y.componentDidUpdate!="function"||E===e.memoizedProps&&_===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&_===e.memoizedState||(t.flags|=1024),l=!1)}return Oa(e,t,s,l,f,c)}function Oa(e,t,s,l,c,f){Md(e,t);var y=(t.flags&128)!==0;if(!l&&!y)return c&&Rc(t,s,!1),Qt(e,t,f);l=t.stateNode,jg.current=t;var E=y&&typeof s.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&y?(t.child=gi(t,e.child,null,f),t.child=gi(t,null,E,f)):tt(e,t,E,f),t.memoizedState=l.state,c&&Rc(t,s,!0),t.child}function Ad(e){var t=e.stateNode;t.pendingContext?Nc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Nc(e,t.context,!1),Sa(e,t.containerInfo)}function Dd(e,t,s,l,c){return hi(),pa(c),t.flags|=256,tt(e,t,s,l),t.child}var ja={dehydrated:null,treeContext:null,retryLane:0};function $a(e){return{baseLanes:e,cachePool:null,transitions:null}}function Nd(e,t,s){var l=t.pendingProps,c=be.current,f=!1,y=(t.flags&128)!==0,E;if((E=y)||(E=e!==null&&e.memoizedState===null?!1:(c&2)!==0),E?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Se(be,c&1),e===null)return fa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(y=l.children,e=l.fallback,f?(l=t.mode,f=t.child,y={mode:"hidden",children:y},(l&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=y):f=Kr(y,l,0,null),e=Hn(e,l,s,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=$a(s),t.memoizedState=ja,e):Va(t,y));if(c=e.memoizedState,c!==null&&(E=c.dehydrated,E!==null))return $g(e,t,y,l,E,c,s);if(f){f=l.fallback,y=t.mode,c=e.child,E=c.sibling;var x={mode:"hidden",children:l.children};return(y&1)===0&&t.child!==c?(l=t.child,l.childLanes=0,l.pendingProps=x,t.deletions=null):(l=xn(c,x),l.subtreeFlags=c.subtreeFlags&14680064),E!==null?f=xn(E,f):(f=Hn(f,y,s,null),f.flags|=2),f.return=t,l.return=t,l.sibling=f,t.child=l,l=f,f=t.child,y=e.child.memoizedState,y=y===null?$a(s):{baseLanes:y.baseLanes|s,cachePool:null,transitions:y.transitions},f.memoizedState=y,f.childLanes=e.childLanes&~s,t.memoizedState=ja,l}return f=e.child,e=f.sibling,l=xn(f,{mode:"visible",children:l.children}),(t.mode&1)===0&&(l.lanes=s),l.return=t,l.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=l,t.memoizedState=null,l}function Va(e,t){return t=Kr({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Nr(e,t,s,l){return l!==null&&pa(l),gi(t,e.child,null,s),e=Va(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $g(e,t,s,l,c,f,y){if(s)return t.flags&256?(t.flags&=-257,l=Fa(Error(i(422))),Nr(e,t,y,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=l.fallback,c=t.mode,l=Kr({mode:"visible",children:l.children},c,0,null),f=Hn(f,c,y,null),f.flags|=2,l.return=t,f.return=t,l.sibling=f,t.child=l,(t.mode&1)!==0&&gi(t,e.child,null,y),t.child.memoizedState=$a(y),t.memoizedState=ja,f);if((t.mode&1)===0)return Nr(e,t,y,null);if(c.data==="$!"){if(l=c.nextSibling&&c.nextSibling.dataset,l)var E=l.dgst;return l=E,f=Error(i(419)),l=Fa(f,l,void 0),Nr(e,t,y,l)}if(E=(y&e.childLanes)!==0,at||E){if(l=Ue,l!==null){switch(y&-y){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=(c&(l.suspendedLanes|y))!==0?0:c,c!==0&&c!==f.retryLane&&(f.retryLane=c,Yt(e,c),Dt(l,e,c,-1))}return il(),l=Fa(Error(i(421))),Nr(e,t,y,l)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=Zg.bind(null,e),c._reactRetry=t,null):(e=f.treeContext,ft=dn(c.nextSibling),mt=t,Ie=!0,Lt=null,e!==null&&(vt[wt++]=Kt,vt[wt++]=Jt,vt[wt++]=Fn,Kt=e.id,Jt=e.overflow,Fn=t),t=Va(t,l.children),t.flags|=4096,t)}function Fd(e,t,s){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),va(e.return,t,s)}function Ua(e,t,s,l,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:c}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=s,f.tailMode=c)}function Rd(e,t,s){var l=t.pendingProps,c=l.revealOrder,f=l.tail;if(tt(e,t,l.children,s),l=be.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fd(e,s,t);else if(e.tag===19)Fd(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Se(be,l),(t.mode&1)===0)t.memoizedState=null;else switch(c){case"forwards":for(s=t.child,c=null;s!==null;)e=s.alternate,e!==null&&Pr(e)===null&&(c=s),s=s.sibling;s=c,s===null?(c=t.child,t.child=null):(c=s.sibling,s.sibling=null),Ua(t,!1,c,s,f);break;case"backwards":for(s=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Pr(e)===null){t.child=c;break}e=c.sibling,c.sibling=s,s=c,c=e}Ua(t,!0,s,null,f);break;case"together":Ua(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Fr(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qt(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),$n|=t.lanes,(s&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,s=xn(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=xn(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Vg(e,t,s){switch(t.tag){case 3:Ad(t),hi();break;case 5:qc(t);break;case 1:ot(t.type)&&yr(t);break;case 4:Sa(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,c=t.memoizedProps.value;Se(kr,l._currentValue),l._currentValue=c;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(Se(be,be.current&1),t.flags|=128,null):(s&t.child.childLanes)!==0?Nd(e,t,s):(Se(be,be.current&1),e=Qt(e,t,s),e!==null?e.sibling:null);Se(be,be.current&1);break;case 19:if(l=(s&t.childLanes)!==0,(e.flags&128)!==0){if(l)return Rd(e,t,s);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Se(be,be.current),l)break;return null;case 22:case 23:return t.lanes=0,Ld(e,t,s)}return Qt(e,t,s)}var _d,za,Od,jd;_d=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},za=function(){},Od=function(e,t,s,l){var c=e.memoizedProps;if(c!==l){e=t.stateNode,On(jt.current);var f=null;switch(s){case"input":c=Qn(e,c),l=Qn(e,l),f=[];break;case"select":c=H({},c,{value:void 0}),l=H({},l,{value:void 0}),f=[];break;case"textarea":c=ei(e,c),l=ei(e,l),f=[];break;default:typeof c.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=pr)}ko(s,l);var y;s=null;for(M in c)if(!l.hasOwnProperty(M)&&c.hasOwnProperty(M)&&c[M]!=null)if(M==="style"){var E=c[M];for(y in E)E.hasOwnProperty(y)&&(s||(s={}),s[y]="")}else M!=="dangerouslySetInnerHTML"&&M!=="children"&&M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(a.hasOwnProperty(M)?f||(f=[]):(f=f||[]).push(M,null));for(M in l){var x=l[M];if(E=c?.[M],l.hasOwnProperty(M)&&x!==E&&(x!=null||E!=null))if(M==="style")if(E){for(y in E)!E.hasOwnProperty(y)||x&&x.hasOwnProperty(y)||(s||(s={}),s[y]="");for(y in x)x.hasOwnProperty(y)&&E[y]!==x[y]&&(s||(s={}),s[y]=x[y])}else s||(f||(f=[]),f.push(M,s)),s=x;else M==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,E=E?E.__html:void 0,x!=null&&E!==x&&(f=f||[]).push(M,x)):M==="children"?typeof x!="string"&&typeof x!="number"||(f=f||[]).push(M,""+x):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&(a.hasOwnProperty(M)?(x!=null&&M==="onScroll"&&xe("scroll",e),f||E===x||(f=[])):(f=f||[]).push(M,x))}s&&(f=f||[]).push("style",s);var M=f;(t.updateQueue=M)&&(t.flags|=4)}},jd=function(e,t,s,l){s!==l&&(t.flags|=4)};function Es(e,t){if(!Ie)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(t)for(var c=e.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags&14680064,l|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=l,e.childLanes=s,t}function Ug(e,t,s){var l=t.pendingProps;switch(da(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(t),null;case 1:return ot(t.type)&&gr(),Qe(t),null;case 3:return l=t.stateNode,wi(),ke(rt),ke(Ye),Ca(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Sr(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Lt!==null&&(el(Lt),Lt=null))),za(e,t),Qe(t),null;case 5:xa(t);var c=On(hs.current);if(s=t.type,e!==null&&t.stateNode!=null)Od(e,t,s,l,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(i(166));return Qe(t),null}if(e=On(jt.current),Sr(t)){l=t.stateNode,s=t.type;var f=t.memoizedProps;switch(l[Ot]=t,l[cs]=f,e=(t.mode&1)!==0,s){case"dialog":xe("cancel",l),xe("close",l);break;case"iframe":case"object":case"embed":xe("load",l);break;case"video":case"audio":for(c=0;c<as.length;c++)xe(as[c],l);break;case"source":xe("error",l);break;case"img":case"image":case"link":xe("error",l),xe("load",l);break;case"details":xe("toggle",l);break;case"input":_i(l,f),xe("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!f.multiple},xe("invalid",l);break;case"textarea":$i(l,f),xe("invalid",l)}ko(s,f),c=null;for(var y in f)if(f.hasOwnProperty(y)){var E=f[y];y==="children"?typeof E=="string"?l.textContent!==E&&(f.suppressHydrationWarning!==!0&&fr(l.textContent,E,e),c=["children",E]):typeof E=="number"&&l.textContent!==""+E&&(f.suppressHydrationWarning!==!0&&fr(l.textContent,E,e),c=["children",""+E]):a.hasOwnProperty(y)&&E!=null&&y==="onScroll"&&xe("scroll",l)}switch(s){case"input":Mn(l),ji(l,f,!0);break;case"textarea":Mn(l),le(l);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(l.onclick=pr)}l=c,t.updateQueue=l,l!==null&&(t.flags|=4)}else{y=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ws(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=y.createElement(s,{is:l.is}):(e=y.createElement(s),s==="select"&&(y=e,l.multiple?y.multiple=!0:l.size&&(y.size=l.size))):e=y.createElementNS(e,s),e[Ot]=t,e[cs]=l,_d(e,t,!1,!1),t.stateNode=e;e:{switch(y=Co(s,l),s){case"dialog":xe("cancel",e),xe("close",e),c=l;break;case"iframe":case"object":case"embed":xe("load",e),c=l;break;case"video":case"audio":for(c=0;c<as.length;c++)xe(as[c],e);c=l;break;case"source":xe("error",e),c=l;break;case"img":case"image":case"link":xe("error",e),xe("load",e),c=l;break;case"details":xe("toggle",e),c=l;break;case"input":_i(e,l),c=Qn(e,l),xe("invalid",e);break;case"option":c=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},c=H({},l,{value:void 0}),xe("invalid",e);break;case"textarea":$i(e,l),c=ei(e,l),xe("invalid",e);break;default:c=l}ko(s,c),E=c;for(f in E)if(E.hasOwnProperty(f)){var x=E[f];f==="style"?Bu(e,x):f==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&bu(e,x)):f==="children"?typeof x=="string"?(s!=="textarea"||x!=="")&&Ui(e,x):typeof x=="number"&&Ui(e,""+x):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(a.hasOwnProperty(f)?x!=null&&f==="onScroll"&&xe("scroll",e):x!=null&&A(e,f,x,y))}switch(s){case"input":Mn(e),ji(e,l,!1);break;case"textarea":Mn(e),le(e);break;case"option":l.value!=null&&e.setAttribute("value",""+pe(l.value));break;case"select":e.multiple=!!l.multiple,f=l.value,f!=null?Ht(e,!!l.multiple,f,!1):l.defaultValue!=null&&Ht(e,!!l.multiple,l.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=pr)}switch(s){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Qe(t),null;case 6:if(e&&t.stateNode!=null)jd(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(i(166));if(s=On(hs.current),On(jt.current),Sr(t)){if(l=t.stateNode,s=t.memoizedProps,l[Ot]=t,(f=l.nodeValue!==s)&&(e=mt,e!==null))switch(e.tag){case 3:fr(l.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&fr(l.nodeValue,s,(e.mode&1)!==0)}f&&(t.flags|=4)}else l=(s.nodeType===9?s:s.ownerDocument).createTextNode(l),l[Ot]=t,t.stateNode=l}return Qe(t),null;case 13:if(ke(be),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ie&&ft!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Uc(),hi(),t.flags|=98560,f=!1;else if(f=Sr(t),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(i(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Ot]=t}else hi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Qe(t),f=!1}else Lt!==null&&(el(Lt),Lt=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=s,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(be.current&1)!==0?_e===0&&(_e=3):il())),t.updateQueue!==null&&(t.flags|=4),Qe(t),null);case 4:return wi(),za(e,t),e===null&&ls(t.stateNode.containerInfo),Qe(t),null;case 10:return ya(t.type._context),Qe(t),null;case 17:return ot(t.type)&&gr(),Qe(t),null;case 19:if(ke(be),f=t.memoizedState,f===null)return Qe(t),null;if(l=(t.flags&128)!==0,y=f.rendering,y===null)if(l)Es(f,!1);else{if(_e!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(y=Pr(e),y!==null){for(t.flags|=128,Es(f,!1),l=y.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=s,s=t.child;s!==null;)f=s,e=l,f.flags&=14680066,y=f.alternate,y===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=y.childLanes,f.lanes=y.lanes,f.child=y.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=y.memoizedProps,f.memoizedState=y.memoizedState,f.updateQueue=y.updateQueue,f.type=y.type,e=y.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Se(be,be.current&1|2),t.child}e=e.sibling}f.tail!==null&&Ae()>ki&&(t.flags|=128,l=!0,Es(f,!1),t.lanes=4194304)}else{if(!l)if(e=Pr(y),e!==null){if(t.flags|=128,l=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Es(f,!0),f.tail===null&&f.tailMode==="hidden"&&!y.alternate&&!Ie)return Qe(t),null}else 2*Ae()-f.renderingStartTime>ki&&s!==1073741824&&(t.flags|=128,l=!0,Es(f,!1),t.lanes=4194304);f.isBackwards?(y.sibling=t.child,t.child=y):(s=f.last,s!==null?s.sibling=y:t.child=y,f.last=y)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Ae(),t.sibling=null,s=be.current,Se(be,l?s&1|2:s&1),t):(Qe(t),null);case 22:case 23:return nl(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&(t.mode&1)!==0?(pt&1073741824)!==0&&(Qe(t),t.subtreeFlags&6&&(t.flags|=8192)):Qe(t),null;case 24:return null;case 25:return null}throw Error(i(156,t.tag))}function zg(e,t){switch(da(t),t.tag){case 1:return ot(t.type)&&gr(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return wi(),ke(rt),ke(Ye),Ca(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return xa(t),null;case 13:if(ke(be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));hi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ke(be),null;case 4:return wi(),null;case 10:return ya(t.type._context),null;case 22:case 23:return nl(),null;case 24:return null;default:return null}}var Rr=!1,Xe=!1,Hg=typeof WeakSet=="function"?WeakSet:Set,G=null;function Si(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(l){Le(e,t,l)}else s.current=null}function Ha(e,t,s){try{s()}catch(l){Le(e,t,l)}}var $d=!1;function Wg(e,t){if(na=nr,e=vc(),Jo(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var c=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{s.nodeType,f.nodeType}catch{s=null;break e}var y=0,E=-1,x=-1,M=0,O=0,j=e,_=null;t:for(;;){for(var W;j!==s||c!==0&&j.nodeType!==3||(E=y+c),j!==f||l!==0&&j.nodeType!==3||(x=y+l),j.nodeType===3&&(y+=j.nodeValue.length),(W=j.firstChild)!==null;)_=j,j=W;for(;;){if(j===e)break t;if(_===s&&++M===c&&(E=y),_===f&&++O===l&&(x=y),(W=j.nextSibling)!==null)break;j=_,_=j.parentNode}j=W}s=E===-1||x===-1?null:{start:E,end:x}}else s=null}s=s||{start:0,end:0}}else s=null;for(ia={focusedElem:e,selectionRange:s},nr=!1,G=t;G!==null;)if(t=G,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,G=e;else for(;G!==null;){t=G;try{var K=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(K!==null){var Y=K.memoizedProps,De=K.memoizedState,I=t.stateNode,k=I.getSnapshotBeforeUpdate(t.elementType===t.type?Y:Mt(t.type,Y),De);I.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var P=t.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch($){Le(t,t.return,$)}if(e=t.sibling,e!==null){e.return=t.return,G=e;break}G=t.return}return K=$d,$d=!1,K}function Ss(e,t,s){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var c=l=l.next;do{if((c.tag&e)===e){var f=c.destroy;c.destroy=void 0,f!==void 0&&Ha(t,s,f)}c=c.next}while(c!==l)}}function _r(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var l=s.create;s.destroy=l()}s=s.next}while(s!==t)}}function Wa(e){var t=e.ref;if(t!==null){var s=e.stateNode;e.tag,e=s,typeof t=="function"?t(e):t.current=e}}function Vd(e){var t=e.alternate;t!==null&&(e.alternate=null,Vd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ot],delete t[cs],delete t[aa],delete t[Pg],delete t[Bg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ud(e){return e.tag===5||e.tag===3||e.tag===4}function zd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ud(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ga(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=pr));else if(l!==4&&(e=e.child,e!==null))for(Ga(e,t,s),e=e.sibling;e!==null;)Ga(e,t,s),e=e.sibling}function Ka(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(Ka(e,t,s),e=e.sibling;e!==null;)Ka(e,t,s),e=e.sibling}var We=null,Tt=!1;function yn(e,t,s){for(s=s.child;s!==null;)Hd(e,t,s),s=s.sibling}function Hd(e,t,s){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(qs,s)}catch{}switch(s.tag){case 5:Xe||Si(s,t);case 6:var l=We,c=Tt;We=null,yn(e,t,s),We=l,Tt=c,We!==null&&(Tt?(e=We,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):We.removeChild(s.stateNode));break;case 18:We!==null&&(Tt?(e=We,s=s.stateNode,e.nodeType===8?oa(e.parentNode,s):e.nodeType===1&&oa(e,s),Zi(e)):oa(We,s.stateNode));break;case 4:l=We,c=Tt,We=s.stateNode.containerInfo,Tt=!0,yn(e,t,s),We=l,Tt=c;break;case 0:case 11:case 14:case 15:if(!Xe&&(l=s.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){c=l=l.next;do{var f=c,y=f.destroy;f=f.tag,y!==void 0&&((f&2)!==0||(f&4)!==0)&&Ha(s,t,y),c=c.next}while(c!==l)}yn(e,t,s);break;case 1:if(!Xe&&(Si(s,t),l=s.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=s.memoizedProps,l.state=s.memoizedState,l.componentWillUnmount()}catch(E){Le(s,t,E)}yn(e,t,s);break;case 21:yn(e,t,s);break;case 22:s.mode&1?(Xe=(l=Xe)||s.memoizedState!==null,yn(e,t,s),Xe=l):yn(e,t,s);break;default:yn(e,t,s)}}function Wd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Hg),t.forEach(function(l){var c=ey.bind(null,e,l);s.has(l)||(s.add(l),l.then(c,c))})}}function At(e,t){var s=t.deletions;if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];try{var f=e,y=t,E=y;e:for(;E!==null;){switch(E.tag){case 5:We=E.stateNode,Tt=!1;break e;case 3:We=E.stateNode.containerInfo,Tt=!0;break e;case 4:We=E.stateNode.containerInfo,Tt=!0;break e}E=E.return}if(We===null)throw Error(i(160));Hd(f,y,c),We=null,Tt=!1;var x=c.alternate;x!==null&&(x.return=null),c.return=null}catch(M){Le(c,t,M)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Gd(t,e),t=t.sibling}function Gd(e,t){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(At(t,e),Vt(e),l&4){try{Ss(3,e,e.return),_r(3,e)}catch(Y){Le(e,e.return,Y)}try{Ss(5,e,e.return)}catch(Y){Le(e,e.return,Y)}}break;case 1:At(t,e),Vt(e),l&512&&s!==null&&Si(s,s.return);break;case 5:if(At(t,e),Vt(e),l&512&&s!==null&&Si(s,s.return),e.flags&32){var c=e.stateNode;try{Ui(c,"")}catch(Y){Le(e,e.return,Y)}}if(l&4&&(c=e.stateNode,c!=null)){var f=e.memoizedProps,y=s!==null?s.memoizedProps:f,E=e.type,x=e.updateQueue;if(e.updateQueue=null,x!==null)try{E==="input"&&f.type==="radio"&&f.name!=null&&Oi(c,f),Co(E,y);var M=Co(E,f);for(y=0;y<x.length;y+=2){var O=x[y],j=x[y+1];O==="style"?Bu(c,j):O==="dangerouslySetInnerHTML"?bu(c,j):O==="children"?Ui(c,j):A(c,O,j,M)}switch(E){case"input":Xn(c,f);break;case"textarea":Vi(c,f);break;case"select":var _=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!f.multiple;var W=f.value;W!=null?Ht(c,!!f.multiple,W,!1):_!==!!f.multiple&&(f.defaultValue!=null?Ht(c,!!f.multiple,f.defaultValue,!0):Ht(c,!!f.multiple,f.multiple?[]:"",!1))}c[cs]=f}catch(Y){Le(e,e.return,Y)}}break;case 6:if(At(t,e),Vt(e),l&4){if(e.stateNode===null)throw Error(i(162));c=e.stateNode,f=e.memoizedProps;try{c.nodeValue=f}catch(Y){Le(e,e.return,Y)}}break;case 3:if(At(t,e),Vt(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{Zi(t.containerInfo)}catch(Y){Le(e,e.return,Y)}break;case 4:At(t,e),Vt(e);break;case 13:At(t,e),Vt(e),c=e.child,c.flags&8192&&(f=c.memoizedState!==null,c.stateNode.isHidden=f,!f||c.alternate!==null&&c.alternate.memoizedState!==null||(qa=Ae())),l&4&&Wd(e);break;case 22:if(O=s!==null&&s.memoizedState!==null,e.mode&1?(Xe=(M=Xe)||O,At(t,e),Xe=M):At(t,e),Vt(e),l&8192){if(M=e.memoizedState!==null,(e.stateNode.isHidden=M)&&!O&&(e.mode&1)!==0)for(G=e,O=e.child;O!==null;){for(j=G=O;G!==null;){switch(_=G,W=_.child,_.tag){case 0:case 11:case 14:case 15:Ss(4,_,_.return);break;case 1:Si(_,_.return);var K=_.stateNode;if(typeof K.componentWillUnmount=="function"){l=_,s=_.return;try{t=l,K.props=t.memoizedProps,K.state=t.memoizedState,K.componentWillUnmount()}catch(Y){Le(l,s,Y)}}break;case 5:Si(_,_.return);break;case 22:if(_.memoizedState!==null){Yd(j);continue}}W!==null?(W.return=_,G=W):Yd(j)}O=O.sibling}e:for(O=null,j=e;;){if(j.tag===5){if(O===null){O=j;try{c=j.stateNode,M?(f=c.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(E=j.stateNode,x=j.memoizedProps.style,y=x!=null&&x.hasOwnProperty("display")?x.display:null,E.style.display=Pu("display",y))}catch(Y){Le(e,e.return,Y)}}}else if(j.tag===6){if(O===null)try{j.stateNode.nodeValue=M?"":j.memoizedProps}catch(Y){Le(e,e.return,Y)}}else if((j.tag!==22&&j.tag!==23||j.memoizedState===null||j===e)&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===e)break e;for(;j.sibling===null;){if(j.return===null||j.return===e)break e;O===j&&(O=null),j=j.return}O===j&&(O=null),j.sibling.return=j.return,j=j.sibling}}break;case 19:At(t,e),Vt(e),l&4&&Wd(e);break;case 21:break;default:At(t,e),Vt(e)}}function Vt(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(Ud(s)){var l=s;break e}s=s.return}throw Error(i(160))}switch(l.tag){case 5:var c=l.stateNode;l.flags&32&&(Ui(c,""),l.flags&=-33);var f=zd(e);Ka(e,f,c);break;case 3:case 4:var y=l.stateNode.containerInfo,E=zd(e);Ga(e,E,y);break;default:throw Error(i(161))}}catch(x){Le(e,e.return,x)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Gg(e,t,s){G=e,Kd(e)}function Kd(e,t,s){for(var l=(e.mode&1)!==0;G!==null;){var c=G,f=c.child;if(c.tag===22&&l){var y=c.memoizedState!==null||Rr;if(!y){var E=c.alternate,x=E!==null&&E.memoizedState!==null||Xe;E=Rr;var M=Xe;if(Rr=y,(Xe=x)&&!M)for(G=c;G!==null;)y=G,x=y.child,y.tag===22&&y.memoizedState!==null?qd(c):x!==null?(x.return=y,G=x):qd(c);for(;f!==null;)G=f,Kd(f),f=f.sibling;G=c,Rr=E,Xe=M}Jd(e)}else(c.subtreeFlags&8772)!==0&&f!==null?(f.return=c,G=f):Jd(e)}}function Jd(e){for(;G!==null;){var t=G;if((t.flags&8772)!==0){var s=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Xe||_r(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!Xe)if(s===null)l.componentDidMount();else{var c=t.elementType===t.type?s.memoizedProps:Mt(t.type,s.memoizedProps);l.componentDidUpdate(c,s.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Yc(t,f,l);break;case 3:var y=t.updateQueue;if(y!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}Yc(t,y,s)}break;case 5:var E=t.stateNode;if(s===null&&t.flags&4){s=E;var x=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&s.focus();break;case"img":x.src&&(s.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var M=t.alternate;if(M!==null){var O=M.memoizedState;if(O!==null){var j=O.dehydrated;j!==null&&Zi(j)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Xe||t.flags&512&&Wa(t)}catch(_){Le(t,t.return,_)}}if(t===e){G=null;break}if(s=t.sibling,s!==null){s.return=t.return,G=s;break}G=t.return}}function Yd(e){for(;G!==null;){var t=G;if(t===e){G=null;break}var s=t.sibling;if(s!==null){s.return=t.return,G=s;break}G=t.return}}function qd(e){for(;G!==null;){var t=G;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{_r(4,t)}catch(x){Le(t,s,x)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var c=t.return;try{l.componentDidMount()}catch(x){Le(t,c,x)}}var f=t.return;try{Wa(t)}catch(x){Le(t,f,x)}break;case 5:var y=t.return;try{Wa(t)}catch(x){Le(t,y,x)}}}catch(x){Le(t,t.return,x)}if(t===e){G=null;break}var E=t.sibling;if(E!==null){E.return=t.return,G=E;break}G=t.return}}var Kg=Math.ceil,Or=z.ReactCurrentDispatcher,Ja=z.ReactCurrentOwner,xt=z.ReactCurrentBatchConfig,fe=0,Ue=null,Fe=null,Ge=0,pt=0,xi=mn(0),_e=0,xs=null,$n=0,jr=0,Ya=0,ks=null,lt=null,qa=0,ki=1/0,Xt=null,$r=!1,Qa=null,vn=null,Vr=!1,wn=null,Ur=0,Cs=0,Xa=null,zr=-1,Hr=0;function nt(){return(fe&6)!==0?Ae():zr!==-1?zr:zr=Ae()}function En(e){return(e.mode&1)===0?1:(fe&2)!==0&&Ge!==0?Ge&-Ge:Mg.transition!==null?(Hr===0&&(Hr=zu()),Hr):(e=ye,e!==0||(e=window.event,e=e===void 0?16:Xu(e.type)),e)}function Dt(e,t,s,l){if(50<Cs)throw Cs=0,Xa=null,Error(i(185));Ji(e,s,l),((fe&2)===0||e!==Ue)&&(e===Ue&&((fe&2)===0&&(jr|=s),_e===4&&Sn(e,Ge)),ut(e,l),s===1&&fe===0&&(t.mode&1)===0&&(ki=Ae()+500,vr&&pn()))}function ut(e,t){var s=e.callbackNode;Mh(e,t);var l=Zs(e,e===Ue?Ge:0);if(l===0)s!==null&&$u(s),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(s!=null&&$u(s),t===1)e.tag===0?Lg(Xd.bind(null,e)):_c(Xd.bind(null,e)),Ig(function(){(fe&6)===0&&pn()}),s=null;else{switch(Hu(l)){case 1:s=To;break;case 4:s=Vu;break;case 16:s=Ys;break;case 536870912:s=Uu;break;default:s=Ys}s=om(s,Qd.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Qd(e,t){if(zr=-1,Hr=0,(fe&6)!==0)throw Error(i(327));var s=e.callbackNode;if(Ci()&&e.callbackNode!==s)return null;var l=Zs(e,e===Ue?Ge:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||t)t=Wr(e,l);else{t=l;var c=fe;fe|=2;var f=em();(Ue!==e||Ge!==t)&&(Xt=null,ki=Ae()+500,Un(e,t));do try{qg();break}catch(E){Zd(e,E)}while(!0);ga(),Or.current=f,fe=c,Fe!==null?t=0:(Ue=null,Ge=0,t=_e)}if(t!==0){if(t===2&&(c=Ao(e),c!==0&&(l=c,t=Za(e,c))),t===1)throw s=xs,Un(e,0),Sn(e,l),ut(e,Ae()),s;if(t===6)Sn(e,l);else{if(c=e.current.alternate,(l&30)===0&&!Jg(c)&&(t=Wr(e,l),t===2&&(f=Ao(e),f!==0&&(l=f,t=Za(e,f))),t===1))throw s=xs,Un(e,0),Sn(e,l),ut(e,Ae()),s;switch(e.finishedWork=c,e.finishedLanes=l,t){case 0:case 1:throw Error(i(345));case 2:zn(e,lt,Xt);break;case 3:if(Sn(e,l),(l&130023424)===l&&(t=qa+500-Ae(),10<t)){if(Zs(e,0)!==0)break;if(c=e.suspendedLanes,(c&l)!==l){nt(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=ra(zn.bind(null,e,lt,Xt),t);break}zn(e,lt,Xt);break;case 4:if(Sn(e,l),(l&4194240)===l)break;for(t=e.eventTimes,c=-1;0<l;){var y=31-Pt(l);f=1<<y,y=t[y],y>c&&(c=y),l&=~f}if(l=c,l=Ae()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*Kg(l/1960))-l,10<l){e.timeoutHandle=ra(zn.bind(null,e,lt,Xt),l);break}zn(e,lt,Xt);break;case 5:zn(e,lt,Xt);break;default:throw Error(i(329))}}}return ut(e,Ae()),e.callbackNode===s?Qd.bind(null,e):null}function Za(e,t){var s=ks;return e.current.memoizedState.isDehydrated&&(Un(e,t).flags|=256),e=Wr(e,t),e!==2&&(t=lt,lt=s,t!==null&&el(t)),e}function el(e){lt===null?lt=e:lt.push.apply(lt,e)}function Jg(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var l=0;l<s.length;l++){var c=s[l],f=c.getSnapshot;c=c.value;try{if(!Bt(f(),c))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Sn(e,t){for(t&=~Ya,t&=~jr,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Pt(t),l=1<<s;e[s]=-1,t&=~l}}function Xd(e){if((fe&6)!==0)throw Error(i(327));Ci();var t=Zs(e,0);if((t&1)===0)return ut(e,Ae()),null;var s=Wr(e,t);if(e.tag!==0&&s===2){var l=Ao(e);l!==0&&(t=l,s=Za(e,l))}if(s===1)throw s=xs,Un(e,0),Sn(e,t),ut(e,Ae()),s;if(s===6)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,zn(e,lt,Xt),ut(e,Ae()),null}function tl(e,t){var s=fe;fe|=1;try{return e(t)}finally{fe=s,fe===0&&(ki=Ae()+500,vr&&pn())}}function Vn(e){wn!==null&&wn.tag===0&&(fe&6)===0&&Ci();var t=fe;fe|=1;var s=xt.transition,l=ye;try{if(xt.transition=null,ye=1,e)return e()}finally{ye=l,xt.transition=s,fe=t,(fe&6)===0&&pn()}}function nl(){pt=xi.current,ke(xi)}function Un(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Cg(s)),Fe!==null)for(s=Fe.return;s!==null;){var l=s;switch(da(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&gr();break;case 3:wi(),ke(rt),ke(Ye),Ca();break;case 5:xa(l);break;case 4:wi();break;case 13:ke(be);break;case 19:ke(be);break;case 10:ya(l.type._context);break;case 22:case 23:nl()}s=s.return}if(Ue=e,Fe=e=xn(e.current,null),Ge=pt=t,_e=0,xs=null,Ya=jr=$n=0,lt=ks=null,_n!==null){for(t=0;t<_n.length;t++)if(s=_n[t],l=s.interleaved,l!==null){s.interleaved=null;var c=l.next,f=s.pending;if(f!==null){var y=f.next;f.next=c,l.next=y}s.pending=l}_n=null}return e}function Zd(e,t){do{var s=Fe;try{if(ga(),Br.current=Ar,Lr){for(var l=Pe.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}Lr=!1}if(jn=0,Ve=Re=Pe=null,gs=!1,ys=0,Ja.current=null,s===null||s.return===null){_e=1,xs=t,Fe=null;break}e:{var f=e,y=s.return,E=s,x=t;if(t=Ge,E.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var M=x,O=E,j=O.tag;if((O.mode&1)===0&&(j===0||j===11||j===15)){var _=O.alternate;_?(O.updateQueue=_.updateQueue,O.memoizedState=_.memoizedState,O.lanes=_.lanes):(O.updateQueue=null,O.memoizedState=null)}var W=Cd(y);if(W!==null){W.flags&=-257,Id(W,y,E,f,t),W.mode&1&&kd(f,M,t),t=W,x=M;var K=t.updateQueue;if(K===null){var Y=new Set;Y.add(x),t.updateQueue=Y}else K.add(x);break e}else{if((t&1)===0){kd(f,M,t),il();break e}x=Error(i(426))}}else if(Ie&&E.mode&1){var De=Cd(y);if(De!==null){(De.flags&65536)===0&&(De.flags|=256),Id(De,y,E,f,t),pa(Ei(x,E));break e}}f=x=Ei(x,E),_e!==4&&(_e=2),ks===null?ks=[f]:ks.push(f),f=y;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var I=Sd(f,x,t);Jc(f,I);break e;case 1:E=x;var k=f.type,P=f.stateNode;if((f.flags&128)===0&&(typeof k.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(vn===null||!vn.has(P)))){f.flags|=65536,t&=-t,f.lanes|=t;var $=xd(f,E,t);Jc(f,$);break e}}f=f.return}while(f!==null)}nm(s)}catch(q){t=q,Fe===s&&s!==null&&(Fe=s=s.return);continue}break}while(!0)}function em(){var e=Or.current;return Or.current=Ar,e===null?Ar:e}function il(){(_e===0||_e===3||_e===2)&&(_e=4),Ue===null||($n&268435455)===0&&(jr&268435455)===0||Sn(Ue,Ge)}function Wr(e,t){var s=fe;fe|=2;var l=em();(Ue!==e||Ge!==t)&&(Xt=null,Un(e,t));do try{Yg();break}catch(c){Zd(e,c)}while(!0);if(ga(),fe=s,Or.current=l,Fe!==null)throw Error(i(261));return Ue=null,Ge=0,_e}function Yg(){for(;Fe!==null;)tm(Fe)}function qg(){for(;Fe!==null&&!Sh();)tm(Fe)}function tm(e){var t=rm(e.alternate,e,pt);e.memoizedProps=e.pendingProps,t===null?nm(e):Fe=t,Ja.current=null}function nm(e){var t=e;do{var s=t.alternate;if(e=t.return,(t.flags&32768)===0){if(s=Ug(s,t,pt),s!==null){Fe=s;return}}else{if(s=zg(s,t),s!==null){s.flags&=32767,Fe=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_e=6,Fe=null;return}}if(t=t.sibling,t!==null){Fe=t;return}Fe=t=e}while(t!==null);_e===0&&(_e=5)}function zn(e,t,s){var l=ye,c=xt.transition;try{xt.transition=null,ye=1,Qg(e,t,s,l)}finally{xt.transition=c,ye=l}return null}function Qg(e,t,s,l){do Ci();while(wn!==null);if((fe&6)!==0)throw Error(i(327));s=e.finishedWork;var c=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var f=s.lanes|s.childLanes;if(Th(e,f),e===Ue&&(Fe=Ue=null,Ge=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Vr||(Vr=!0,om(Ys,function(){return Ci(),null})),f=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||f){f=xt.transition,xt.transition=null;var y=ye;ye=1;var E=fe;fe|=4,Ja.current=null,Wg(e,s),Gd(s,e),yg(ia),nr=!!na,ia=na=null,e.current=s,Gg(s),xh(),fe=E,ye=y,xt.transition=f}else e.current=s;if(Vr&&(Vr=!1,wn=e,Ur=c),f=e.pendingLanes,f===0&&(vn=null),Ih(s.stateNode),ut(e,Ae()),t!==null)for(l=e.onRecoverableError,s=0;s<t.length;s++)c=t[s],l(c.value,{componentStack:c.stack,digest:c.digest});if($r)throw $r=!1,e=Qa,Qa=null,e;return(Ur&1)!==0&&e.tag!==0&&Ci(),f=e.pendingLanes,(f&1)!==0?e===Xa?Cs++:(Cs=0,Xa=e):Cs=0,pn(),null}function Ci(){if(wn!==null){var e=Hu(Ur),t=xt.transition,s=ye;try{if(xt.transition=null,ye=16>e?16:e,wn===null)var l=!1;else{if(e=wn,wn=null,Ur=0,(fe&6)!==0)throw Error(i(331));var c=fe;for(fe|=4,G=e.current;G!==null;){var f=G,y=f.child;if((G.flags&16)!==0){var E=f.deletions;if(E!==null){for(var x=0;x<E.length;x++){var M=E[x];for(G=M;G!==null;){var O=G;switch(O.tag){case 0:case 11:case 15:Ss(8,O,f)}var j=O.child;if(j!==null)j.return=O,G=j;else for(;G!==null;){O=G;var _=O.sibling,W=O.return;if(Vd(O),O===M){G=null;break}if(_!==null){_.return=W,G=_;break}G=W}}}var K=f.alternate;if(K!==null){var Y=K.child;if(Y!==null){K.child=null;do{var De=Y.sibling;Y.sibling=null,Y=De}while(Y!==null)}}G=f}}if((f.subtreeFlags&2064)!==0&&y!==null)y.return=f,G=y;else e:for(;G!==null;){if(f=G,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Ss(9,f,f.return)}var I=f.sibling;if(I!==null){I.return=f.return,G=I;break e}G=f.return}}var k=e.current;for(G=k;G!==null;){y=G;var P=y.child;if((y.subtreeFlags&2064)!==0&&P!==null)P.return=y,G=P;else e:for(y=k;G!==null;){if(E=G,(E.flags&2048)!==0)try{switch(E.tag){case 0:case 11:case 15:_r(9,E)}}catch(q){Le(E,E.return,q)}if(E===y){G=null;break e}var $=E.sibling;if($!==null){$.return=E.return,G=$;break e}G=E.return}}if(fe=c,pn(),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(qs,e)}catch{}l=!0}return l}finally{ye=s,xt.transition=t}}return!1}function im(e,t,s){t=Ei(s,t),t=Sd(e,t,1),e=gn(e,t,1),t=nt(),e!==null&&(Ji(e,1,t),ut(e,t))}function Le(e,t,s){if(e.tag===3)im(e,e,s);else for(;t!==null;){if(t.tag===3){im(t,e,s);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(vn===null||!vn.has(l))){e=Ei(s,e),e=xd(t,e,1),t=gn(t,e,1),e=nt(),t!==null&&(Ji(t,1,e),ut(t,e));break}}t=t.return}}function Xg(e,t,s){var l=e.pingCache;l!==null&&l.delete(t),t=nt(),e.pingedLanes|=e.suspendedLanes&s,Ue===e&&(Ge&s)===s&&(_e===4||_e===3&&(Ge&130023424)===Ge&&500>Ae()-qa?Un(e,0):Ya|=s),ut(e,t)}function sm(e,t){t===0&&((e.mode&1)===0?t=1:(t=Xs,Xs<<=1,(Xs&130023424)===0&&(Xs=4194304)));var s=nt();e=Yt(e,t),e!==null&&(Ji(e,t,s),ut(e,s))}function Zg(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),sm(e,s)}function ey(e,t){var s=0;switch(e.tag){case 13:var l=e.stateNode,c=e.memoizedState;c!==null&&(s=c.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(i(314))}l!==null&&l.delete(t),sm(e,s)}var rm;rm=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||rt.current)at=!0;else{if((e.lanes&s)===0&&(t.flags&128)===0)return at=!1,Vg(e,t,s);at=(e.flags&131072)!==0}else at=!1,Ie&&(t.flags&1048576)!==0&&Oc(t,Er,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;Fr(e,t),e=t.pendingProps;var c=mi(t,Ye.current);vi(t,s),c=Pa(null,t,l,e,c,s);var f=Ba();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ot(l)?(f=!0,yr(t)):f=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,Ea(t),c.updater=Dr,t.stateNode=c,c._reactInternals=t,Na(t,l,e,s),t=Oa(null,t,l,!0,f,s)):(t.tag=0,Ie&&f&&ca(t),tt(null,t,c,s),t=t.child),t;case 16:l=t.elementType;e:{switch(Fr(e,t),e=t.pendingProps,c=l._init,l=c(l._payload),t.type=l,c=t.tag=ny(l),e=Mt(l,e),c){case 0:t=_a(null,t,l,e,s);break e;case 1:t=Td(null,t,l,e,s);break e;case 11:t=bd(null,t,l,e,s);break e;case 14:t=Pd(null,t,l,Mt(l.type,e),s);break e}throw Error(i(306,l,""))}return t;case 0:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:Mt(l,c),_a(e,t,l,c,s);case 1:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:Mt(l,c),Td(e,t,l,c,s);case 3:e:{if(Ad(t),e===null)throw Error(i(387));l=t.pendingProps,f=t.memoizedState,c=f.element,Kc(e,t),br(t,l,null,s);var y=t.memoizedState;if(l=y.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){c=Ei(Error(i(423)),t),t=Dd(e,t,l,s,c);break e}else if(l!==c){c=Ei(Error(i(424)),t),t=Dd(e,t,l,s,c);break e}else for(ft=dn(t.stateNode.containerInfo.firstChild),mt=t,Ie=!0,Lt=null,s=Wc(t,null,l,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(hi(),l===c){t=Qt(e,t,s);break e}tt(e,t,l,s)}t=t.child}return t;case 5:return qc(t),e===null&&fa(t),l=t.type,c=t.pendingProps,f=e!==null?e.memoizedProps:null,y=c.children,sa(l,c)?y=null:f!==null&&sa(l,f)&&(t.flags|=32),Md(e,t),tt(e,t,y,s),t.child;case 6:return e===null&&fa(t),null;case 13:return Nd(e,t,s);case 4:return Sa(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=gi(t,null,l,s):tt(e,t,l,s),t.child;case 11:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:Mt(l,c),bd(e,t,l,c,s);case 7:return tt(e,t,t.pendingProps,s),t.child;case 8:return tt(e,t,t.pendingProps.children,s),t.child;case 12:return tt(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(l=t.type._context,c=t.pendingProps,f=t.memoizedProps,y=c.value,Se(kr,l._currentValue),l._currentValue=y,f!==null)if(Bt(f.value,y)){if(f.children===c.children&&!rt.current){t=Qt(e,t,s);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var E=f.dependencies;if(E!==null){y=f.child;for(var x=E.firstContext;x!==null;){if(x.context===l){if(f.tag===1){x=qt(-1,s&-s),x.tag=2;var M=f.updateQueue;if(M!==null){M=M.shared;var O=M.pending;O===null?x.next=x:(x.next=O.next,O.next=x),M.pending=x}}f.lanes|=s,x=f.alternate,x!==null&&(x.lanes|=s),va(f.return,s,t),E.lanes|=s;break}x=x.next}}else if(f.tag===10)y=f.type===t.type?null:f.child;else if(f.tag===18){if(y=f.return,y===null)throw Error(i(341));y.lanes|=s,E=y.alternate,E!==null&&(E.lanes|=s),va(y,s,t),y=f.sibling}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===t){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}tt(e,t,c.children,s),t=t.child}return t;case 9:return c=t.type,l=t.pendingProps.children,vi(t,s),c=Et(c),l=l(c),t.flags|=1,tt(e,t,l,s),t.child;case 14:return l=t.type,c=Mt(l,t.pendingProps),c=Mt(l.type,c),Pd(e,t,l,c,s);case 15:return Bd(e,t,t.type,t.pendingProps,s);case 17:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:Mt(l,c),Fr(e,t),t.tag=1,ot(l)?(e=!0,yr(t)):e=!1,vi(t,s),wd(t,l,c),Na(t,l,c,s),Oa(null,t,l,!0,e,s);case 19:return Rd(e,t,s);case 22:return Ld(e,t,s)}throw Error(i(156,t.tag))};function om(e,t){return ju(e,t)}function ty(e,t,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(e,t,s,l){return new ty(e,t,s,l)}function sl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ny(e){if(typeof e=="function")return sl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Oe)return 11;if(e===st)return 14}return 2}function xn(e,t){var s=e.alternate;return s===null?(s=kt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Gr(e,t,s,l,c,f){var y=2;if(l=e,typeof e=="function")sl(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case ie:return Hn(s.children,c,f,t);case Q:y=8,c|=8;break;case me:return e=kt(12,s,t,c|2),e.elementType=me,e.lanes=f,e;case je:return e=kt(13,s,t,c),e.elementType=je,e.lanes=f,e;case He:return e=kt(19,s,t,c),e.elementType=He,e.lanes=f,e;case oe:return Kr(s,c,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ve:y=10;break e;case we:y=9;break e;case Oe:y=11;break e;case st:y=14;break e;case $e:y=16,l=null;break e}throw Error(i(130,e==null?e:typeof e,""))}return t=kt(y,s,t,c),t.elementType=e,t.type=l,t.lanes=f,t}function Hn(e,t,s,l){return e=kt(7,e,l,t),e.lanes=s,e}function Kr(e,t,s,l){return e=kt(22,e,l,t),e.elementType=oe,e.lanes=s,e.stateNode={isHidden:!1},e}function rl(e,t,s){return e=kt(6,e,null,t),e.lanes=s,e}function ol(e,t,s){return t=kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function iy(e,t,s,l,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Do(0),this.expirationTimes=Do(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Do(0),this.identifierPrefix=l,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function al(e,t,s,l,c,f,y,E,x){return e=new iy(e,t,s,E,x),t===1?(t=1,f===!0&&(t|=8)):t=0,f=kt(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:l,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ea(f),e}function sy(e,t,s){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:l==null?null:""+l,children:e,containerInfo:t,implementation:s}}function am(e){if(!e)return fn;e=e._reactInternals;e:{if(An(e)!==e||e.tag!==1)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ot(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(i(171))}if(e.tag===1){var s=e.type;if(ot(s))return Fc(e,s,t)}return t}function lm(e,t,s,l,c,f,y,E,x){return e=al(s,l,!0,e,c,f,y,E,x),e.context=am(null),s=e.current,l=nt(),c=En(s),f=qt(l,c),f.callback=t??null,gn(s,f,c),e.current.lanes=c,Ji(e,c,l),ut(e,l),e}function Jr(e,t,s,l){var c=t.current,f=nt(),y=En(c);return s=am(s),t.context===null?t.context=s:t.pendingContext=s,t=qt(f,y),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=gn(c,t,y),e!==null&&(Dt(e,c,y,f),Ir(e,c,y)),y}function Yr(e){return e=e.current,e.child?(e.child.tag===5,e.child.stateNode):null}function um(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function ll(e,t){um(e,t),(e=e.alternate)&&um(e,t)}function ry(){return null}var cm=typeof reportError=="function"?reportError:function(e){console.error(e)};function ul(e){this._internalRoot=e}qr.prototype.render=ul.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));Jr(e,t,null,null)},qr.prototype.unmount=ul.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vn(function(){Jr(null,e,null,null)}),t[Wt]=null}};function qr(e){this._internalRoot=e}qr.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ku();e={blockedOn:null,target:e,priority:t};for(var s=0;s<ln.length&&t!==0&&t<ln[s].priority;s++);ln.splice(s,0,e),s===0&&qu(e)}};function cl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Qr(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function dm(){}function oy(e,t,s,l,c){if(c){if(typeof l=="function"){var f=l;l=function(){var M=Yr(y);f.call(M)}}var y=lm(t,l,e,0,null,!1,!1,"",dm);return e._reactRootContainer=y,e[Wt]=y.current,ls(e.nodeType===8?e.parentNode:e),Vn(),y}for(;c=e.lastChild;)e.removeChild(c);if(typeof l=="function"){var E=l;l=function(){var M=Yr(x);E.call(M)}}var x=al(e,0,!1,null,null,!1,!1,"",dm);return e._reactRootContainer=x,e[Wt]=x.current,ls(e.nodeType===8?e.parentNode:e),Vn(function(){Jr(t,x,s,l)}),x}function Xr(e,t,s,l,c){var f=s._reactRootContainer;if(f){var y=f;if(typeof c=="function"){var E=c;c=function(){var x=Yr(y);E.call(x)}}Jr(t,y,e,c)}else y=oy(s,t,e,c,l);return Yr(y)}Wu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Ki(t.pendingLanes);s!==0&&(No(t,s|1),ut(t,Ae()),(fe&6)===0&&(ki=Ae()+500,pn()))}break;case 13:Vn(function(){var l=Yt(e,1);if(l!==null){var c=nt();Dt(l,e,1,c)}}),ll(e,1)}},Fo=function(e){if(e.tag===13){var t=Yt(e,134217728);if(t!==null){var s=nt();Dt(t,e,134217728,s)}ll(e,134217728)}},Gu=function(e){if(e.tag===13){var t=En(e),s=Yt(e,t);if(s!==null){var l=nt();Dt(s,e,t,l)}ll(e,t)}},Ku=function(){return ye},Ju=function(e,t){var s=ye;try{return ye=e,t()}finally{ye=s}},Po=function(e,t,s){switch(t){case"input":if(Xn(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var l=s[t];if(l!==e&&l.form===e.form){var c=hr(l);if(!c)throw Error(i(90));Ri(l),Xn(l,c)}}}break;case"textarea":Vi(e,s);break;case"select":t=s.value,t!=null&&Ht(e,!!s.multiple,t,!1)}},Au=tl,Du=Vn;var ay={usingClientEntryPoint:!1,Events:[ds,ci,hr,Mu,Tu,tl]},Is={findFiberByHostInstance:Dn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ly={bundleType:Is.bundleType,version:Is.version,rendererPackageName:Is.rendererPackageName,rendererConfig:Is.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_u(e),e===null?null:e.stateNode},findFiberByHostInstance:Is.findFiberByHostInstance||ry,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zr.isDisabled&&Zr.supportsFiber)try{qs=Zr.inject(ly),_t=Zr}catch{}}return ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ay,ct.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cl(t))throw Error(i(200));return sy(e,t,null,s)},ct.createRoot=function(e,t){if(!cl(e))throw Error(i(299));var s=!1,l="",c=cm;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=al(e,1,!1,null,null,s,!1,l,c),e[Wt]=t.current,ls(e.nodeType===8?e.parentNode:e),new ul(t)},ct.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=_u(t),e=e===null?null:e.stateNode,e},ct.flushSync=function(e){return Vn(e)},ct.hydrate=function(e,t,s){if(!Qr(t))throw Error(i(200));return Xr(null,e,t,!0,s)},ct.hydrateRoot=function(e,t,s){if(!cl(e))throw Error(i(405));var l=s!=null&&s.hydratedSources||null,c=!1,f="",y=cm;if(s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(y=s.onRecoverableError)),t=lm(t,null,e,1,s??null,c,!1,f,y),e[Wt]=t.current,ls(e),l)for(e=0;e<l.length;e++)s=l[e],c=s._getVersion,c=c(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,c]:t.mutableSourceEagerHydrationData.push(s,c);return new qr(t)},ct.render=function(e,t,s){if(!Qr(t))throw Error(i(200));return Xr(null,e,t,!1,s)},ct.unmountComponentAtNode=function(e){if(!Qr(e))throw Error(i(40));return e._reactRootContainer?(Vn(function(){Xr(null,null,e,!1,function(){e._reactRootContainer=null,e[Wt]=null})}),!0):!1},ct.unstable_batchedUpdates=tl,ct.unstable_renderSubtreeIntoContainer=function(e,t,s,l){if(!Qr(s))throw Error(i(200));if(e==null||e._reactInternals===void 0)throw Error(i(38));return Xr(e,t,s,!1,l)},ct.version="18.3.1-next-f1338f8080-20240426",ct}var wm;function yy(){if(wm)return fl.exports;wm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),fl.exports=gy(),fl.exports}var Em;function vy(){if(Em)return eo;Em=1;var r=yy();return eo.createRoot=r.createRoot,eo.hydrateRoot=r.hydrateRoot,eo}var wy=vy();const Ey=Of(wy),jf=se.createContext({});function Sy(r){const n=se.useRef(null);return n.current===null&&(n.current=r()),n.current}const Jl=se.createContext(null),$f=se.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});function xy(r=!0){const n=se.useContext(Jl);if(n===null)return[!0,null];const{isPresent:i,onExitComplete:o,register:a}=n,u=se.useId();se.useEffect(()=>{r&&a(u)},[r]);const d=se.useCallback(()=>r&&o&&o(u),[u,o,r]);return!i&&o?[!1,d]:[!0]}const Yl=typeof window<"u",ky=Yl?se.useLayoutEffect:se.useEffect,ht=r=>r;let Vf=ht;function ql(r){let n;return()=>(n===void 0&&(n=r()),n)}const Ti=(r,n,i)=>{const o=n-r;return o===0?1:(i-r)/o},en=r=>r*1e3,tn=r=>r/1e3,Cy={useManualTiming:!1};function Iy(r){let n=new Set,i=new Set,o=!1,a=!1;const u=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function m(h){u.has(h)&&(p.schedule(h),r()),h(d)}const p={schedule:(h,g=!1,v=!1)=>{const S=v&&o?n:i;return g&&u.add(h),S.has(h)||S.add(h),h},cancel:h=>{i.delete(h),u.delete(h)},process:h=>{if(d=h,o){a=!0;return}o=!0,[n,i]=[i,n],n.forEach(m),n.clear(),o=!1,a&&(a=!1,p.process(h))}};return p}const to=["read","resolveKeyframes","update","preRender","render","postRender"],by=40;function Uf(r,n){let i=!1,o=!0;const a={delta:0,timestamp:0,isProcessing:!1},u=()=>i=!0,d=to.reduce((N,V)=>(N[V]=Iy(u),N),{}),{read:m,resolveKeyframes:p,update:h,preRender:g,render:v,postRender:w}=d,S=()=>{const N=performance.now();i=!1,a.delta=o?1e3/60:Math.max(Math.min(N-a.timestamp,by),1),a.timestamp=N,a.isProcessing=!0,m.process(a),p.process(a),h.process(a),g.process(a),v.process(a),w.process(a),a.isProcessing=!1,i&&n&&(o=!1,r(S))},b=()=>{i=!0,o=!0,a.isProcessing||r(S)};return{schedule:to.reduce((N,V)=>{const A=d[V];return N[V]=(z,F=!1,J=!1)=>(i||b(),A.schedule(z,F,J)),N},{}),cancel:N=>{for(let V=0;V<to.length;V++)d[to[V]].cancel(N)},state:a,steps:d}}const{schedule:Ce,cancel:Pn,state:Ke,steps:gl}=Uf(typeof requestAnimationFrame<"u"?requestAnimationFrame:ht,!0),zf=se.createContext({strict:!1}),Sm={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ai={};for(const r in Sm)Ai[r]={isEnabled:n=>Sm[r].some(i=>!!n[i])};function Py(r){for(const n in r)Ai[n]={...Ai[n],...r[n]}}const By=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function uo(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||By.has(r)}let Hf=r=>!uo(r);function Ly(r){r&&(Hf=n=>n.startsWith("on")?!uo(n):r(n))}try{Ly(require("@emotion/is-prop-valid").default)}catch{}function My(r,n,i){const o={};for(const a in r)a==="values"&&typeof r.values=="object"||(Hf(a)||i===!0&&uo(a)||!n&&!uo(a)||r.draggable&&a.startsWith("onDrag"))&&(o[a]=r[a]);return o}function Ty(r){if(typeof Proxy>"u")return r;const n=new Map,i=(...o)=>r(...o);return new Proxy(i,{get:(o,a)=>a==="create"?r:(n.has(a)||n.set(a,r(a)),n.get(a))})}const yo=se.createContext({});function Rs(r){return typeof r=="string"||Array.isArray(r)}function vo(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}const Ql=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Xl=["initial",...Ql];function wo(r){return vo(r.animate)||Xl.some(n=>Rs(r[n]))}function Wf(r){return!!(wo(r)||r.variants)}function Ay(r,n){if(wo(r)){const{initial:i,animate:o}=r;return{initial:i===!1||Rs(i)?i:void 0,animate:Rs(o)?o:void 0}}return r.inherit!==!1?n:{}}function Dy(r){const{initial:n,animate:i}=Ay(r,se.useContext(yo));return se.useMemo(()=>({initial:n,animate:i}),[xm(n),xm(i)])}function xm(r){return Array.isArray(r)?r.join(" "):r}const Ny=Symbol.for("motionComponentSymbol");function bi(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function Fy(r,n,i){return se.useCallback(o=>{o&&r.onMount&&r.onMount(o),n&&(o?n.mount(o):n.unmount()),i&&(typeof i=="function"?i(o):bi(i)&&(i.current=o))},[n])}const Zl=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Ry="framerAppearId",Gf="data-"+Zl(Ry),{schedule:eu}=Uf(queueMicrotask,!1),Kf=se.createContext({});function _y(r,n,i,o,a){var u,d;const{visualElement:m}=se.useContext(yo),p=se.useContext(zf),h=se.useContext(Jl),g=se.useContext($f).reducedMotion,v=se.useRef(null);o=o||p.renderer,!v.current&&o&&(v.current=o(r,{visualState:n,parent:m,props:i,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:g}));const w=v.current,S=se.useContext(Kf);w&&!w.projection&&a&&(w.type==="html"||w.type==="svg")&&Oy(v.current,i,a,S);const b=se.useRef(!1);se.useInsertionEffect(()=>{w&&b.current&&w.update(i,h)});const T=i[Gf],D=se.useRef(!!T&&!(!((u=window.MotionHandoffIsComplete)===null||u===void 0)&&u.call(window,T))&&((d=window.MotionHasOptimisedAnimation)===null||d===void 0?void 0:d.call(window,T)));return ky(()=>{w&&(b.current=!0,window.MotionIsMounted=!0,w.updateFeatures(),eu.render(w.render),D.current&&w.animationState&&w.animationState.animateChanges())}),se.useEffect(()=>{w&&(!D.current&&w.animationState&&w.animationState.animateChanges(),D.current&&(queueMicrotask(()=>{var N;(N=window.MotionHandoffMarkAsComplete)===null||N===void 0||N.call(window,T)}),D.current=!1))}),w}function Oy(r,n,i,o){const{layoutId:a,layout:u,drag:d,dragConstraints:m,layoutScroll:p,layoutRoot:h}=n;r.projection=new i(r.latestValues,n["data-framer-portal-id"]?void 0:Jf(r.parent)),r.projection.setOptions({layoutId:a,layout:u,alwaysMeasureLayout:!!d||m&&bi(m),visualElement:r,animationType:typeof u=="string"?u:"both",initialPromotionConfig:o,layoutScroll:p,layoutRoot:h})}function Jf(r){if(r)return r.options.allowProjection!==!1?r.projection:Jf(r.parent)}function jy({preloadedFeatures:r,createVisualElement:n,useRender:i,useVisualState:o,Component:a}){var u,d;r&&Py(r);function m(h,g){let v;const w={...se.useContext($f),...h,layoutId:$y(h)},{isStatic:S}=w,b=Dy(h),T=o(h,S);if(!S&&Yl){Vy();const D=Uy(w);v=D.MeasureLayout,b.visualElement=_y(a,T,w,n,D.ProjectionNode)}return B.jsxs(yo.Provider,{value:b,children:[v&&b.visualElement?B.jsx(v,{visualElement:b.visualElement,...w}):null,i(a,h,Fy(T,b.visualElement,g),T,S,b.visualElement)]})}m.displayName=`motion.${typeof a=="string"?a:`create(${(d=(u=a.displayName)!==null&&u!==void 0?u:a.name)!==null&&d!==void 0?d:""})`}`;const p=se.forwardRef(m);return p[Ny]=a,p}function $y({layoutId:r}){const n=se.useContext(jf).id;return n&&r!==void 0?n+"-"+r:r}function Vy(r,n){se.useContext(zf).strict}function Uy(r){const{drag:n,layout:i}=Ai;if(!n&&!i)return{};const o={...n,...i};return{MeasureLayout:n?.isEnabled(r)||i?.isEnabled(r)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}const zy=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function tu(r){return typeof r!="string"||r.includes("-")?!1:!!(zy.indexOf(r)>-1||/[A-Z]/u.test(r))}function km(r){const n=[{},{}];return r?.values.forEach((i,o)=>{n[0][o]=i.get(),n[1][o]=i.getVelocity()}),n}function nu(r,n,i,o){if(typeof n=="function"){const[a,u]=km(o);n=n(i!==void 0?i:r.custom,a,u)}if(typeof n=="string"&&(n=r.variants&&r.variants[n]),typeof n=="function"){const[a,u]=km(o);n=n(i!==void 0?i:r.custom,a,u)}return n}const Tl=r=>Array.isArray(r),Hy=r=>!!(r&&typeof r=="object"&&r.mix&&r.toValue),Wy=r=>Tl(r)?r[r.length-1]||0:r,et=r=>!!(r&&r.getVelocity);function oo(r){const n=et(r)?r.get():r;return Hy(n)?n.toValue():n}function Gy({scrapeMotionValuesFromProps:r,createRenderState:n,onUpdate:i},o,a,u){const d={latestValues:Ky(o,a,u,r),renderState:n()};return i&&(d.onMount=m=>i({props:o,current:m,...d}),d.onUpdate=m=>i(m)),d}const Yf=r=>(n,i)=>{const o=se.useContext(yo),a=se.useContext(Jl),u=()=>Gy(r,n,o,a);return i?u():Sy(u)};function Ky(r,n,i,o){const a={},u=o(r,{});for(const w in u)a[w]=oo(u[w]);let{initial:d,animate:m}=r;const p=wo(r),h=Wf(r);n&&h&&!p&&r.inherit!==!1&&(d===void 0&&(d=n.initial),m===void 0&&(m=n.animate));let g=i?i.initial===!1:!1;g=g||d===!1;const v=g?m:d;if(v&&typeof v!="boolean"&&!vo(v)){const w=Array.isArray(v)?v:[v];for(let S=0;S<w.length;S++){const b=nu(r,w[S]);if(b){const{transitionEnd:T,transition:D,...N}=b;for(const V in N){let A=N[V];if(Array.isArray(A)){const z=g?A.length-1:0;A=A[z]}A!==null&&(a[V]=A)}for(const V in T)a[V]=T[V]}}}return a}const Ni=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],qn=new Set(Ni),qf=r=>n=>typeof n=="string"&&n.startsWith(r),Qf=qf("--"),Jy=qf("var(--"),iu=r=>Jy(r)?Yy.test(r.split("/*")[0].trim()):!1,Yy=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Xf=(r,n)=>n&&typeof r=="number"?n.transform(r):r,nn=(r,n,i)=>i>n?n:i<r?r:i,Fi={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},_s={...Fi,transform:r=>nn(0,1,r)},no={...Fi,default:1},Vs=r=>({test:n=>typeof n=="string"&&n.endsWith(r)&&n.split(" ").length===1,parse:parseFloat,transform:n=>`${n}${r}`}),bn=Vs("deg"),Ut=Vs("%"),te=Vs("px"),qy=Vs("vh"),Qy=Vs("vw"),Cm={...Ut,parse:r=>Ut.parse(r)/100,transform:r=>Ut.transform(r*100)},Xy={borderWidth:te,borderTopWidth:te,borderRightWidth:te,borderBottomWidth:te,borderLeftWidth:te,borderRadius:te,radius:te,borderTopLeftRadius:te,borderTopRightRadius:te,borderBottomRightRadius:te,borderBottomLeftRadius:te,width:te,maxWidth:te,height:te,maxHeight:te,top:te,right:te,bottom:te,left:te,padding:te,paddingTop:te,paddingRight:te,paddingBottom:te,paddingLeft:te,margin:te,marginTop:te,marginRight:te,marginBottom:te,marginLeft:te,backgroundPositionX:te,backgroundPositionY:te},Zy={rotate:bn,rotateX:bn,rotateY:bn,rotateZ:bn,scale:no,scaleX:no,scaleY:no,scaleZ:no,skew:bn,skewX:bn,skewY:bn,distance:te,translateX:te,translateY:te,translateZ:te,x:te,y:te,z:te,perspective:te,transformPerspective:te,opacity:_s,originX:Cm,originY:Cm,originZ:te},Im={...Fi,transform:Math.round},su={...Xy,...Zy,zIndex:Im,size:te,fillOpacity:_s,strokeOpacity:_s,numOctaves:Im},ev={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},tv=Ni.length;function nv(r,n,i){let o="",a=!0;for(let u=0;u<tv;u++){const d=Ni[u],m=r[d];if(m===void 0)continue;let p=!0;if(typeof m=="number"?p=m===(d.startsWith("scale")?1:0):p=parseFloat(m)===0,!p||i){const h=Xf(m,su[d]);if(!p){a=!1;const g=ev[d]||d;o+=`${g}(${h}) `}i&&(n[d]=h)}}return o=o.trim(),i?o=i(n,a?"":o):a&&(o="none"),o}function ru(r,n,i){const{style:o,vars:a,transformOrigin:u}=r;let d=!1,m=!1;for(const p in n){const h=n[p];if(qn.has(p)){d=!0;continue}else if(Qf(p)){a[p]=h;continue}else{const g=Xf(h,su[p]);p.startsWith("origin")?(m=!0,u[p]=g):o[p]=g}}if(n.transform||(d||i?o.transform=nv(n,r.transform,i):o.transform&&(o.transform="none")),m){const{originX:p="50%",originY:h="50%",originZ:g=0}=u;o.transformOrigin=`${p} ${h} ${g}`}}const iv={offset:"stroke-dashoffset",array:"stroke-dasharray"},sv={offset:"strokeDashoffset",array:"strokeDasharray"};function rv(r,n,i=1,o=0,a=!0){r.pathLength=1;const u=a?iv:sv;r[u.offset]=te.transform(-o);const d=te.transform(n),m=te.transform(i);r[u.array]=`${d} ${m}`}function bm(r,n,i){return typeof r=="string"?r:te.transform(n+i*r)}function ov(r,n,i){const o=bm(n,r.x,r.width),a=bm(i,r.y,r.height);return`${o} ${a}`}function ou(r,{attrX:n,attrY:i,attrScale:o,originX:a,originY:u,pathLength:d,pathSpacing:m=1,pathOffset:p=0,...h},g,v){if(ru(r,h,v),g){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:w,style:S,dimensions:b}=r;w.transform&&(b&&(S.transform=w.transform),delete w.transform),b&&(a!==void 0||u!==void 0||S.transform)&&(S.transformOrigin=ov(b,a!==void 0?a:.5,u!==void 0?u:.5)),n!==void 0&&(w.x=n),i!==void 0&&(w.y=i),o!==void 0&&(w.scale=o),d!==void 0&&rv(w,d,m,p,!1)}const au=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Zf=()=>({...au(),attrs:{}}),lu=r=>typeof r=="string"&&r.toLowerCase()==="svg";function ep(r,{style:n,vars:i},o,a){Object.assign(r.style,n,a&&a.getProjectionStyles(o));for(const u in i)r.style.setProperty(u,i[u])}const tp=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function np(r,n,i,o){ep(r,n,void 0,o);for(const a in n.attrs)r.setAttribute(tp.has(a)?a:Zl(a),n.attrs[a])}const co={};function av(r){Object.assign(co,r)}function ip(r,{layout:n,layoutId:i}){return qn.has(r)||r.startsWith("origin")||(n||i!==void 0)&&(!!co[r]||r==="opacity")}function uu(r,n,i){var o;const{style:a}=r,u={};for(const d in a)(et(a[d])||n.style&&et(n.style[d])||ip(d,r)||((o=i?.getValue(d))===null||o===void 0?void 0:o.liveStyle)!==void 0)&&(u[d]=a[d]);return u}function sp(r,n,i){const o=uu(r,n,i);for(const a in r)if(et(r[a])||et(n[a])){const u=Ni.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;o[u]=r[a]}return o}function lv(r,n){try{n.dimensions=typeof r.getBBox=="function"?r.getBBox():r.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}const Pm=["x","y","width","height","cx","cy","r"],uv={useVisualState:Yf({scrapeMotionValuesFromProps:sp,createRenderState:Zf,onUpdate:({props:r,prevProps:n,current:i,renderState:o,latestValues:a})=>{if(!i)return;let u=!!r.drag;if(!u){for(const m in a)if(qn.has(m)){u=!0;break}}if(!u)return;let d=!n;if(n)for(let m=0;m<Pm.length;m++){const p=Pm[m];r[p]!==n[p]&&(d=!0)}d&&Ce.read(()=>{lv(i,o),Ce.render(()=>{ou(o,a,lu(i.tagName),r.transformTemplate),np(i,o)})})}})},cv={useVisualState:Yf({scrapeMotionValuesFromProps:uu,createRenderState:au})};function rp(r,n,i){for(const o in n)!et(n[o])&&!ip(o,i)&&(r[o]=n[o])}function dv({transformTemplate:r},n){return se.useMemo(()=>{const i=au();return ru(i,n,r),Object.assign({},i.vars,i.style)},[n])}function mv(r,n){const i=r.style||{},o={};return rp(o,i,r),Object.assign(o,dv(r,n)),o}function fv(r,n){const i={},o=mv(r,n);return r.drag&&r.dragListener!==!1&&(i.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(i.tabIndex=0),i.style=o,i}function pv(r,n,i,o){const a=se.useMemo(()=>{const u=Zf();return ou(u,n,lu(o),r.transformTemplate),{...u.attrs,style:{...u.style}}},[n]);if(r.style){const u={};rp(u,r.style,r),a.style={...u,...a.style}}return a}function hv(r=!1){return(i,o,a,{latestValues:u},d)=>{const p=(tu(i)?pv:fv)(o,u,d,i),h=My(o,typeof i=="string",r),g=i!==se.Fragment?{...h,...p,ref:a}:{},{children:v}=o,w=se.useMemo(()=>et(v)?v.get():v,[v]);return se.createElement(i,{...g,children:w})}}function gv(r,n){return function(o,{forwardMotionProps:a}={forwardMotionProps:!1}){const d={...tu(o)?uv:cv,preloadedFeatures:r,useRender:hv(a),createVisualElement:n,Component:o};return jy(d)}}function op(r,n){if(!Array.isArray(n))return!1;const i=n.length;if(i!==r.length)return!1;for(let o=0;o<i;o++)if(n[o]!==r[o])return!1;return!0}function Eo(r,n,i){const o=r.getProps();return nu(o,n,i!==void 0?i:o.custom,r)}const yv=ql(()=>window.ScrollTimeline!==void 0);class vv{constructor(n){this.stop=()=>this.runAll("stop"),this.animations=n.filter(Boolean)}get finished(){return Promise.all(this.animations.map(n=>"finished"in n?n.finished:n))}getAll(n){return this.animations[0][n]}setAll(n,i){for(let o=0;o<this.animations.length;o++)this.animations[o][n]=i}attachTimeline(n,i){const o=this.animations.map(a=>{if(yv()&&a.attachTimeline)return a.attachTimeline(n);if(typeof i=="function")return i(a)});return()=>{o.forEach((a,u)=>{a&&a(),this.animations[u].stop()})}}get time(){return this.getAll("time")}set time(n){this.setAll("time",n)}get speed(){return this.getAll("speed")}set speed(n){this.setAll("speed",n)}get startTime(){return this.getAll("startTime")}get duration(){let n=0;for(let i=0;i<this.animations.length;i++)n=Math.max(n,this.animations[i].duration);return n}runAll(n){this.animations.forEach(i=>i[n]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class wv extends vv{then(n,i){return Promise.all(this.animations).then(n).catch(i)}}function cu(r,n){return r?r[n]||r.default||r:void 0}const Al=2e4;function ap(r){let n=0;const i=50;let o=r.next(n);for(;!o.done&&n<Al;)n+=i,o=r.next(n);return n>=Al?1/0:n}function du(r){return typeof r=="function"}function Bm(r,n){r.timeline=n,r.onfinish=null}const mu=r=>Array.isArray(r)&&typeof r[0]=="number",Ev={linearEasing:void 0};function Sv(r,n){const i=ql(r);return()=>{var o;return(o=Ev[n])!==null&&o!==void 0?o:i()}}const mo=Sv(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),lp=(r,n,i=10)=>{let o="";const a=Math.max(Math.round(n/i),2);for(let u=0;u<a;u++)o+=r(Ti(0,a-1,u))+", ";return`linear(${o.substring(0,o.length-2)})`};function up(r){return!!(typeof r=="function"&&mo()||!r||typeof r=="string"&&(r in Dl||mo())||mu(r)||Array.isArray(r)&&r.every(up))}const Ls=([r,n,i,o])=>`cubic-bezier(${r}, ${n}, ${i}, ${o})`,Dl={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ls([0,.65,.55,1]),circOut:Ls([.55,0,1,.45]),backIn:Ls([.31,.01,.66,-.59]),backOut:Ls([.33,1.53,.69,.99])};function cp(r,n){if(r)return typeof r=="function"&&mo()?lp(r,n):mu(r)?Ls(r):Array.isArray(r)?r.map(i=>cp(i,n)||Dl.easeOut):Dl[r]}const Rt={x:!1,y:!1};function dp(){return Rt.x||Rt.y}function xv(r,n,i){var o;if(r instanceof Element)return[r];if(typeof r=="string"){let a=document;const u=(o=void 0)!==null&&o!==void 0?o:a.querySelectorAll(r);return u?Array.from(u):[]}return Array.from(r)}function mp(r,n){const i=xv(r),o=new AbortController,a={passive:!0,...n,signal:o.signal};return[i,a,()=>o.abort()]}function Lm(r){return n=>{n.pointerType==="touch"||dp()||r(n)}}function kv(r,n,i={}){const[o,a,u]=mp(r,i),d=Lm(m=>{const{target:p}=m,h=n(m);if(typeof h!="function"||!p)return;const g=Lm(v=>{h(v),p.removeEventListener("pointerleave",g)});p.addEventListener("pointerleave",g,a)});return o.forEach(m=>{m.addEventListener("pointerenter",d,a)}),u}const fp=(r,n)=>n?r===n?!0:fp(r,n.parentElement):!1,fu=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,Cv=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Iv(r){return Cv.has(r.tagName)||r.tabIndex!==-1}const Ms=new WeakSet;function Mm(r){return n=>{n.key==="Enter"&&r(n)}}function yl(r,n){r.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const bv=(r,n)=>{const i=r.currentTarget;if(!i)return;const o=Mm(()=>{if(Ms.has(i))return;yl(i,"down");const a=Mm(()=>{yl(i,"up")}),u=()=>yl(i,"cancel");i.addEventListener("keyup",a,n),i.addEventListener("blur",u,n)});i.addEventListener("keydown",o,n),i.addEventListener("blur",()=>i.removeEventListener("keydown",o),n)};function Tm(r){return fu(r)&&!dp()}function Pv(r,n,i={}){const[o,a,u]=mp(r,i),d=m=>{const p=m.currentTarget;if(!Tm(m)||Ms.has(p))return;Ms.add(p);const h=n(m),g=(S,b)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",w),!(!Tm(S)||!Ms.has(p))&&(Ms.delete(p),typeof h=="function"&&h(S,{success:b}))},v=S=>{g(S,i.useGlobalTarget||fp(p,S.target))},w=S=>{g(S,!1)};window.addEventListener("pointerup",v,a),window.addEventListener("pointercancel",w,a)};return o.forEach(m=>{!Iv(m)&&m.getAttribute("tabindex")===null&&(m.tabIndex=0),(i.useGlobalTarget?window:m).addEventListener("pointerdown",d,a),m.addEventListener("focus",h=>bv(h,a),a)}),u}function Bv(r){return r==="x"||r==="y"?Rt[r]?null:(Rt[r]=!0,()=>{Rt[r]=!1}):Rt.x||Rt.y?null:(Rt.x=Rt.y=!0,()=>{Rt.x=Rt.y=!1})}const pp=new Set(["width","height","top","left","right","bottom",...Ni]);let ao;function Lv(){ao=void 0}const zt={now:()=>(ao===void 0&&zt.set(Ke.isProcessing||Cy.useManualTiming?Ke.timestamp:performance.now()),ao),set:r=>{ao=r,queueMicrotask(Lv)}};function pu(r,n){r.indexOf(n)===-1&&r.push(n)}function hu(r,n){const i=r.indexOf(n);i>-1&&r.splice(i,1)}class gu{constructor(){this.subscriptions=[]}add(n){return pu(this.subscriptions,n),()=>hu(this.subscriptions,n)}notify(n,i,o){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](n,i,o);else for(let u=0;u<a;u++){const d=this.subscriptions[u];d&&d(n,i,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function hp(r,n){return n?r*(1e3/n):0}const Am=30,Mv=r=>!isNaN(parseFloat(r));class Tv{constructor(n,i={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(o,a=!0)=>{const u=zt.now();this.updatedAt!==u&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(n),this.owner=i.owner}setCurrent(n){this.current=n,this.updatedAt=zt.now(),this.canTrackVelocity===null&&n!==void 0&&(this.canTrackVelocity=Mv(this.current))}setPrevFrameValue(n=this.current){this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt}onChange(n){return this.on("change",n)}on(n,i){this.events[n]||(this.events[n]=new gu);const o=this.events[n].add(i);return n==="change"?()=>{o(),Ce.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const n in this.events)this.events[n].clear()}attach(n,i){this.passiveEffect=n,this.stopPassiveEffect=i}set(n,i=!0){!i||!this.passiveEffect?this.updateAndNotify(n,i):this.passiveEffect(n,this.updateAndNotify)}setWithVelocity(n,i,o){this.set(i),this.prev=void 0,this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt-o}jump(n,i=!0){this.updateAndNotify(n),this.prev=n,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const n=zt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||n-this.updatedAt>Am)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,Am);return hp(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(n){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=n(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Os(r,n){return new Tv(r,n)}function Av(r,n,i){r.hasValue(n)?r.getValue(n).set(i):r.addValue(n,Os(i))}function Dv(r,n){const i=Eo(r,n);let{transitionEnd:o={},transition:a={},...u}=i||{};u={...u,...o};for(const d in u){const m=Wy(u[d]);Av(r,d,m)}}function Nv(r){return!!(et(r)&&r.add)}function Nl(r,n){const i=r.getValue("willChange");if(Nv(i))return i.add(n)}function gp(r){return r.props[Gf]}const yp=(r,n,i)=>(((1-3*i+3*n)*r+(3*i-6*n))*r+3*n)*r,Fv=1e-7,Rv=12;function _v(r,n,i,o,a){let u,d,m=0;do d=n+(i-n)/2,u=yp(d,o,a)-r,u>0?i=d:n=d;while(Math.abs(u)>Fv&&++m<Rv);return d}function Us(r,n,i,o){if(r===n&&i===o)return ht;const a=u=>_v(u,0,1,r,i);return u=>u===0||u===1?u:yp(a(u),n,o)}const vp=r=>n=>n<=.5?r(2*n)/2:(2-r(2*(1-n)))/2,wp=r=>n=>1-r(1-n),Ep=Us(.33,1.53,.69,.99),yu=wp(Ep),Sp=vp(yu),xp=r=>(r*=2)<1?.5*yu(r):.5*(2-Math.pow(2,-10*(r-1))),vu=r=>1-Math.sin(Math.acos(r)),kp=wp(vu),Cp=vp(vu),Ip=r=>/^0[^.\s]+$/u.test(r);function Ov(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||Ip(r):!0}const As=r=>Math.round(r*1e5)/1e5,wu=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function jv(r){return r==null}const $v=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Eu=(r,n)=>i=>!!(typeof i=="string"&&$v.test(i)&&i.startsWith(r)||n&&!jv(i)&&Object.prototype.hasOwnProperty.call(i,n)),bp=(r,n,i)=>o=>{if(typeof o!="string")return o;const[a,u,d,m]=o.match(wu);return{[r]:parseFloat(a),[n]:parseFloat(u),[i]:parseFloat(d),alpha:m!==void 0?parseFloat(m):1}},Vv=r=>nn(0,255,r),vl={...Fi,transform:r=>Math.round(Vv(r))},Jn={test:Eu("rgb","red"),parse:bp("red","green","blue"),transform:({red:r,green:n,blue:i,alpha:o=1})=>"rgba("+vl.transform(r)+", "+vl.transform(n)+", "+vl.transform(i)+", "+As(_s.transform(o))+")"};function Uv(r){let n="",i="",o="",a="";return r.length>5?(n=r.substring(1,3),i=r.substring(3,5),o=r.substring(5,7),a=r.substring(7,9)):(n=r.substring(1,2),i=r.substring(2,3),o=r.substring(3,4),a=r.substring(4,5),n+=n,i+=i,o+=o,a+=a),{red:parseInt(n,16),green:parseInt(i,16),blue:parseInt(o,16),alpha:a?parseInt(a,16)/255:1}}const Fl={test:Eu("#"),parse:Uv,transform:Jn.transform},Pi={test:Eu("hsl","hue"),parse:bp("hue","saturation","lightness"),transform:({hue:r,saturation:n,lightness:i,alpha:o=1})=>"hsla("+Math.round(r)+", "+Ut.transform(As(n))+", "+Ut.transform(As(i))+", "+As(_s.transform(o))+")"},Ze={test:r=>Jn.test(r)||Fl.test(r)||Pi.test(r),parse:r=>Jn.test(r)?Jn.parse(r):Pi.test(r)?Pi.parse(r):Fl.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?Jn.transform(r):Pi.transform(r)},zv=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Hv(r){var n,i;return isNaN(r)&&typeof r=="string"&&(((n=r.match(wu))===null||n===void 0?void 0:n.length)||0)+(((i=r.match(zv))===null||i===void 0?void 0:i.length)||0)>0}const Pp="number",Bp="color",Wv="var",Gv="var(",Dm="${}",Kv=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function js(r){const n=r.toString(),i=[],o={color:[],number:[],var:[]},a=[];let u=0;const m=n.replace(Kv,p=>(Ze.test(p)?(o.color.push(u),a.push(Bp),i.push(Ze.parse(p))):p.startsWith(Gv)?(o.var.push(u),a.push(Wv),i.push(p)):(o.number.push(u),a.push(Pp),i.push(parseFloat(p))),++u,Dm)).split(Dm);return{values:i,split:m,indexes:o,types:a}}function Lp(r){return js(r).values}function Mp(r){const{split:n,types:i}=js(r),o=n.length;return a=>{let u="";for(let d=0;d<o;d++)if(u+=n[d],a[d]!==void 0){const m=i[d];m===Pp?u+=As(a[d]):m===Bp?u+=Ze.transform(a[d]):u+=a[d]}return u}}const Jv=r=>typeof r=="number"?0:r;function Yv(r){const n=Lp(r);return Mp(r)(n.map(Jv))}const Bn={test:Hv,parse:Lp,createTransformer:Mp,getAnimatableNone:Yv},qv=new Set(["brightness","contrast","saturate","opacity"]);function Qv(r){const[n,i]=r.slice(0,-1).split("(");if(n==="drop-shadow")return r;const[o]=i.match(wu)||[];if(!o)return r;const a=i.replace(o,"");let u=qv.has(n)?1:0;return o!==i&&(u*=100),n+"("+u+a+")"}const Xv=/\b([a-z-]*)\(.*?\)/gu,Rl={...Bn,getAnimatableNone:r=>{const n=r.match(Xv);return n?n.map(Qv).join(" "):r}},Zv={...su,color:Ze,backgroundColor:Ze,outlineColor:Ze,fill:Ze,stroke:Ze,borderColor:Ze,borderTopColor:Ze,borderRightColor:Ze,borderBottomColor:Ze,borderLeftColor:Ze,filter:Rl,WebkitFilter:Rl},Su=r=>Zv[r];function Tp(r,n){let i=Su(r);return i!==Rl&&(i=Bn),i.getAnimatableNone?i.getAnimatableNone(n):void 0}const e0=new Set(["auto","none","0"]);function t0(r,n,i){let o=0,a;for(;o<r.length&&!a;){const u=r[o];typeof u=="string"&&!e0.has(u)&&js(u).values.length&&(a=r[o]),o++}if(a&&i)for(const u of n)r[u]=Tp(i,a)}const Nm=r=>r===Fi||r===te,Fm=(r,n)=>parseFloat(r.split(", ")[n]),Rm=(r,n)=>(i,{transform:o})=>{if(o==="none"||!o)return 0;const a=o.match(/^matrix3d\((.+)\)$/u);if(a)return Fm(a[1],n);{const u=o.match(/^matrix\((.+)\)$/u);return u?Fm(u[1],r):0}},n0=new Set(["x","y","z"]),i0=Ni.filter(r=>!n0.has(r));function s0(r){const n=[];return i0.forEach(i=>{const o=r.getValue(i);o!==void 0&&(n.push([i,o.get()]),o.set(i.startsWith("scale")?1:0))}),n}const Di={width:({x:r},{paddingLeft:n="0",paddingRight:i="0"})=>r.max-r.min-parseFloat(n)-parseFloat(i),height:({y:r},{paddingTop:n="0",paddingBottom:i="0"})=>r.max-r.min-parseFloat(n)-parseFloat(i),top:(r,{top:n})=>parseFloat(n),left:(r,{left:n})=>parseFloat(n),bottom:({y:r},{top:n})=>parseFloat(n)+(r.max-r.min),right:({x:r},{left:n})=>parseFloat(n)+(r.max-r.min),x:Rm(4,13),y:Rm(5,14)};Di.translateX=Di.x;Di.translateY=Di.y;const Yn=new Set;let _l=!1,Ol=!1;function Ap(){if(Ol){const r=Array.from(Yn).filter(o=>o.needsMeasurement),n=new Set(r.map(o=>o.element)),i=new Map;n.forEach(o=>{const a=s0(o);a.length&&(i.set(o,a),o.render())}),r.forEach(o=>o.measureInitialState()),n.forEach(o=>{o.render();const a=i.get(o);a&&a.forEach(([u,d])=>{var m;(m=o.getValue(u))===null||m===void 0||m.set(d)})}),r.forEach(o=>o.measureEndState()),r.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}Ol=!1,_l=!1,Yn.forEach(r=>r.complete()),Yn.clear()}function Dp(){Yn.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(Ol=!0)})}function r0(){Dp(),Ap()}class xu{constructor(n,i,o,a,u,d=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...n],this.onComplete=i,this.name=o,this.motionValue=a,this.element=u,this.isAsync=d}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Yn.add(this),_l||(_l=!0,Ce.read(Dp),Ce.resolveKeyframes(Ap))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:n,name:i,element:o,motionValue:a}=this;for(let u=0;u<n.length;u++)if(n[u]===null)if(u===0){const d=a?.get(),m=n[n.length-1];if(d!==void 0)n[0]=d;else if(o&&i){const p=o.readValue(i,m);p!=null&&(n[0]=p)}n[0]===void 0&&(n[0]=m),a&&d===void 0&&a.set(n[0])}else n[u]=n[u-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Yn.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Yn.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Np=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r),o0=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function a0(r){const n=o0.exec(r);if(!n)return[,];const[,i,o,a]=n;return[`--${i??o}`,a]}function Fp(r,n,i=1){const[o,a]=a0(r);if(!o)return;const u=window.getComputedStyle(n).getPropertyValue(o);if(u){const d=u.trim();return Np(d)?parseFloat(d):d}return iu(a)?Fp(a,n,i+1):a}const Rp=r=>n=>n.test(r),l0={test:r=>r==="auto",parse:r=>r},_p=[Fi,te,Ut,bn,Qy,qy,l0],_m=r=>_p.find(Rp(r));class Op extends xu{constructor(n,i,o,a,u){super(n,i,o,a,u,!0)}readKeyframes(){const{unresolvedKeyframes:n,element:i,name:o}=this;if(!i||!i.current)return;super.readKeyframes();for(let p=0;p<n.length;p++){let h=n[p];if(typeof h=="string"&&(h=h.trim(),iu(h))){const g=Fp(h,i.current);g!==void 0&&(n[p]=g),p===n.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!pp.has(o)||n.length!==2)return;const[a,u]=n,d=_m(a),m=_m(u);if(d!==m)if(Nm(d)&&Nm(m))for(let p=0;p<n.length;p++){const h=n[p];typeof h=="string"&&(n[p]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:n,name:i}=this,o=[];for(let a=0;a<n.length;a++)Ov(n[a])&&o.push(a);o.length&&t0(n,o,i)}measureInitialState(){const{element:n,unresolvedKeyframes:i,name:o}=this;if(!n||!n.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Di[o](n.measureViewportBox(),window.getComputedStyle(n.current)),i[0]=this.measuredOrigin;const a=i[i.length-1];a!==void 0&&n.getValue(o,a).jump(a,!1)}measureEndState(){var n;const{element:i,name:o,unresolvedKeyframes:a}=this;if(!i||!i.current)return;const u=i.getValue(o);u&&u.jump(this.measuredOrigin,!1);const d=a.length-1,m=a[d];a[d]=Di[o](i.measureViewportBox(),window.getComputedStyle(i.current)),m!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=m),!((n=this.removedTransforms)===null||n===void 0)&&n.length&&this.removedTransforms.forEach(([p,h])=>{i.getValue(p).set(h)}),this.resolveNoneKeyframes()}}const Om=(r,n)=>n==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(Bn.test(r)||r==="0")&&!r.startsWith("url("));function u0(r){const n=r[0];if(r.length===1)return!0;for(let i=0;i<r.length;i++)if(r[i]!==n)return!0}function c0(r,n,i,o){const a=r[0];if(a===null)return!1;if(n==="display"||n==="visibility")return!0;const u=r[r.length-1],d=Om(a,n),m=Om(u,n);return!d||!m?!1:u0(r)||(i==="spring"||du(i))&&o}const d0=r=>r!==null;function So(r,{repeat:n,repeatType:i="loop"},o){const a=r.filter(d0),u=n&&i!=="loop"&&n%2===1?0:a.length-1;return!u||o===void 0?a[u]:o}const m0=40;class jp{constructor({autoplay:n=!0,delay:i=0,type:o="keyframes",repeat:a=0,repeatDelay:u=0,repeatType:d="loop",...m}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=zt.now(),this.options={autoplay:n,delay:i,type:o,repeat:a,repeatDelay:u,repeatType:d,...m},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>m0?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&r0(),this._resolved}onKeyframesResolved(n,i){this.resolvedAt=zt.now(),this.hasAttemptedResolve=!0;const{name:o,type:a,velocity:u,delay:d,onComplete:m,onUpdate:p,isGenerator:h}=this.options;if(!h&&!c0(n,o,a,u))if(d)this.options.duration=0;else{p&&p(So(n,this.options,i)),m&&m(),this.resolveFinishedPromise();return}const g=this.initPlayback(n,i);g!==!1&&(this._resolved={keyframes:n,finalKeyframe:i,...g},this.onPostResolved())}onPostResolved(){}then(n,i){return this.currentFinishedPromise.then(n,i)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(n=>{this.resolveFinishedPromise=n})}}const Be=(r,n,i)=>r+(n-r)*i;function wl(r,n,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?r+(n-r)*6*i:i<1/2?n:i<2/3?r+(n-r)*(2/3-i)*6:r}function f0({hue:r,saturation:n,lightness:i,alpha:o}){r/=360,n/=100,i/=100;let a=0,u=0,d=0;if(!n)a=u=d=i;else{const m=i<.5?i*(1+n):i+n-i*n,p=2*i-m;a=wl(p,m,r+1/3),u=wl(p,m,r),d=wl(p,m,r-1/3)}return{red:Math.round(a*255),green:Math.round(u*255),blue:Math.round(d*255),alpha:o}}function fo(r,n){return i=>i>0?n:r}const El=(r,n,i)=>{const o=r*r,a=i*(n*n-o)+o;return a<0?0:Math.sqrt(a)},p0=[Fl,Jn,Pi],h0=r=>p0.find(n=>n.test(r));function jm(r){const n=h0(r);if(!n)return!1;let i=n.parse(r);return n===Pi&&(i=f0(i)),i}const $m=(r,n)=>{const i=jm(r),o=jm(n);if(!i||!o)return fo(r,n);const a={...i};return u=>(a.red=El(i.red,o.red,u),a.green=El(i.green,o.green,u),a.blue=El(i.blue,o.blue,u),a.alpha=Be(i.alpha,o.alpha,u),Jn.transform(a))},g0=(r,n)=>i=>n(r(i)),zs=(...r)=>r.reduce(g0),jl=new Set(["none","hidden"]);function y0(r,n){return jl.has(r)?i=>i<=0?r:n:i=>i>=1?n:r}function v0(r,n){return i=>Be(r,n,i)}function ku(r){return typeof r=="number"?v0:typeof r=="string"?iu(r)?fo:Ze.test(r)?$m:S0:Array.isArray(r)?$p:typeof r=="object"?Ze.test(r)?$m:w0:fo}function $p(r,n){const i=[...r],o=i.length,a=r.map((u,d)=>ku(u)(u,n[d]));return u=>{for(let d=0;d<o;d++)i[d]=a[d](u);return i}}function w0(r,n){const i={...r,...n},o={};for(const a in i)r[a]!==void 0&&n[a]!==void 0&&(o[a]=ku(r[a])(r[a],n[a]));return a=>{for(const u in o)i[u]=o[u](a);return i}}function E0(r,n){var i;const o=[],a={color:0,var:0,number:0};for(let u=0;u<n.values.length;u++){const d=n.types[u],m=r.indexes[d][a[d]],p=(i=r.values[m])!==null&&i!==void 0?i:0;o[u]=p,a[d]++}return o}const S0=(r,n)=>{const i=Bn.createTransformer(n),o=js(r),a=js(n);return o.indexes.var.length===a.indexes.var.length&&o.indexes.color.length===a.indexes.color.length&&o.indexes.number.length>=a.indexes.number.length?jl.has(r)&&!a.values.length||jl.has(n)&&!o.values.length?y0(r,n):zs($p(E0(o,a),a.values),i):fo(r,n)};function Vp(r,n,i){return typeof r=="number"&&typeof n=="number"&&typeof i=="number"?Be(r,n,i):ku(r)(r,n)}const x0=5;function Up(r,n,i){const o=Math.max(n-x0,0);return hp(i-r(o),n-o)}const Te={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Sl=.001;function k0({duration:r=Te.duration,bounce:n=Te.bounce,velocity:i=Te.velocity,mass:o=Te.mass}){let a,u,d=1-n;d=nn(Te.minDamping,Te.maxDamping,d),r=nn(Te.minDuration,Te.maxDuration,tn(r)),d<1?(a=h=>{const g=h*d,v=g*r,w=g-i,S=$l(h,d),b=Math.exp(-v);return Sl-w/S*b},u=h=>{const v=h*d*r,w=v*i+i,S=Math.pow(d,2)*Math.pow(h,2)*r,b=Math.exp(-v),T=$l(Math.pow(h,2),d);return(-a(h)+Sl>0?-1:1)*((w-S)*b)/T}):(a=h=>{const g=Math.exp(-h*r),v=(h-i)*r+1;return-Sl+g*v},u=h=>{const g=Math.exp(-h*r),v=(i-h)*(r*r);return g*v});const m=5/r,p=I0(a,u,m);if(r=en(r),isNaN(p))return{stiffness:Te.stiffness,damping:Te.damping,duration:r};{const h=Math.pow(p,2)*o;return{stiffness:h,damping:d*2*Math.sqrt(o*h),duration:r}}}const C0=12;function I0(r,n,i){let o=i;for(let a=1;a<C0;a++)o=o-r(o)/n(o);return o}function $l(r,n){return r*Math.sqrt(1-n*n)}const b0=["duration","bounce"],P0=["stiffness","damping","mass"];function Vm(r,n){return n.some(i=>r[i]!==void 0)}function B0(r){let n={velocity:Te.velocity,stiffness:Te.stiffness,damping:Te.damping,mass:Te.mass,isResolvedFromDuration:!1,...r};if(!Vm(r,P0)&&Vm(r,b0))if(r.visualDuration){const i=r.visualDuration,o=2*Math.PI/(i*1.2),a=o*o,u=2*nn(.05,1,1-(r.bounce||0))*Math.sqrt(a);n={...n,mass:Te.mass,stiffness:a,damping:u}}else{const i=k0(r);n={...n,...i,mass:Te.mass},n.isResolvedFromDuration=!0}return n}function zp(r=Te.visualDuration,n=Te.bounce){const i=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:n}:r;let{restSpeed:o,restDelta:a}=i;const u=i.keyframes[0],d=i.keyframes[i.keyframes.length-1],m={done:!1,value:u},{stiffness:p,damping:h,mass:g,duration:v,velocity:w,isResolvedFromDuration:S}=B0({...i,velocity:-tn(i.velocity||0)}),b=w||0,T=h/(2*Math.sqrt(p*g)),D=d-u,N=tn(Math.sqrt(p/g)),V=Math.abs(D)<5;o||(o=V?Te.restSpeed.granular:Te.restSpeed.default),a||(a=V?Te.restDelta.granular:Te.restDelta.default);let A;if(T<1){const F=$l(N,T);A=J=>{const ie=Math.exp(-T*N*J);return d-ie*((b+T*N*D)/F*Math.sin(F*J)+D*Math.cos(F*J))}}else if(T===1)A=F=>d-Math.exp(-N*F)*(D+(b+N*D)*F);else{const F=N*Math.sqrt(T*T-1);A=J=>{const ie=Math.exp(-T*N*J),Q=Math.min(F*J,300);return d-ie*((b+T*N*D)*Math.sinh(Q)+F*D*Math.cosh(Q))/F}}const z={calculatedDuration:S&&v||null,next:F=>{const J=A(F);if(S)m.done=F>=v;else{let ie=0;T<1&&(ie=F===0?en(b):Up(A,F,J));const Q=Math.abs(ie)<=o,me=Math.abs(d-J)<=a;m.done=Q&&me}return m.value=m.done?d:J,m},toString:()=>{const F=Math.min(ap(z),Al),J=lp(ie=>z.next(F*ie).value,F,30);return F+"ms "+J}};return z}function Um({keyframes:r,velocity:n=0,power:i=.8,timeConstant:o=325,bounceDamping:a=10,bounceStiffness:u=500,modifyTarget:d,min:m,max:p,restDelta:h=.5,restSpeed:g}){const v=r[0],w={done:!1,value:v},S=Q=>m!==void 0&&Q<m||p!==void 0&&Q>p,b=Q=>m===void 0?p:p===void 0||Math.abs(m-Q)<Math.abs(p-Q)?m:p;let T=i*n;const D=v+T,N=d===void 0?D:d(D);N!==D&&(T=N-v);const V=Q=>-T*Math.exp(-Q/o),A=Q=>N+V(Q),z=Q=>{const me=V(Q),ve=A(Q);w.done=Math.abs(me)<=h,w.value=w.done?N:ve};let F,J;const ie=Q=>{S(w.value)&&(F=Q,J=zp({keyframes:[w.value,b(w.value)],velocity:Up(A,Q,w.value),damping:a,stiffness:u,restDelta:h,restSpeed:g}))};return ie(0),{calculatedDuration:null,next:Q=>{let me=!1;return!J&&F===void 0&&(me=!0,z(Q),ie(Q)),F!==void 0&&Q>=F?J.next(Q-F):(!me&&z(Q),w)}}}const L0=Us(.42,0,1,1),M0=Us(0,0,.58,1),Hp=Us(.42,0,.58,1),T0=r=>Array.isArray(r)&&typeof r[0]!="number",A0={linear:ht,easeIn:L0,easeInOut:Hp,easeOut:M0,circIn:vu,circInOut:Cp,circOut:kp,backIn:yu,backInOut:Sp,backOut:Ep,anticipate:xp},zm=r=>{if(mu(r)){Vf(r.length===4);const[n,i,o,a]=r;return Us(n,i,o,a)}else if(typeof r=="string")return A0[r];return r};function D0(r,n,i){const o=[],a=i||Vp,u=r.length-1;for(let d=0;d<u;d++){let m=a(r[d],r[d+1]);if(n){const p=Array.isArray(n)?n[d]||ht:n;m=zs(p,m)}o.push(m)}return o}function N0(r,n,{clamp:i=!0,ease:o,mixer:a}={}){const u=r.length;if(Vf(u===n.length),u===1)return()=>n[0];if(u===2&&n[0]===n[1])return()=>n[1];const d=r[0]===r[1];r[0]>r[u-1]&&(r=[...r].reverse(),n=[...n].reverse());const m=D0(n,o,a),p=m.length,h=g=>{if(d&&g<r[0])return n[0];let v=0;if(p>1)for(;v<r.length-2&&!(g<r[v+1]);v++);const w=Ti(r[v],r[v+1],g);return m[v](w)};return i?g=>h(nn(r[0],r[u-1],g)):h}function F0(r,n){const i=r[r.length-1];for(let o=1;o<=n;o++){const a=Ti(0,n,o);r.push(Be(i,1,a))}}function R0(r){const n=[0];return F0(n,r.length-1),n}function _0(r,n){return r.map(i=>i*n)}function O0(r,n){return r.map(()=>n||Hp).splice(0,r.length-1)}function po({duration:r=300,keyframes:n,times:i,ease:o="easeInOut"}){const a=T0(o)?o.map(zm):zm(o),u={done:!1,value:n[0]},d=_0(i&&i.length===n.length?i:R0(n),r),m=N0(d,n,{ease:Array.isArray(a)?a:O0(n,a)});return{calculatedDuration:r,next:p=>(u.value=m(p),u.done=p>=r,u)}}const j0=r=>{const n=({timestamp:i})=>r(i);return{start:()=>Ce.update(n,!0),stop:()=>Pn(n),now:()=>Ke.isProcessing?Ke.timestamp:zt.now()}},$0={decay:Um,inertia:Um,tween:po,keyframes:po,spring:zp},V0=r=>r/100;class Cu extends jp{constructor(n){super(n),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:p}=this.options;p&&p()};const{name:i,motionValue:o,element:a,keyframes:u}=this.options,d=a?.KeyframeResolver||xu,m=(p,h)=>this.onKeyframesResolved(p,h);this.resolver=new d(u,m,i,o,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(n){const{type:i="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:u,velocity:d=0}=this.options,m=du(i)?i:$0[i]||po;let p,h;m!==po&&typeof n[0]!="number"&&(p=zs(V0,Vp(n[0],n[1])),n=[0,100]);const g=m({...this.options,keyframes:n});u==="mirror"&&(h=m({...this.options,keyframes:[...n].reverse(),velocity:-d})),g.calculatedDuration===null&&(g.calculatedDuration=ap(g));const{calculatedDuration:v}=g,w=v+a,S=w*(o+1)-a;return{generator:g,mirroredGenerator:h,mapPercentToKeyframes:p,calculatedDuration:v,resolvedDuration:w,totalDuration:S}}onPostResolved(){const{autoplay:n=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!n?this.pause():this.state=this.pendingPlayState}tick(n,i=!1){const{resolved:o}=this;if(!o){const{keyframes:Q}=this.options;return{done:!0,value:Q[Q.length-1]}}const{finalKeyframe:a,generator:u,mirroredGenerator:d,mapPercentToKeyframes:m,keyframes:p,calculatedDuration:h,totalDuration:g,resolvedDuration:v}=o;if(this.startTime===null)return u.next(0);const{delay:w,repeat:S,repeatType:b,repeatDelay:T,onUpdate:D}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,n):this.speed<0&&(this.startTime=Math.min(n-g/this.speed,this.startTime)),i?this.currentTime=n:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(n-this.startTime)*this.speed;const N=this.currentTime-w*(this.speed>=0?1:-1),V=this.speed>=0?N<0:N>g;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=g);let A=this.currentTime,z=u;if(S){const Q=Math.min(this.currentTime,g)/v;let me=Math.floor(Q),ve=Q%1;!ve&&Q>=1&&(ve=1),ve===1&&me--,me=Math.min(me,S+1),me%2&&(b==="reverse"?(ve=1-ve,T&&(ve-=T/v)):b==="mirror"&&(z=d)),A=nn(0,1,ve)*v}const F=V?{done:!1,value:p[0]}:z.next(A);m&&(F.value=m(F.value));let{done:J}=F;!V&&h!==null&&(J=this.speed>=0?this.currentTime>=g:this.currentTime<=0);const ie=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&J);return ie&&a!==void 0&&(F.value=So(p,this.options,a)),D&&D(F.value),ie&&this.finish(),F}get duration(){const{resolved:n}=this;return n?tn(n.calculatedDuration):0}get time(){return tn(this.currentTime)}set time(n){n=en(n),this.currentTime=n,this.holdTime!==null||this.speed===0?this.holdTime=n:this.driver&&(this.startTime=this.driver.now()-n/this.speed)}get speed(){return this.playbackSpeed}set speed(n){const i=this.playbackSpeed!==n;this.playbackSpeed=n,i&&(this.time=tn(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:n=j0,onPlay:i,startTime:o}=this.options;this.driver||(this.driver=n(u=>this.tick(u))),i&&i();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=o??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var n;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(n=this.currentTime)!==null&&n!==void 0?n:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:n}=this.options;n&&n()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(n){return this.startTime=0,this.tick(n,!0)}}const U0=new Set(["opacity","clipPath","filter","transform"]);function z0(r,n,i,{delay:o=0,duration:a=300,repeat:u=0,repeatType:d="loop",ease:m="easeInOut",times:p}={}){const h={[n]:i};p&&(h.offset=p);const g=cp(m,a);return Array.isArray(g)&&(h.easing=g),r.animate(h,{delay:o,duration:a,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:u+1,direction:d==="reverse"?"alternate":"normal"})}const H0=ql(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ho=10,W0=2e4;function G0(r){return du(r.type)||r.type==="spring"||!up(r.ease)}function K0(r,n){const i=new Cu({...n,keyframes:r,repeat:0,delay:0,isGenerator:!0});let o={done:!1,value:r[0]};const a=[];let u=0;for(;!o.done&&u<W0;)o=i.sample(u),a.push(o.value),u+=ho;return{times:void 0,keyframes:a,duration:u-ho,ease:"linear"}}const Wp={anticipate:xp,backInOut:Sp,circInOut:Cp};function J0(r){return r in Wp}class Hm extends jp{constructor(n){super(n);const{name:i,motionValue:o,element:a,keyframes:u}=this.options;this.resolver=new Op(u,(d,m)=>this.onKeyframesResolved(d,m),i,o,a),this.resolver.scheduleResolve()}initPlayback(n,i){let{duration:o=300,times:a,ease:u,type:d,motionValue:m,name:p,startTime:h}=this.options;if(!m.owner||!m.owner.current)return!1;if(typeof u=="string"&&mo()&&J0(u)&&(u=Wp[u]),G0(this.options)){const{onComplete:v,onUpdate:w,motionValue:S,element:b,...T}=this.options,D=K0(n,T);n=D.keyframes,n.length===1&&(n[1]=n[0]),o=D.duration,a=D.times,u=D.ease,d="keyframes"}const g=z0(m.owner.current,p,n,{...this.options,duration:o,times:a,ease:u});return g.startTime=h??this.calcStartTime(),this.pendingTimeline?(Bm(g,this.pendingTimeline),this.pendingTimeline=void 0):g.onfinish=()=>{const{onComplete:v}=this.options;m.set(So(n,this.options,i)),v&&v(),this.cancel(),this.resolveFinishedPromise()},{animation:g,duration:o,times:a,type:d,ease:u,keyframes:n}}get duration(){const{resolved:n}=this;if(!n)return 0;const{duration:i}=n;return tn(i)}get time(){const{resolved:n}=this;if(!n)return 0;const{animation:i}=n;return tn(i.currentTime||0)}set time(n){const{resolved:i}=this;if(!i)return;const{animation:o}=i;o.currentTime=en(n)}get speed(){const{resolved:n}=this;if(!n)return 1;const{animation:i}=n;return i.playbackRate}set speed(n){const{resolved:i}=this;if(!i)return;const{animation:o}=i;o.playbackRate=n}get state(){const{resolved:n}=this;if(!n)return"idle";const{animation:i}=n;return i.playState}get startTime(){const{resolved:n}=this;if(!n)return null;const{animation:i}=n;return i.startTime}attachTimeline(n){if(!this._resolved)this.pendingTimeline=n;else{const{resolved:i}=this;if(!i)return ht;const{animation:o}=i;Bm(o,n)}return ht}play(){if(this.isStopped)return;const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playState==="finished"&&this.updateFinishedPromise(),i.play()}pause(){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:n}=this;if(!n)return;const{animation:i,keyframes:o,duration:a,type:u,ease:d,times:m}=n;if(i.playState==="idle"||i.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:g,onComplete:v,element:w,...S}=this.options,b=new Cu({...S,keyframes:o,duration:a,type:u,ease:d,times:m,isGenerator:!0}),T=en(this.time);h.setWithVelocity(b.sample(T-ho).value,b.sample(T).value,ho)}const{onStop:p}=this.options;p&&p(),this.cancel()}complete(){const{resolved:n}=this;n&&n.animation.finish()}cancel(){const{resolved:n}=this;n&&n.animation.cancel()}static supports(n){const{motionValue:i,name:o,repeatDelay:a,repeatType:u,damping:d,type:m}=n;if(!i||!i.owner||!(i.owner.current instanceof HTMLElement))return!1;const{onUpdate:p,transformTemplate:h}=i.owner.getProps();return H0()&&o&&U0.has(o)&&!p&&!h&&!a&&u!=="mirror"&&d!==0&&m!=="inertia"}}const Y0={type:"spring",stiffness:500,damping:25,restSpeed:10},q0=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),Q0={type:"keyframes",duration:.8},X0={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Z0=(r,{keyframes:n})=>n.length>2?Q0:qn.has(r)?r.startsWith("scale")?q0(n[1]):Y0:X0;function ew({when:r,delay:n,delayChildren:i,staggerChildren:o,staggerDirection:a,repeat:u,repeatType:d,repeatDelay:m,from:p,elapsed:h,...g}){return!!Object.keys(g).length}const Iu=(r,n,i,o={},a,u)=>d=>{const m=cu(o,r)||{},p=m.delay||o.delay||0;let{elapsed:h=0}=o;h=h-en(p);let g={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:n.getVelocity(),...m,delay:-h,onUpdate:w=>{n.set(w),m.onUpdate&&m.onUpdate(w)},onComplete:()=>{d(),m.onComplete&&m.onComplete()},name:r,motionValue:n,element:u?void 0:a};ew(m)||(g={...g,...Z0(r,g)}),g.duration&&(g.duration=en(g.duration)),g.repeatDelay&&(g.repeatDelay=en(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(v=!0)),v&&!u&&n.get()!==void 0){const w=So(g.keyframes,m);if(w!==void 0)return Ce.update(()=>{g.onUpdate(w),g.onComplete()}),new wv([])}return!u&&Hm.supports(g)?new Hm(g):new Cu(g)};function tw({protectedKeys:r,needsAnimating:n},i){const o=r.hasOwnProperty(i)&&n[i]!==!0;return n[i]=!1,o}function Gp(r,n,{delay:i=0,transitionOverride:o,type:a}={}){var u;let{transition:d=r.getDefaultTransition(),transitionEnd:m,...p}=n;o&&(d=o);const h=[],g=a&&r.animationState&&r.animationState.getState()[a];for(const v in p){const w=r.getValue(v,(u=r.latestValues[v])!==null&&u!==void 0?u:null),S=p[v];if(S===void 0||g&&tw(g,v))continue;const b={delay:i,...cu(d||{},v)};let T=!1;if(window.MotionHandoffAnimation){const N=gp(r);if(N){const V=window.MotionHandoffAnimation(N,v,Ce);V!==null&&(b.startTime=V,T=!0)}}Nl(r,v),w.start(Iu(v,w,S,r.shouldReduceMotion&&pp.has(v)?{type:!1}:b,r,T));const D=w.animation;D&&h.push(D)}return m&&Promise.all(h).then(()=>{Ce.update(()=>{m&&Dv(r,m)})}),h}function Vl(r,n,i={}){var o;const a=Eo(r,n,i.type==="exit"?(o=r.presenceContext)===null||o===void 0?void 0:o.custom:void 0);let{transition:u=r.getDefaultTransition()||{}}=a||{};i.transitionOverride&&(u=i.transitionOverride);const d=a?()=>Promise.all(Gp(r,a,i)):()=>Promise.resolve(),m=r.variantChildren&&r.variantChildren.size?(h=0)=>{const{delayChildren:g=0,staggerChildren:v,staggerDirection:w}=u;return nw(r,n,g+h,v,w,i)}:()=>Promise.resolve(),{when:p}=u;if(p){const[h,g]=p==="beforeChildren"?[d,m]:[m,d];return h().then(()=>g())}else return Promise.all([d(),m(i.delay)])}function nw(r,n,i=0,o=0,a=1,u){const d=[],m=(r.variantChildren.size-1)*o,p=a===1?(h=0)=>h*o:(h=0)=>m-h*o;return Array.from(r.variantChildren).sort(iw).forEach((h,g)=>{h.notify("AnimationStart",n),d.push(Vl(h,n,{...u,delay:i+p(g)}).then(()=>h.notify("AnimationComplete",n)))}),Promise.all(d)}function iw(r,n){return r.sortNodePosition(n)}function sw(r,n,i={}){r.notify("AnimationStart",n);let o;if(Array.isArray(n)){const a=n.map(u=>Vl(r,u,i));o=Promise.all(a)}else if(typeof n=="string")o=Vl(r,n,i);else{const a=typeof n=="function"?Eo(r,n,i.custom):n;o=Promise.all(Gp(r,a,i))}return o.then(()=>{r.notify("AnimationComplete",n)})}const rw=Xl.length;function Kp(r){if(!r)return;if(!r.isControllingVariants){const i=r.parent?Kp(r.parent)||{}:{};return r.props.initial!==void 0&&(i.initial=r.props.initial),i}const n={};for(let i=0;i<rw;i++){const o=Xl[i],a=r.props[o];(Rs(a)||a===!1)&&(n[o]=a)}return n}const ow=[...Ql].reverse(),aw=Ql.length;function lw(r){return n=>Promise.all(n.map(({animation:i,options:o})=>sw(r,i,o)))}function uw(r){let n=lw(r),i=Wm(),o=!0;const a=p=>(h,g)=>{var v;const w=Eo(r,g,p==="exit"?(v=r.presenceContext)===null||v===void 0?void 0:v.custom:void 0);if(w){const{transition:S,transitionEnd:b,...T}=w;h={...h,...T,...b}}return h};function u(p){n=p(r)}function d(p){const{props:h}=r,g=Kp(r.parent)||{},v=[],w=new Set;let S={},b=1/0;for(let D=0;D<aw;D++){const N=ow[D],V=i[N],A=h[N]!==void 0?h[N]:g[N],z=Rs(A),F=N===p?V.isActive:null;F===!1&&(b=D);let J=A===g[N]&&A!==h[N]&&z;if(J&&o&&r.manuallyAnimateOnMount&&(J=!1),V.protectedKeys={...S},!V.isActive&&F===null||!A&&!V.prevProp||vo(A)||typeof A=="boolean")continue;const ie=cw(V.prevProp,A);let Q=ie||N===p&&V.isActive&&!J&&z||D>b&&z,me=!1;const ve=Array.isArray(A)?A:[A];let we=ve.reduce(a(N),{});F===!1&&(we={});const{prevResolvedValues:Oe={}}=V,je={...Oe,...we},He=oe=>{Q=!0,w.has(oe)&&(me=!0,w.delete(oe)),V.needsAnimating[oe]=!0;const U=r.getValue(oe);U&&(U.liveStyle=!1)};for(const oe in je){const U=we[oe],X=Oe[oe];if(S.hasOwnProperty(oe))continue;let H=!1;Tl(U)&&Tl(X)?H=!op(U,X):H=U!==X,H?U!=null?He(oe):w.add(oe):U!==void 0&&w.has(oe)?He(oe):V.protectedKeys[oe]=!0}V.prevProp=A,V.prevResolvedValues=we,V.isActive&&(S={...S,...we}),o&&r.blockInitialAnimation&&(Q=!1),Q&&(!(J&&ie)||me)&&v.push(...ve.map(oe=>({animation:oe,options:{type:N}})))}if(w.size){const D={};w.forEach(N=>{const V=r.getBaseTarget(N),A=r.getValue(N);A&&(A.liveStyle=!0),D[N]=V??null}),v.push({animation:D})}let T=!!v.length;return o&&(h.initial===!1||h.initial===h.animate)&&!r.manuallyAnimateOnMount&&(T=!1),o=!1,T?n(v):Promise.resolve()}function m(p,h){var g;if(i[p].isActive===h)return Promise.resolve();(g=r.variantChildren)===null||g===void 0||g.forEach(w=>{var S;return(S=w.animationState)===null||S===void 0?void 0:S.setActive(p,h)}),i[p].isActive=h;const v=d(p);for(const w in i)i[w].protectedKeys={};return v}return{animateChanges:d,setActive:m,setAnimateFunction:u,getState:()=>i,reset:()=>{i=Wm(),o=!0}}}function cw(r,n){return typeof n=="string"?n!==r:Array.isArray(n)?!op(n,r):!1}function Wn(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Wm(){return{animate:Wn(!0),whileInView:Wn(),whileHover:Wn(),whileTap:Wn(),whileDrag:Wn(),whileFocus:Wn(),exit:Wn()}}class Ln{constructor(n){this.isMounted=!1,this.node=n}update(){}}class dw extends Ln{constructor(n){super(n),n.animationState||(n.animationState=uw(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();vo(n)&&(this.unmountControls=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:i}=this.node.prevProps||{};n!==i&&this.updateAnimationControlsSubscription()}unmount(){var n;this.node.animationState.reset(),(n=this.unmountControls)===null||n===void 0||n.call(this)}}let mw=0;class fw extends Ln{constructor(){super(...arguments),this.id=mw++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:i}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===o)return;const a=this.node.animationState.setActive("exit",!n);i&&!n&&a.then(()=>i(this.id))}mount(){const{register:n}=this.node.presenceContext||{};n&&(this.unmount=n(this.id))}unmount(){}}const pw={animation:{Feature:dw},exit:{Feature:fw}};function $s(r,n,i,o={passive:!0}){return r.addEventListener(n,i,o),()=>r.removeEventListener(n,i)}function Hs(r){return{point:{x:r.pageX,y:r.pageY}}}const hw=r=>n=>fu(n)&&r(n,Hs(n));function Ds(r,n,i,o){return $s(r,n,hw(i),o)}const Gm=(r,n)=>Math.abs(r-n);function gw(r,n){const i=Gm(r.x,n.x),o=Gm(r.y,n.y);return Math.sqrt(i**2+o**2)}class Jp{constructor(n,i,{transformPagePoint:o,contextWindow:a,dragSnapToOrigin:u=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=kl(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,S=gw(v.offset,{x:0,y:0})>=3;if(!w&&!S)return;const{point:b}=v,{timestamp:T}=Ke;this.history.push({...b,timestamp:T});const{onStart:D,onMove:N}=this.handlers;w||(D&&D(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,v)},this.handlePointerMove=(v,w)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=xl(w,this.transformPagePoint),Ce.update(this.updatePoint,!0)},this.handlePointerUp=(v,w)=>{this.end();const{onEnd:S,onSessionEnd:b,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=kl(v.type==="pointercancel"?this.lastMoveEventInfo:xl(w,this.transformPagePoint),this.history);this.startEvent&&S&&S(v,D),b&&b(v,D)},!fu(n))return;this.dragSnapToOrigin=u,this.handlers=i,this.transformPagePoint=o,this.contextWindow=a||window;const d=Hs(n),m=xl(d,this.transformPagePoint),{point:p}=m,{timestamp:h}=Ke;this.history=[{...p,timestamp:h}];const{onSessionStart:g}=i;g&&g(n,kl(m,this.history)),this.removeListeners=zs(Ds(this.contextWindow,"pointermove",this.handlePointerMove),Ds(this.contextWindow,"pointerup",this.handlePointerUp),Ds(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(n){this.handlers=n}end(){this.removeListeners&&this.removeListeners(),Pn(this.updatePoint)}}function xl(r,n){return n?{point:n(r.point)}:r}function Km(r,n){return{x:r.x-n.x,y:r.y-n.y}}function kl({point:r},n){return{point:r,delta:Km(r,Yp(n)),offset:Km(r,yw(n)),velocity:vw(n,.1)}}function yw(r){return r[0]}function Yp(r){return r[r.length-1]}function vw(r,n){if(r.length<2)return{x:0,y:0};let i=r.length-1,o=null;const a=Yp(r);for(;i>=0&&(o=r[i],!(a.timestamp-o.timestamp>en(n)));)i--;if(!o)return{x:0,y:0};const u=tn(a.timestamp-o.timestamp);if(u===0)return{x:0,y:0};const d={x:(a.x-o.x)/u,y:(a.y-o.y)/u};return d.x===1/0&&(d.x=0),d.y===1/0&&(d.y=0),d}const qp=1e-4,ww=1-qp,Ew=1+qp,Qp=.01,Sw=0-Qp,xw=0+Qp;function gt(r){return r.max-r.min}function kw(r,n,i){return Math.abs(r-n)<=i}function Jm(r,n,i,o=.5){r.origin=o,r.originPoint=Be(n.min,n.max,r.origin),r.scale=gt(i)/gt(n),r.translate=Be(i.min,i.max,r.origin)-r.originPoint,(r.scale>=ww&&r.scale<=Ew||isNaN(r.scale))&&(r.scale=1),(r.translate>=Sw&&r.translate<=xw||isNaN(r.translate))&&(r.translate=0)}function Ns(r,n,i,o){Jm(r.x,n.x,i.x,o?o.originX:void 0),Jm(r.y,n.y,i.y,o?o.originY:void 0)}function Ym(r,n,i){r.min=i.min+n.min,r.max=r.min+gt(n)}function Cw(r,n,i){Ym(r.x,n.x,i.x),Ym(r.y,n.y,i.y)}function qm(r,n,i){r.min=n.min-i.min,r.max=r.min+gt(n)}function Fs(r,n,i){qm(r.x,n.x,i.x),qm(r.y,n.y,i.y)}function Iw(r,{min:n,max:i},o){return n!==void 0&&r<n?r=o?Be(n,r,o.min):Math.max(r,n):i!==void 0&&r>i&&(r=o?Be(i,r,o.max):Math.min(r,i)),r}function Qm(r,n,i){return{min:n!==void 0?r.min+n:void 0,max:i!==void 0?r.max+i-(r.max-r.min):void 0}}function bw(r,{top:n,left:i,bottom:o,right:a}){return{x:Qm(r.x,i,a),y:Qm(r.y,n,o)}}function Xm(r,n){let i=n.min-r.min,o=n.max-r.max;return n.max-n.min<r.max-r.min&&([i,o]=[o,i]),{min:i,max:o}}function Pw(r,n){return{x:Xm(r.x,n.x),y:Xm(r.y,n.y)}}function Bw(r,n){let i=.5;const o=gt(r),a=gt(n);return a>o?i=Ti(n.min,n.max-o,r.min):o>a&&(i=Ti(r.min,r.max-a,n.min)),nn(0,1,i)}function Lw(r,n){const i={};return n.min!==void 0&&(i.min=n.min-r.min),n.max!==void 0&&(i.max=n.max-r.min),i}const Ul=.35;function Mw(r=Ul){return r===!1?r=0:r===!0&&(r=Ul),{x:Zm(r,"left","right"),y:Zm(r,"top","bottom")}}function Zm(r,n,i){return{min:ef(r,n),max:ef(r,i)}}function ef(r,n){return typeof r=="number"?r:r[n]||0}const tf=()=>({translate:0,scale:1,origin:0,originPoint:0}),Bi=()=>({x:tf(),y:tf()}),nf=()=>({min:0,max:0}),Ne=()=>({x:nf(),y:nf()});function bt(r){return[r("x"),r("y")]}function Xp({top:r,left:n,right:i,bottom:o}){return{x:{min:n,max:i},y:{min:r,max:o}}}function Tw({x:r,y:n}){return{top:n.min,right:r.max,bottom:n.max,left:r.min}}function Aw(r,n){if(!n)return r;const i=n({x:r.left,y:r.top}),o=n({x:r.right,y:r.bottom});return{top:i.y,left:i.x,bottom:o.y,right:o.x}}function Cl(r){return r===void 0||r===1}function zl({scale:r,scaleX:n,scaleY:i}){return!Cl(r)||!Cl(n)||!Cl(i)}function Gn(r){return zl(r)||Zp(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function Zp(r){return sf(r.x)||sf(r.y)}function sf(r){return r&&r!=="0%"}function go(r,n,i){const o=r-i,a=n*o;return i+a}function rf(r,n,i,o,a){return a!==void 0&&(r=go(r,a,o)),go(r,i,o)+n}function Hl(r,n=0,i=1,o,a){r.min=rf(r.min,n,i,o,a),r.max=rf(r.max,n,i,o,a)}function eh(r,{x:n,y:i}){Hl(r.x,n.translate,n.scale,n.originPoint),Hl(r.y,i.translate,i.scale,i.originPoint)}const of=.999999999999,af=1.0000000000001;function Dw(r,n,i,o=!1){const a=i.length;if(!a)return;n.x=n.y=1;let u,d;for(let m=0;m<a;m++){u=i[m],d=u.projectionDelta;const{visualElement:p}=u.options;p&&p.props.style&&p.props.style.display==="contents"||(o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Mi(r,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),d&&(n.x*=d.x.scale,n.y*=d.y.scale,eh(r,d)),o&&Gn(u.latestValues)&&Mi(r,u.latestValues))}n.x<af&&n.x>of&&(n.x=1),n.y<af&&n.y>of&&(n.y=1)}function Li(r,n){r.min=r.min+n,r.max=r.max+n}function lf(r,n,i,o,a=.5){const u=Be(r.min,r.max,a);Hl(r,n,i,u,o)}function Mi(r,n){lf(r.x,n.x,n.scaleX,n.scale,n.originX),lf(r.y,n.y,n.scaleY,n.scale,n.originY)}function th(r,n){return Xp(Aw(r.getBoundingClientRect(),n))}function Nw(r,n,i){const o=th(r,i),{scroll:a}=n;return a&&(Li(o.x,a.offset.x),Li(o.y,a.offset.y)),o}const nh=({current:r})=>r?r.ownerDocument.defaultView:null,Fw=new WeakMap;class Rw{constructor(n){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ne(),this.visualElement=n}start(n,{snapToCursor:i=!1}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const a=g=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(Hs(g).point)},u=(g,v)=>{const{drag:w,dragPropagation:S,onDragStart:b}=this.getProps();if(w&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Bv(w),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),bt(D=>{let N=this.getAxisMotionValue(D).get()||0;if(Ut.test(N)){const{projection:V}=this.visualElement;if(V&&V.layout){const A=V.layout.layoutBox[D];A&&(N=gt(A)*(parseFloat(N)/100))}}this.originPoint[D]=N}),b&&Ce.postRender(()=>b(g,v)),Nl(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},d=(g,v)=>{const{dragPropagation:w,dragDirectionLock:S,onDirectionLock:b,onDrag:T}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:D}=v;if(S&&this.currentDirection===null){this.currentDirection=_w(D),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",v.point,D),this.updateAxis("y",v.point,D),this.visualElement.render(),T&&T(g,v)},m=(g,v)=>this.stop(g,v),p=()=>bt(g=>{var v;return this.getAnimationState(g)==="paused"&&((v=this.getAxisMotionValue(g).animation)===null||v===void 0?void 0:v.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new Jp(n,{onSessionStart:a,onStart:u,onMove:d,onSessionEnd:m,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:nh(this.visualElement)})}stop(n,i){const o=this.isDragging;if(this.cancel(),!o)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:u}=this.getProps();u&&Ce.postRender(()=>u(n,i))}cancel(){this.isDragging=!1;const{projection:n,animationState:i}=this.visualElement;n&&(n.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(n,i,o){const{drag:a}=this.getProps();if(!o||!io(n,a,this.currentDirection))return;const u=this.getAxisMotionValue(n);let d=this.originPoint[n]+o[n];this.constraints&&this.constraints[n]&&(d=Iw(d,this.constraints[n],this.elastic[n])),u.set(d)}resolveConstraints(){var n;const{dragConstraints:i,dragElastic:o}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(n=this.visualElement.projection)===null||n===void 0?void 0:n.layout,u=this.constraints;i&&bi(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&a?this.constraints=bw(a.layoutBox,i):this.constraints=!1,this.elastic=Mw(o),u!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&bt(d=>{this.constraints!==!1&&this.getAxisMotionValue(d)&&(this.constraints[d]=Lw(a.layoutBox[d],this.constraints[d]))})}resolveRefConstraints(){const{dragConstraints:n,onMeasureDragConstraints:i}=this.getProps();if(!n||!bi(n))return!1;const o=n.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const u=Nw(o,a.root,this.visualElement.getTransformPagePoint());let d=Pw(a.layout.layoutBox,u);if(i){const m=i(Tw(d));this.hasMutatedConstraints=!!m,m&&(d=Xp(m))}return d}startAnimation(n){const{drag:i,dragMomentum:o,dragElastic:a,dragTransition:u,dragSnapToOrigin:d,onDragTransitionEnd:m}=this.getProps(),p=this.constraints||{},h=bt(g=>{if(!io(g,i,this.currentDirection))return;let v=p&&p[g]||{};d&&(v={min:0,max:0});const w=a?200:1e6,S=a?40:1e7,b={type:"inertia",velocity:o?n[g]:0,bounceStiffness:w,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...u,...v};return this.startAxisValueAnimation(g,b)});return Promise.all(h).then(m)}startAxisValueAnimation(n,i){const o=this.getAxisMotionValue(n);return Nl(this.visualElement,n),o.start(Iu(n,o,0,i,this.visualElement,!1))}stopAnimation(){bt(n=>this.getAxisMotionValue(n).stop())}pauseAnimation(){bt(n=>{var i;return(i=this.getAxisMotionValue(n).animation)===null||i===void 0?void 0:i.pause()})}getAnimationState(n){var i;return(i=this.getAxisMotionValue(n).animation)===null||i===void 0?void 0:i.state}getAxisMotionValue(n){const i=`_drag${n.toUpperCase()}`,o=this.visualElement.getProps(),a=o[i];return a||this.visualElement.getValue(n,(o.initial?o.initial[n]:void 0)||0)}snapToCursor(n){bt(i=>{const{drag:o}=this.getProps();if(!io(i,o,this.currentDirection))return;const{projection:a}=this.visualElement,u=this.getAxisMotionValue(i);if(a&&a.layout){const{min:d,max:m}=a.layout.layoutBox[i];u.set(n[i]-Be(d,m,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:n,dragConstraints:i}=this.getProps(),{projection:o}=this.visualElement;if(!bi(i)||!o||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};bt(d=>{const m=this.getAxisMotionValue(d);if(m&&this.constraints!==!1){const p=m.get();a[d]=Bw({min:p,max:p},this.constraints[d])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),bt(d=>{if(!io(d,n,null))return;const m=this.getAxisMotionValue(d),{min:p,max:h}=this.constraints[d];m.set(Be(p,h,a[d]))})}addListeners(){if(!this.visualElement.current)return;Fw.set(this.visualElement,this);const n=this.visualElement.current,i=Ds(n,"pointerdown",p=>{const{drag:h,dragListener:g=!0}=this.getProps();h&&g&&this.start(p)}),o=()=>{const{dragConstraints:p}=this.getProps();bi(p)&&p.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,u=a.addEventListener("measure",o);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Ce.read(o);const d=$s(window,"resize",()=>this.scalePositionWithinConstraints()),m=a.addEventListener("didUpdate",(({delta:p,hasLayoutChanged:h})=>{this.isDragging&&h&&(bt(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=p[g].translate,v.set(v.get()+p[g].translate))}),this.visualElement.render())}));return()=>{d(),i(),u(),m&&m()}}getProps(){const n=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:o=!1,dragPropagation:a=!1,dragConstraints:u=!1,dragElastic:d=Ul,dragMomentum:m=!0}=n;return{...n,drag:i,dragDirectionLock:o,dragPropagation:a,dragConstraints:u,dragElastic:d,dragMomentum:m}}}function io(r,n,i){return(n===!0||n===r)&&(i===null||i===r)}function _w(r,n=10){let i=null;return Math.abs(r.y)>n?i="y":Math.abs(r.x)>n&&(i="x"),i}class Ow extends Ln{constructor(n){super(n),this.removeGroupControls=ht,this.removeListeners=ht,this.controls=new Rw(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ht}unmount(){this.removeGroupControls(),this.removeListeners()}}const uf=r=>(n,i)=>{r&&Ce.postRender(()=>r(n,i))};class jw extends Ln{constructor(){super(...arguments),this.removePointerDownListener=ht}onPointerDown(n){this.session=new Jp(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:nh(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:i,onPan:o,onPanEnd:a}=this.node.getProps();return{onSessionStart:uf(n),onStart:uf(i),onMove:o,onEnd:(u,d)=>{delete this.session,a&&Ce.postRender(()=>a(u,d))}}}mount(){this.removePointerDownListener=Ds(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const lo={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function cf(r,n){return n.max===n.min?0:r/(n.max-n.min)*100}const Ps={correct:(r,n)=>{if(!n.target)return r;if(typeof r=="string")if(te.test(r))r=parseFloat(r);else return r;const i=cf(r,n.target.x),o=cf(r,n.target.y);return`${i}% ${o}%`}},$w={correct:(r,{treeScale:n,projectionDelta:i})=>{const o=r,a=Bn.parse(r);if(a.length>5)return o;const u=Bn.createTransformer(r),d=typeof a[0]!="number"?1:0,m=i.x.scale*n.x,p=i.y.scale*n.y;a[0+d]/=m,a[1+d]/=p;const h=Be(m,p,.5);return typeof a[2+d]=="number"&&(a[2+d]/=h),typeof a[3+d]=="number"&&(a[3+d]/=h),u(a)}};class Vw extends se.Component{componentDidMount(){const{visualElement:n,layoutGroup:i,switchLayoutGroup:o,layoutId:a}=this.props,{projection:u}=n;av(Uw),u&&(i.group&&i.group.add(u),o&&o.register&&a&&o.register(u),u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),lo.hasEverUpdated=!0}getSnapshotBeforeUpdate(n){const{layoutDependency:i,visualElement:o,drag:a,isPresent:u}=this.props,d=o.projection;return d&&(d.isPresent=u,a||n.layoutDependency!==i||i===void 0?d.willUpdate():this.safeToRemove(),n.isPresent!==u&&(u?d.promote():d.relegate()||Ce.postRender(()=>{const m=d.getStack();(!m||!m.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:n}=this.props.visualElement;n&&(n.root.didUpdate(),eu.postRender(()=>{!n.currentAnimation&&n.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:n,layoutGroup:i,switchLayoutGroup:o}=this.props,{projection:a}=n;a&&(a.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(a),o&&o.deregister&&o.deregister(a))}safeToRemove(){const{safeToRemove:n}=this.props;n&&n()}render(){return null}}function ih(r){const[n,i]=xy(),o=se.useContext(jf);return B.jsx(Vw,{...r,layoutGroup:o,switchLayoutGroup:se.useContext(Kf),isPresent:n,safeToRemove:i})}const Uw={borderRadius:{...Ps,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ps,borderTopRightRadius:Ps,borderBottomLeftRadius:Ps,borderBottomRightRadius:Ps,boxShadow:$w};function zw(r,n,i){const o=et(r)?r:Os(r);return o.start(Iu("",o,n,i)),o.animation}function Hw(r){return r instanceof SVGElement&&r.tagName!=="svg"}const Ww=(r,n)=>r.depth-n.depth;class Gw{constructor(){this.children=[],this.isDirty=!1}add(n){pu(this.children,n),this.isDirty=!0}remove(n){hu(this.children,n),this.isDirty=!0}forEach(n){this.isDirty&&this.children.sort(Ww),this.isDirty=!1,this.children.forEach(n)}}function Kw(r,n){const i=zt.now(),o=({timestamp:a})=>{const u=a-i;u>=n&&(Pn(o),r(u-n))};return Ce.read(o,!0),()=>Pn(o)}const sh=["TopLeft","TopRight","BottomLeft","BottomRight"],Jw=sh.length,df=r=>typeof r=="string"?parseFloat(r):r,mf=r=>typeof r=="number"||te.test(r);function Yw(r,n,i,o,a,u){a?(r.opacity=Be(0,i.opacity!==void 0?i.opacity:1,qw(o)),r.opacityExit=Be(n.opacity!==void 0?n.opacity:1,0,Qw(o))):u&&(r.opacity=Be(n.opacity!==void 0?n.opacity:1,i.opacity!==void 0?i.opacity:1,o));for(let d=0;d<Jw;d++){const m=`border${sh[d]}Radius`;let p=ff(n,m),h=ff(i,m);if(p===void 0&&h===void 0)continue;p||(p=0),h||(h=0),p===0||h===0||mf(p)===mf(h)?(r[m]=Math.max(Be(df(p),df(h),o),0),(Ut.test(h)||Ut.test(p))&&(r[m]+="%")):r[m]=h}(n.rotate||i.rotate)&&(r.rotate=Be(n.rotate||0,i.rotate||0,o))}function ff(r,n){return r[n]!==void 0?r[n]:r.borderRadius}const qw=rh(0,.5,kp),Qw=rh(.5,.95,ht);function rh(r,n,i){return o=>o<r?0:o>n?1:i(Ti(r,n,o))}function pf(r,n){r.min=n.min,r.max=n.max}function Ct(r,n){pf(r.x,n.x),pf(r.y,n.y)}function hf(r,n){r.translate=n.translate,r.scale=n.scale,r.originPoint=n.originPoint,r.origin=n.origin}function gf(r,n,i,o,a){return r-=n,r=go(r,1/i,o),a!==void 0&&(r=go(r,1/a,o)),r}function Xw(r,n=0,i=1,o=.5,a,u=r,d=r){if(Ut.test(n)&&(n=parseFloat(n),n=Be(d.min,d.max,n/100)-d.min),typeof n!="number")return;let m=Be(u.min,u.max,o);r===u&&(m-=n),r.min=gf(r.min,n,i,m,a),r.max=gf(r.max,n,i,m,a)}function yf(r,n,[i,o,a],u,d){Xw(r,n[i],n[o],n[a],n.scale,u,d)}const Zw=["x","scaleX","originX"],e1=["y","scaleY","originY"];function vf(r,n,i,o){yf(r.x,n,Zw,i?i.x:void 0,o?o.x:void 0),yf(r.y,n,e1,i?i.y:void 0,o?o.y:void 0)}function wf(r){return r.translate===0&&r.scale===1}function oh(r){return wf(r.x)&&wf(r.y)}function Ef(r,n){return r.min===n.min&&r.max===n.max}function t1(r,n){return Ef(r.x,n.x)&&Ef(r.y,n.y)}function Sf(r,n){return Math.round(r.min)===Math.round(n.min)&&Math.round(r.max)===Math.round(n.max)}function ah(r,n){return Sf(r.x,n.x)&&Sf(r.y,n.y)}function xf(r){return gt(r.x)/gt(r.y)}function kf(r,n){return r.translate===n.translate&&r.scale===n.scale&&r.originPoint===n.originPoint}class n1{constructor(){this.members=[]}add(n){pu(this.members,n),n.scheduleRender()}remove(n){if(hu(this.members,n),n===this.prevLead&&(this.prevLead=void 0),n===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(n){const i=this.members.findIndex(a=>n===a);if(i===0)return!1;let o;for(let a=i;a>=0;a--){const u=this.members[a];if(u.isPresent!==!1){o=u;break}}return o?(this.promote(o),!0):!1}promote(n,i){const o=this.lead;if(n!==o&&(this.prevLead=o,this.lead=n,n.show(),o)){o.instance&&o.scheduleRender(),n.scheduleRender(),n.resumeFrom=o,i&&(n.resumeFrom.preserveOpacity=!0),o.snapshot&&(n.snapshot=o.snapshot,n.snapshot.latestValues=o.animationValues||o.latestValues),n.root&&n.root.isUpdating&&(n.isLayoutDirty=!0);const{crossfade:a}=n.options;a===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(n=>{const{options:i,resumingFrom:o}=n;i.onExitComplete&&i.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(n=>{n.instance&&n.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function i1(r,n,i){let o="";const a=r.x.translate/n.x,u=r.y.translate/n.y,d=i?.z||0;if((a||u||d)&&(o=`translate3d(${a}px, ${u}px, ${d}px) `),(n.x!==1||n.y!==1)&&(o+=`scale(${1/n.x}, ${1/n.y}) `),i){const{transformPerspective:h,rotate:g,rotateX:v,rotateY:w,skewX:S,skewY:b}=i;h&&(o=`perspective(${h}px) ${o}`),g&&(o+=`rotate(${g}deg) `),v&&(o+=`rotateX(${v}deg) `),w&&(o+=`rotateY(${w}deg) `),S&&(o+=`skewX(${S}deg) `),b&&(o+=`skewY(${b}deg) `)}const m=r.x.scale*n.x,p=r.y.scale*n.y;return(m!==1||p!==1)&&(o+=`scale(${m}, ${p})`),o||"none"}const Kn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Ts=typeof window<"u"&&window.MotionDebug!==void 0,Il=["","X","Y","Z"],s1={visibility:"hidden"},Cf=1e3;let r1=0;function bl(r,n,i,o){const{latestValues:a}=n;a[r]&&(i[r]=a[r],n.setStaticValue(r,0),o&&(o[r]=0))}function lh(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:n}=r.options;if(!n)return;const i=gp(n);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:a,layoutId:u}=r.options;window.MotionCancelOptimisedAnimation(i,"transform",Ce,!(a||u))}const{parent:o}=r;o&&!o.hasCheckedOptimisedAppear&&lh(o)}function uh({attachResizeListener:r,defaultParent:n,measureScroll:i,checkIsScrollRoot:o,resetTransform:a}){return class{constructor(d={},m=n?.()){this.id=r1++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ts&&(Kn.totalNodes=Kn.resolvedTargetDeltas=Kn.recalculatedProjection=0),this.nodes.forEach(l1),this.nodes.forEach(f1),this.nodes.forEach(p1),this.nodes.forEach(u1),Ts&&window.MotionDebug.record(Kn)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=d,this.root=m?m.root||m:this,this.path=m?[...m.path,m]:[],this.parent=m,this.depth=m?m.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new Gw)}addEventListener(d,m){return this.eventHandlers.has(d)||this.eventHandlers.set(d,new gu),this.eventHandlers.get(d).add(m)}notifyListeners(d,...m){const p=this.eventHandlers.get(d);p&&p.notify(...m)}hasListeners(d){return this.eventHandlers.has(d)}mount(d,m=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Hw(d),this.instance=d;const{layoutId:p,layout:h,visualElement:g}=this.options;if(g&&!g.current&&g.mount(d),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),m&&(h||p)&&(this.isLayoutDirty=!0),r){let v;const w=()=>this.root.updateBlockedByResize=!1;r(d,()=>{this.root.updateBlockedByResize=!0,v&&v(),v=Kw(w,250),lo.hasAnimatedSinceResize&&(lo.hasAnimatedSinceResize=!1,this.nodes.forEach(bf))})}p&&this.root.registerSharedNode(p,this),this.options.animate!==!1&&g&&(p||h)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:w,hasRelativeTargetChanged:S,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||g.getDefaultTransition()||w1,{onLayoutAnimationStart:D,onLayoutAnimationComplete:N}=g.getProps(),V=!this.targetLayout||!ah(this.targetLayout,b)||S,A=!w&&S;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||A||w&&(V||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(v,A);const z={...cu(T,"layout"),onPlay:D,onComplete:N};(g.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z)}else w||bf(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const d=this.getStack();d&&d.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Pn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(h1),this.animationId++)}getTransformTemplate(){const{visualElement:d}=this.options;return d&&d.getProps().transformTemplate}willUpdate(d=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&lh(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:m,layout:p}=this.options;if(m===void 0&&!p)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),d&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(If);return}this.isUpdating||this.nodes.forEach(d1),this.isUpdating=!1,this.nodes.forEach(m1),this.nodes.forEach(o1),this.nodes.forEach(a1),this.clearAllSnapshots();const m=zt.now();Ke.delta=nn(0,1e3/60,m-Ke.timestamp),Ke.timestamp=m,Ke.isProcessing=!0,gl.update.process(Ke),gl.preRender.process(Ke),gl.render.process(Ke),Ke.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,eu.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(c1),this.sharedNodes.forEach(g1)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ce.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ce.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const d=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ne(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:m}=this.options;m&&m.notify("LayoutMeasure",this.layout.layoutBox,d?d.layoutBox:void 0)}updateScroll(d="measure"){let m=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===d&&(m=!1),m){const p=o(this.instance);this.scroll={animationId:this.root.animationId,phase:d,isRoot:p,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:p}}}resetTransform(){if(!a)return;const d=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,m=this.projectionDelta&&!oh(this.projectionDelta),p=this.getTransformTemplate(),h=p?p(this.latestValues,""):void 0,g=h!==this.prevTransformTemplateValue;d&&(m||Gn(this.latestValues)||g)&&(a(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(d=!0){const m=this.measurePageBox();let p=this.removeElementScroll(m);return d&&(p=this.removeTransform(p)),E1(p),{animationId:this.root.animationId,measuredBox:m,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:m}=this.options;if(!m)return Ne();const p=m.measureViewportBox();if(!(((d=this.scroll)===null||d===void 0?void 0:d.wasRoot)||this.path.some(S1))){const{scroll:g}=this.root;g&&(Li(p.x,g.offset.x),Li(p.y,g.offset.y))}return p}removeElementScroll(d){var m;const p=Ne();if(Ct(p,d),!((m=this.scroll)===null||m===void 0)&&m.wasRoot)return p;for(let h=0;h<this.path.length;h++){const g=this.path[h],{scroll:v,options:w}=g;g!==this.root&&v&&w.layoutScroll&&(v.wasRoot&&Ct(p,d),Li(p.x,v.offset.x),Li(p.y,v.offset.y))}return p}applyTransform(d,m=!1){const p=Ne();Ct(p,d);for(let h=0;h<this.path.length;h++){const g=this.path[h];!m&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Mi(p,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Gn(g.latestValues)&&Mi(p,g.latestValues)}return Gn(this.latestValues)&&Mi(p,this.latestValues),p}removeTransform(d){const m=Ne();Ct(m,d);for(let p=0;p<this.path.length;p++){const h=this.path[p];if(!h.instance||!Gn(h.latestValues))continue;zl(h.latestValues)&&h.updateSnapshot();const g=Ne(),v=h.measurePageBox();Ct(g,v),vf(m,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,g)}return Gn(this.latestValues)&&vf(m,this.latestValues),m}setTargetDelta(d){this.targetDelta=d,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(d){this.options={...this.options,...d,crossfade:d.crossfade!==void 0?d.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ke.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(d=!1){var m;const p=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=p.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=p.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=p.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==p;if(!(d||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((m=this.parent)===null||m===void 0)&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:w}=this.options;if(!(!this.layout||!(v||w))){if(this.resolvedRelativeTargetAt=Ke.timestamp,!this.targetDelta&&!this.relativeTarget){const S=this.getClosestProjectingParent();S&&S.layout&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ne(),this.relativeTargetOrigin=Ne(),Fs(this.relativeTargetOrigin,this.layout.layoutBox,S.layout.layoutBox),Ct(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ne(),this.targetWithTransforms=Ne()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Cw(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ct(this.target,this.layout.layoutBox),eh(this.target,this.targetDelta)):Ct(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const S=this.getClosestProjectingParent();S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ne(),this.relativeTargetOrigin=Ne(),Fs(this.relativeTargetOrigin,this.target,S.target),Ct(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ts&&Kn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||zl(this.parent.latestValues)||Zp(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var d;const m=this.getLead(),p=!!this.resumingFrom||this!==m;let h=!0;if((this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty)&&(h=!1),p&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Ke.timestamp&&(h=!1),h)return;const{layout:g,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||v))return;Ct(this.layoutCorrected,this.layout.layoutBox);const w=this.treeScale.x,S=this.treeScale.y;Dw(this.layoutCorrected,this.treeScale,this.path,p),m.layout&&!m.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(m.target=m.layout.layoutBox,m.targetWithTransforms=Ne());const{target:b}=m;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(hf(this.prevProjectionDelta.x,this.projectionDelta.x),hf(this.prevProjectionDelta.y,this.projectionDelta.y)),Ns(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==w||this.treeScale.y!==S||!kf(this.projectionDelta.x,this.prevProjectionDelta.x)||!kf(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),Ts&&Kn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(d=!0){var m;if((m=this.options.visualElement)===null||m===void 0||m.scheduleRender(),d){const p=this.getStack();p&&p.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Bi(),this.projectionDelta=Bi(),this.projectionDeltaWithTransform=Bi()}setAnimationOrigin(d,m=!1){const p=this.snapshot,h=p?p.latestValues:{},g={...this.latestValues},v=Bi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!m;const w=Ne(),S=p?p.source:void 0,b=this.layout?this.layout.source:void 0,T=S!==b,D=this.getStack(),N=!D||D.members.length<=1,V=!!(T&&!N&&this.options.crossfade===!0&&!this.path.some(v1));this.animationProgress=0;let A;this.mixTargetDelta=z=>{const F=z/1e3;Pf(v.x,d.x,F),Pf(v.y,d.y,F),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Fs(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),y1(this.relativeTarget,this.relativeTargetOrigin,w,F),A&&t1(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=Ne()),Ct(A,this.relativeTarget)),T&&(this.animationValues=g,Yw(g,h,this.latestValues,F,V,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(d){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Pn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ce.update(()=>{lo.hasAnimatedSinceResize=!0,this.currentAnimation=zw(0,Cf,{...d,onUpdate:m=>{this.mixTargetDelta(m),d.onUpdate&&d.onUpdate(m)},onComplete:()=>{d.onComplete&&d.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const d=this.getStack();d&&d.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Cf),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const d=this.getLead();let{targetWithTransforms:m,target:p,layout:h,latestValues:g}=d;if(!(!m||!p||!h)){if(this!==d&&this.layout&&h&&ch(this.options.animationType,this.layout.layoutBox,h.layoutBox)){p=this.target||Ne();const v=gt(this.layout.layoutBox.x);p.x.min=d.target.x.min,p.x.max=p.x.min+v;const w=gt(this.layout.layoutBox.y);p.y.min=d.target.y.min,p.y.max=p.y.min+w}Ct(m,p),Mi(m,g),Ns(this.projectionDeltaWithTransform,this.layoutCorrected,m,g)}}registerSharedNode(d,m){this.sharedNodes.has(d)||this.sharedNodes.set(d,new n1),this.sharedNodes.get(d).add(m);const h=m.options.initialPromotionConfig;m.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(m):void 0})}isLead(){const d=this.getStack();return d?d.lead===this:!0}getLead(){var d;const{layoutId:m}=this.options;return m?((d=this.getStack())===null||d===void 0?void 0:d.lead)||this:this}getPrevLead(){var d;const{layoutId:m}=this.options;return m?(d=this.getStack())===null||d===void 0?void 0:d.prevLead:void 0}getStack(){const{layoutId:d}=this.options;if(d)return this.root.sharedNodes.get(d)}promote({needsReset:d,transition:m,preserveFollowOpacity:p}={}){const h=this.getStack();h&&h.promote(this,p),d&&(this.projectionDelta=void 0,this.needsReset=!0),m&&this.setOptions({transition:m})}relegate(){const d=this.getStack();return d?d.relegate(this):!1}resetSkewAndRotation(){const{visualElement:d}=this.options;if(!d)return;let m=!1;const{latestValues:p}=d;if((p.z||p.rotate||p.rotateX||p.rotateY||p.rotateZ||p.skewX||p.skewY)&&(m=!0),!m)return;const h={};p.z&&bl("z",d,h,this.animationValues);for(let g=0;g<Il.length;g++)bl(`rotate${Il[g]}`,d,h,this.animationValues),bl(`skew${Il[g]}`,d,h,this.animationValues);d.render();for(const g in h)d.setStaticValue(g,h[g]),this.animationValues&&(this.animationValues[g]=h[g]);d.scheduleRender()}getProjectionStyles(d){var m,p;if(!this.instance||this.isSVG)return;if(!this.isVisible)return s1;const h={visibility:""},g=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=oo(d?.pointerEvents)||"",h.transform=g?g(this.latestValues,""):"none",h;const v=this.getLead();if(!this.projectionDelta||!this.layout||!v.target){const T={};return this.options.layoutId&&(T.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,T.pointerEvents=oo(d?.pointerEvents)||""),this.hasProjected&&!Gn(this.latestValues)&&(T.transform=g?g({},""):"none",this.hasProjected=!1),T}const w=v.animationValues||v.latestValues;this.applyTransformsToTarget(),h.transform=i1(this.projectionDeltaWithTransform,this.treeScale,w),g&&(h.transform=g(w,h.transform));const{x:S,y:b}=this.projectionDelta;h.transformOrigin=`${S.origin*100}% ${b.origin*100}% 0`,v.animationValues?h.opacity=v===this?(p=(m=w.opacity)!==null&&m!==void 0?m:this.latestValues.opacity)!==null&&p!==void 0?p:1:this.preserveOpacity?this.latestValues.opacity:w.opacityExit:h.opacity=v===this?w.opacity!==void 0?w.opacity:"":w.opacityExit!==void 0?w.opacityExit:0;for(const T in co){if(w[T]===void 0)continue;const{correct:D,applyTo:N}=co[T],V=h.transform==="none"?w[T]:D(w[T],v);if(N){const A=N.length;for(let z=0;z<A;z++)h[N[z]]=V}else h[T]=V}return this.options.layoutId&&(h.pointerEvents=v===this?oo(d?.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(d=>{var m;return(m=d.currentAnimation)===null||m===void 0?void 0:m.stop()}),this.root.nodes.forEach(If),this.root.sharedNodes.clear()}}}function o1(r){r.updateLayout()}function a1(r){var n;const i=((n=r.resumeFrom)===null||n===void 0?void 0:n.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&i&&r.hasListeners("didUpdate")){const{layoutBox:o,measuredBox:a}=r.layout,{animationType:u}=r.options,d=i.source!==r.layout.source;u==="size"?bt(v=>{const w=d?i.measuredBox[v]:i.layoutBox[v],S=gt(w);w.min=o[v].min,w.max=w.min+S}):ch(u,i.layoutBox,o)&&bt(v=>{const w=d?i.measuredBox[v]:i.layoutBox[v],S=gt(o[v]);w.max=w.min+S,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[v].max=r.relativeTarget[v].min+S)});const m=Bi();Ns(m,o,i.layoutBox);const p=Bi();d?Ns(p,r.applyTransform(a,!0),i.measuredBox):Ns(p,o,i.layoutBox);const h=!oh(m);let g=!1;if(!r.resumeFrom){const v=r.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:w,layout:S}=v;if(w&&S){const b=Ne();Fs(b,i.layoutBox,w.layoutBox);const T=Ne();Fs(T,o,S.layoutBox),ah(b,T)||(g=!0),v.options.layoutRoot&&(r.relativeTarget=T,r.relativeTargetOrigin=b,r.relativeParent=v)}}}r.notifyListeners("didUpdate",{layout:o,snapshot:i,delta:p,layoutDelta:m,hasLayoutChanged:h,hasRelativeTargetChanged:g})}else if(r.isLead()){const{onExitComplete:o}=r.options;o&&o()}r.options.transition=void 0}function l1(r){Ts&&Kn.totalNodes++,r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function u1(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function c1(r){r.clearSnapshot()}function If(r){r.clearMeasurements()}function d1(r){r.isLayoutDirty=!1}function m1(r){const{visualElement:n}=r.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),r.resetTransform()}function bf(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function f1(r){r.resolveTargetDelta()}function p1(r){r.calcProjection()}function h1(r){r.resetSkewAndRotation()}function g1(r){r.removeLeadSnapshot()}function Pf(r,n,i){r.translate=Be(n.translate,0,i),r.scale=Be(n.scale,1,i),r.origin=n.origin,r.originPoint=n.originPoint}function Bf(r,n,i,o){r.min=Be(n.min,i.min,o),r.max=Be(n.max,i.max,o)}function y1(r,n,i,o){Bf(r.x,n.x,i.x,o),Bf(r.y,n.y,i.y,o)}function v1(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const w1={duration:.45,ease:[.4,0,.1,1]},Lf=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),Mf=Lf("applewebkit/")&&!Lf("chrome/")?Math.round:ht;function Tf(r){r.min=Mf(r.min),r.max=Mf(r.max)}function E1(r){Tf(r.x),Tf(r.y)}function ch(r,n,i){return r==="position"||r==="preserve-aspect"&&!kw(xf(n),xf(i),.2)}function S1(r){var n;return r!==r.root&&((n=r.scroll)===null||n===void 0?void 0:n.wasRoot)}const x1=uh({attachResizeListener:(r,n)=>$s(r,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Pl={current:void 0},dh=uh({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!Pl.current){const r=new x1({});r.mount(window),r.setOptions({layoutScroll:!0}),Pl.current=r}return Pl.current},resetTransform:(r,n)=>{r.style.transform=n!==void 0?n:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),k1={pan:{Feature:jw},drag:{Feature:Ow,ProjectionNode:dh,MeasureLayout:ih}};function Af(r,n,i){const{props:o}=r;r.animationState&&o.whileHover&&r.animationState.setActive("whileHover",i==="Start");const a="onHover"+i,u=o[a];u&&Ce.postRender(()=>u(n,Hs(n)))}class C1 extends Ln{mount(){const{current:n}=this.node;n&&(this.unmount=kv(n,i=>(Af(this.node,i,"Start"),o=>Af(this.node,o,"End"))))}unmount(){}}class I1 extends Ln{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch{n=!0}!n||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=zs($s(this.node.current,"focus",()=>this.onFocus()),$s(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Df(r,n,i){const{props:o}=r;r.animationState&&o.whileTap&&r.animationState.setActive("whileTap",i==="Start");const a="onTap"+(i==="End"?"":i),u=o[a];u&&Ce.postRender(()=>u(n,Hs(n)))}class b1 extends Ln{mount(){const{current:n}=this.node;n&&(this.unmount=Pv(n,i=>(Df(this.node,i,"Start"),(o,{success:a})=>Df(this.node,o,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Wl=new WeakMap,Bl=new WeakMap,P1=r=>{const n=Wl.get(r.target);n&&n(r)},B1=r=>{r.forEach(P1)};function L1({root:r,...n}){const i=r||document;Bl.has(i)||Bl.set(i,{});const o=Bl.get(i),a=JSON.stringify(n);return o[a]||(o[a]=new IntersectionObserver(B1,{root:r,...n})),o[a]}function M1(r,n,i){const o=L1(n);return Wl.set(r,i),o.observe(r),()=>{Wl.delete(r),o.unobserve(r)}}const T1={some:0,all:1};class A1 extends Ln{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:i,margin:o,amount:a="some",once:u}=n,d={root:i?i.current:void 0,rootMargin:o,threshold:typeof a=="number"?a:T1[a]},m=p=>{const{isIntersecting:h}=p;if(this.isInView===h||(this.isInView=h,u&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),w=h?g:v;w&&w(p)};return M1(this.node.current,d,m)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:n,prevProps:i}=this.node;["amount","margin","root"].some(D1(n,i))&&this.startObserver()}unmount(){}}function D1({viewport:r={}},{viewport:n={}}={}){return i=>r[i]!==n[i]}const N1={inView:{Feature:A1},tap:{Feature:b1},focus:{Feature:I1},hover:{Feature:C1}},F1={layout:{ProjectionNode:dh,MeasureLayout:ih}},Gl={current:null},mh={current:!1};function R1(){if(mh.current=!0,!!Yl)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),n=()=>Gl.current=r.matches;r.addListener(n),n()}else Gl.current=!1}const _1=[..._p,Ze,Bn],O1=r=>_1.find(Rp(r)),Nf=new WeakMap;function j1(r,n,i){for(const o in n){const a=n[o],u=i[o];if(et(a))r.addValue(o,a);else if(et(u))r.addValue(o,Os(a,{owner:r}));else if(u!==a)if(r.hasValue(o)){const d=r.getValue(o);d.liveStyle===!0?d.jump(a):d.hasAnimated||d.set(a)}else{const d=r.getStaticValue(o);r.addValue(o,Os(d!==void 0?d:a,{owner:r}))}}for(const o in i)n[o]===void 0&&r.removeValue(o);return n}const Ff=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class $1{scrapeMotionValuesFromProps(n,i,o){return{}}constructor({parent:n,props:i,presenceContext:o,reducedMotionConfig:a,blockInitialAnimation:u,visualState:d},m={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=xu,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const S=zt.now();this.renderScheduledAt<S&&(this.renderScheduledAt=S,Ce.render(this.render,!1,!0))};const{latestValues:p,renderState:h,onUpdate:g}=d;this.onUpdate=g,this.latestValues=p,this.baseTarget={...p},this.initialValues=i.initial?{...p}:{},this.renderState=h,this.parent=n,this.props=i,this.presenceContext=o,this.depth=n?n.depth+1:0,this.reducedMotionConfig=a,this.options=m,this.blockInitialAnimation=!!u,this.isControllingVariants=wo(i),this.isVariantNode=Wf(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(n&&n.current);const{willChange:v,...w}=this.scrapeMotionValuesFromProps(i,{},this);for(const S in w){const b=w[S];p[S]!==void 0&&et(b)&&b.set(p[S],!1)}}mount(n){this.current=n,Nf.set(n,this),this.projection&&!this.projection.instance&&this.projection.mount(n),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,o)=>this.bindToMotionValue(o,i)),mh.current||R1(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Gl.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Nf.delete(this.current),this.projection&&this.projection.unmount(),Pn(this.notifyUpdate),Pn(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const i=this.features[n];i&&(i.unmount(),i.isMounted=!1)}this.current=null}bindToMotionValue(n,i){this.valueSubscriptions.has(n)&&this.valueSubscriptions.get(n)();const o=qn.has(n),a=i.on("change",m=>{this.latestValues[n]=m,this.props.onUpdate&&Ce.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0)}),u=i.on("renderRequest",this.scheduleRender);let d;window.MotionCheckAppearSync&&(d=window.MotionCheckAppearSync(this,n,i)),this.valueSubscriptions.set(n,()=>{a(),u(),d&&d(),i.owner&&i.stop()})}sortNodePosition(n){return!this.current||!this.sortInstanceNodePosition||this.type!==n.type?0:this.sortInstanceNodePosition(this.current,n.current)}updateFeatures(){let n="animation";for(n in Ai){const i=Ai[n];if(!i)continue;const{isEnabled:o,Feature:a}=i;if(!this.features[n]&&a&&o(this.props)&&(this.features[n]=new a(this)),this.features[n]){const u=this.features[n];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ne()}getStaticValue(n){return this.latestValues[n]}setStaticValue(n,i){this.latestValues[n]=i}update(n,i){(n.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=n,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let o=0;o<Ff.length;o++){const a=Ff[o];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const u="on"+a,d=n[u];d&&(this.propEventSubscriptions[a]=this.on(a,d))}this.prevMotionValues=j1(this,this.scrapeMotionValuesFromProps(n,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(n){return this.props.variants?this.props.variants[n]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(n){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(n),()=>i.variantChildren.delete(n)}addValue(n,i){const o=this.values.get(n);i!==o&&(o&&this.removeValue(n),this.bindToMotionValue(n,i),this.values.set(n,i),this.latestValues[n]=i.get())}removeValue(n){this.values.delete(n);const i=this.valueSubscriptions.get(n);i&&(i(),this.valueSubscriptions.delete(n)),delete this.latestValues[n],this.removeValueFromRenderState(n,this.renderState)}hasValue(n){return this.values.has(n)}getValue(n,i){if(this.props.values&&this.props.values[n])return this.props.values[n];let o=this.values.get(n);return o===void 0&&i!==void 0&&(o=Os(i===null?void 0:i,{owner:this}),this.addValue(n,o)),o}readValue(n,i){var o;let a=this.latestValues[n]!==void 0||!this.current?this.latestValues[n]:(o=this.getBaseTargetFromProps(this.props,n))!==null&&o!==void 0?o:this.readValueFromInstance(this.current,n,this.options);return a!=null&&(typeof a=="string"&&(Np(a)||Ip(a))?a=parseFloat(a):!O1(a)&&Bn.test(i)&&(a=Tp(n,i)),this.setBaseTarget(n,et(a)?a.get():a)),et(a)?a.get():a}setBaseTarget(n,i){this.baseTarget[n]=i}getBaseTarget(n){var i;const{initial:o}=this.props;let a;if(typeof o=="string"||typeof o=="object"){const d=nu(this.props,o,(i=this.presenceContext)===null||i===void 0?void 0:i.custom);d&&(a=d[n])}if(o&&a!==void 0)return a;const u=this.getBaseTargetFromProps(this.props,n);return u!==void 0&&!et(u)?u:this.initialValues[n]!==void 0&&a===void 0?void 0:this.baseTarget[n]}on(n,i){return this.events[n]||(this.events[n]=new gu),this.events[n].add(i)}notify(n,...i){this.events[n]&&this.events[n].notify(...i)}}class fh extends $1{constructor(){super(...arguments),this.KeyframeResolver=Op}sortInstanceNodePosition(n,i){return n.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(n,i){return n.style?n.style[i]:void 0}removeValueFromRenderState(n,{vars:i,style:o}){delete i[n],delete o[n]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:n}=this.props;et(n)&&(this.childSubscription=n.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}function V1(r){return window.getComputedStyle(r)}class U1 extends fh{constructor(){super(...arguments),this.type="html",this.renderInstance=ep}readValueFromInstance(n,i){if(qn.has(i)){const o=Su(i);return o&&o.default||0}else{const o=V1(n),a=(Qf(i)?o.getPropertyValue(i):o[i])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(n,{transformPagePoint:i}){return th(n,i)}build(n,i,o){ru(n,i,o.transformTemplate)}scrapeMotionValuesFromProps(n,i,o){return uu(n,i,o)}}class z1 extends fh{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ne}getBaseTargetFromProps(n,i){return n[i]}readValueFromInstance(n,i){if(qn.has(i)){const o=Su(i);return o&&o.default||0}return i=tp.has(i)?i:Zl(i),n.getAttribute(i)}scrapeMotionValuesFromProps(n,i,o){return sp(n,i,o)}build(n,i,o){ou(n,i,this.isSVGTag,o.transformTemplate)}renderInstance(n,i,o,a){np(n,i,o,a)}mount(n){this.isSVGTag=lu(n.tagName),super.mount(n)}}const H1=(r,n)=>tu(r)?new z1(n):new U1(n,{allowProjection:r!==se.Fragment}),W1=gv({...pw,...N1,...k1,...F1},H1),it=Ty(W1);var G1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const K1=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),yt=(r,n)=>{const i=se.forwardRef(({color:o="currentColor",size:a=24,strokeWidth:u=2,absoluteStrokeWidth:d,className:m="",children:p,...h},g)=>se.createElement("svg",{ref:g,...G1,width:a,height:a,stroke:o,strokeWidth:d?Number(u)*24/Number(a):u,className:["lucide",`lucide-${K1(r)}`,m].join(" "),...h},[...n.map(([v,w])=>se.createElement(v,w)),...Array.isArray(p)?p:[p]]));return i.displayName=`${r}`,i};const Ll=yt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const J1=yt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);const Y1=yt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const q1=yt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Rf=yt("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);const _f=yt("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);const Q1=yt("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);const X1=yt("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);const Z1=yt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const eE=yt("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);const so=yt("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);const tE=yt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const nE=yt("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]),iE=()=>{const r={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},n={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};return B.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-50 font-sans",children:[B.jsx("nav",{className:"fixed top-0 w-full z-50 bg-slate-950/80 backdrop-blur-xl border-b border-slate-800/50",children:B.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:B.jsxs("div",{className:"flex items-center justify-between",children:[B.jsxs("div",{className:"flex items-center gap-3",children:[B.jsx(so,{className:"w-8 h-8 text-emerald-400"}),B.jsx("span",{className:"text-xl font-bold tracking-tight",children:"Montana Insight Portal"})]}),B.jsxs("div",{className:"flex items-center gap-4",children:[B.jsx("a",{href:"https://github.com/ohjoncurrie-netizen/mtdashboard",target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-slate-800 rounded-lg transition-colors",children:B.jsx(Rf,{className:"w-5 h-5"})}),B.jsx("a",{href:"index.html",children:B.jsx("button",{className:"px-6 py-2.5 bg-gradient-to-r from-emerald-500 to-cyan-500 rounded-lg font-semibold hover:shadow-lg hover:shadow-emerald-500/20 transition-all duration-300 hover:scale-105",children:"Launch Portal"})})]})]})})}),B.jsxs("section",{className:"relative pt-32 pb-20 px-6 overflow-hidden",children:[B.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-950/30 via-slate-950 to-cyan-950/30"}),B.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(16,185,129,0.1),transparent_50%)]"}),B.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_60%,rgba(6,182,212,0.1),transparent_50%)]"}),B.jsxs(it.div,{className:"relative max-w-6xl mx-auto text-center",initial:"hidden",animate:"visible",variants:r,children:[B.jsxs(it.div,{variants:n,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-800/50 border border-slate-700/50 rounded-full mb-8 backdrop-blur-sm",children:[B.jsx(tE,{className:"w-4 h-4 text-emerald-400"}),B.jsx("span",{className:"text-sm text-slate-300",children:"Modern Geographic Intelligence Platform"})]}),B.jsxs(it.h1,{variants:n,className:"text-6xl md:text-8xl font-bold tracking-tighter mb-6 bg-gradient-to-r from-slate-50 via-emerald-200 to-cyan-200 bg-clip-text text-transparent leading-tight",children:["Montana Insight",B.jsx("br",{}),"Portal"]}),B.jsx(it.p,{variants:n,className:"text-xl md:text-2xl text-slate-400 max-w-3xl mx-auto mb-12 leading-relaxed",children:"A modern web portal for statewide discovery, local intelligence, and community context built for educators, businesses, residents, and explorers."}),B.jsxs(it.div,{variants:n,className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[B.jsx("a",{href:"index.html",children:B.jsxs("button",{className:"group px-8 py-4 bg-gradient-to-r from-emerald-500 to-cyan-500 rounded-xl font-semibold text-lg hover:shadow-2xl hover:shadow-emerald-500/30 transition-all duration-300 hover:scale-105 flex items-center gap-2",children:["Open Portal",B.jsx(Ll,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})}),B.jsx("button",{className:"px-8 py-4 bg-slate-800/50 border border-slate-700 rounded-xl font-semibold text-lg hover:bg-slate-800 transition-all duration-300 backdrop-blur-sm",children:"View Overview"})]})]})]}),B.jsx(it.section,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},className:"border-y border-slate-800/50 bg-slate-900/30 backdrop-blur-sm",children:B.jsx("div",{className:"max-w-6xl mx-auto px-6 py-8",children:B.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[B.jsxs("div",{children:[B.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[B.jsx(Y1,{className:"w-5 h-5 text-emerald-400"}),B.jsx("div",{className:"text-3xl font-bold text-slate-50",children:"9+"})]}),B.jsx("div",{className:"text-sm text-slate-400",children:"Interactive Layers"})]}),B.jsxs("div",{children:[B.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[B.jsx(Z1,{className:"w-5 h-5 text-cyan-400"}),B.jsx("div",{className:"text-3xl font-bold text-slate-50",children:"100+"})]}),B.jsx("div",{className:"text-sm text-slate-400",children:"Historic Locations"})]}),B.jsxs("div",{children:[B.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[B.jsx(q1,{className:"w-5 h-5 text-emerald-400"}),B.jsx("div",{className:"text-3xl font-bold text-slate-50",children:"Open"})]}),B.jsx("div",{className:"text-sm text-slate-400",children:"Data Sources"})]}),B.jsxs("div",{children:[B.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[B.jsx(_f,{className:"w-5 h-5 text-cyan-400"}),B.jsx("div",{className:"text-3xl font-bold text-slate-50",children:"100%"})]}),B.jsx("div",{className:"text-sm text-slate-400",children:"Free for Educators"})]})]})})}),B.jsx("section",{className:"py-24 px-6",children:B.jsxs("div",{className:"max-w-7xl mx-auto",children:[B.jsxs(it.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:r,className:"text-center mb-16",children:[B.jsx(it.h2,{variants:n,className:"text-5xl md:text-6xl font-bold tracking-tight mb-4",children:"Built for Modern Discovery"}),B.jsx(it.p,{variants:n,className:"text-xl text-slate-400 max-w-2xl mx-auto",children:"A comprehensive platform designed for modern education"})]}),B.jsxs(it.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:r,className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[B.jsxs(it.div,{variants:n,whileHover:{scale:1.02},className:"md:col-span-2 md:row-span-2 p-8 bg-gradient-to-br from-slate-900 to-slate-800/50 border border-slate-700/50 rounded-2xl backdrop-blur-sm hover:border-emerald-500/50 transition-all duration-300 group",children:[B.jsxs("div",{className:"flex items-start justify-between mb-6",children:[B.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-xl border border-emerald-500/20 group-hover:bg-emerald-500/20 transition-colors",children:B.jsx(X1,{className:"w-8 h-8 text-emerald-400"})}),B.jsx("span",{className:"text-xs px-3 py-1 bg-slate-800 rounded-full text-slate-400 border border-slate-700",children:"New"})]}),B.jsx("h3",{className:"text-3xl font-bold mb-4 tracking-tight",children:"Interactive Layers"}),B.jsx("p",{className:"text-slate-400 text-lg mb-8 leading-relaxed",children:"Toggle between watersheds, grizzly bear ranges, mountain peaks, and more. Each layer comes with contextual facts and educational content."}),B.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[B.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-xl border border-slate-700/50",children:[B.jsx(nE,{className:"w-6 h-6 text-cyan-400 mb-2"}),B.jsx("div",{className:"text-sm font-semibold",children:"Watersheds"}),B.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"3 River Basins"})]}),B.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-xl border border-slate-700/50",children:[B.jsx(so,{className:"w-6 h-6 text-slate-400 mb-2"}),B.jsx("div",{className:"text-sm font-semibold",children:"Mountain Peaks"}),B.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"5+ Major Summits"})]}),B.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-xl border border-slate-700/50",children:[B.jsx(eE,{className:"w-6 h-6 text-emerald-400 mb-2"}),B.jsx("div",{className:"text-sm font-semibold",children:"Wildlife Ranges"}),B.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Protected Areas"})]}),B.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-xl border border-slate-700/50",children:[B.jsx(Q1,{className:"w-6 h-6 text-amber-400 mb-2"}),B.jsx("div",{className:"text-sm font-semibold",children:"Historic Sites"}),B.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Ghost Towns & More"})]})]})]}),B.jsxs(it.div,{variants:n,whileHover:{scale:1.02},className:"p-8 bg-gradient-to-br from-cyan-950/30 to-slate-900 border border-slate-700/50 rounded-2xl backdrop-blur-sm hover:border-cyan-500/50 transition-all duration-300 group",children:[B.jsx("div",{className:"p-3 bg-cyan-500/10 rounded-xl border border-cyan-500/20 inline-block mb-6 group-hover:bg-cyan-500/20 transition-colors",children:B.jsx(J1,{className:"w-8 h-8 text-cyan-400"})}),B.jsx("h3",{className:"text-2xl font-bold mb-4 tracking-tight",children:"Historical Data"}),B.jsx("p",{className:"text-slate-400 leading-relaxed",children:"Explore the Lewis & Clark Trail, Native American ancestral lands, and Montana's gold rush heritage."}),B.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-700/50",children:[B.jsx("div",{className:"text-sm text-slate-500",children:"Including"}),B.jsx("div",{className:"text-lg font-semibold text-cyan-400 mt-1",children:"1805-1806 Expedition Routes"})]})]}),B.jsxs(it.div,{variants:n,whileHover:{scale:1.02},className:"p-8 bg-gradient-to-br from-emerald-950/30 to-slate-900 border border-slate-700/50 rounded-2xl backdrop-blur-sm hover:border-emerald-500/50 transition-all duration-300 group",children:[B.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-xl border border-emerald-500/20 inline-block mb-6 group-hover:bg-emerald-500/20 transition-colors",children:B.jsx(_f,{className:"w-8 h-8 text-emerald-400"})}),B.jsx("h3",{className:"text-2xl font-bold mb-4 tracking-tight",children:"Classroom Ready"}),B.jsx("p",{className:"text-slate-400 leading-relaxed",children:"Designed for educators with contextual learning, interactive HUD facts, and curriculum-aligned content."}),B.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-700/50",children:[B.jsx("div",{className:"text-sm text-slate-500",children:"Perfect for"}),B.jsx("div",{className:"text-lg font-semibold text-emerald-400 mt-1",children:"Grades 4-12"})]})]}),B.jsx(it.div,{variants:n,whileHover:{scale:1.02},className:"md:col-span-3 p-8 bg-gradient-to-r from-slate-900 via-slate-800/50 to-slate-900 border border-slate-700/50 rounded-2xl backdrop-blur-sm hover:border-slate-600 transition-all duration-300 group",children:B.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[B.jsxs("div",{className:"flex-1",children:[B.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[B.jsx(Rf,{className:"w-8 h-8 text-slate-400"}),B.jsx("h3",{className:"text-2xl font-bold tracking-tight",children:"Open Source & Free Forever"})]}),B.jsx("p",{className:"text-slate-400 leading-relaxed",children:"Built with modern web technologies and open data sources. Fork it, contribute to it, or use it in your classroom at no cost."})]}),B.jsx("a",{href:"https://github.com/ohjoncurrie-netizen/mtdashboard",target:"_blank",rel:"noopener noreferrer",children:B.jsxs("button",{className:"px-6 py-3 bg-slate-800 border border-slate-700 rounded-xl font-semibold hover:bg-slate-700 transition-colors flex items-center gap-2 whitespace-nowrap",children:["View on GitHub",B.jsx(Ll,{className:"w-4 h-4"})]})})]})})]})]})}),B.jsx("section",{className:"py-24 px-6",children:B.jsxs(it.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"max-w-4xl mx-auto text-center p-12 bg-gradient-to-br from-emerald-900/20 to-cyan-900/20 border border-emerald-500/20 rounded-3xl backdrop-blur-sm",children:[B.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6 tracking-tight",children:"Ready to Explore Montana?"}),B.jsx("p",{className:"text-xl text-slate-400 mb-8 max-w-2xl mx-auto",children:"Start discovering Montana's natural wonders, rich history, and educational resources today."}),B.jsx("a",{href:"index.html",children:B.jsxs("button",{className:"group px-10 py-5 bg-gradient-to-r from-emerald-500 to-cyan-500 rounded-xl font-bold text-lg hover:shadow-2xl hover:shadow-emerald-500/30 transition-all duration-300 hover:scale-105 flex items-center gap-2 mx-auto",children:["Launch Interactive Map",B.jsx(Ll,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})]})}),B.jsx("footer",{className:"border-t border-slate-800/50 bg-slate-900/30 backdrop-blur-sm py-12 px-6",children:B.jsxs("div",{className:"max-w-7xl mx-auto",children:[B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-12 mb-12",children:[B.jsxs("div",{className:"md:col-span-2",children:[B.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[B.jsx(so,{className:"w-8 h-8 text-emerald-400"}),B.jsx("span",{className:"text-xl font-bold",children:"Montana Insight Portal"})]}),B.jsx("p",{className:"text-slate-400 max-w-md leading-relaxed",children:"An open-source platform for exploring Montana's geography, history, and natural resources through interactive layers and educational content."})]}),B.jsxs("div",{children:[B.jsx("h4",{className:"font-semibold mb-4",children:"Resources"}),B.jsxs("ul",{className:"space-y-2 text-slate-400",children:[B.jsx("li",{children:B.jsx("a",{href:"#",className:"hover:text-emerald-400 transition-colors",children:"Documentation"})}),B.jsx("li",{children:B.jsx("a",{href:"#",className:"hover:text-emerald-400 transition-colors",children:"API Reference"})}),B.jsx("li",{children:B.jsx("a",{href:"#",className:"hover:text-emerald-400 transition-colors",children:"Educational Guide"})}),B.jsx("li",{children:B.jsx("a",{href:"#",className:"hover:text-emerald-400 transition-colors",children:"Contributing"})})]})]}),B.jsxs("div",{children:[B.jsx("h4",{className:"font-semibold mb-4",children:"Connect"}),B.jsxs("ul",{className:"space-y-2 text-slate-400",children:[B.jsx("li",{children:B.jsx("a",{href:"https://github.com/ohjoncurrie-netizen/mtdashboard",target:"_blank",rel:"noopener noreferrer",className:"hover:text-emerald-400 transition-colors",children:"GitHub"})}),B.jsx("li",{children:B.jsx("a",{href:"#",className:"hover:text-emerald-400 transition-colors",children:"Report Issues"})}),B.jsx("li",{children:B.jsx("a",{href:"#",className:"hover:text-emerald-400 transition-colors",children:"Discussions"})}),B.jsx("li",{children:B.jsx("a",{href:"#",className:"hover:text-emerald-400 transition-colors",children:"Contact"})})]})]})]}),B.jsxs("div",{className:"pt-8 border-t border-slate-800/50 flex flex-col md:flex-row justify-between items-center gap-4",children:[B.jsx("p",{className:"text-slate-500 text-sm",children:" 2026 Montana Insight Portal. Open source under MIT License."}),B.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-slate-800/50 border border-slate-700/50 rounded-full",children:[B.jsx(so,{className:"w-4 h-4 text-emerald-400"}),B.jsx("span",{className:"text-sm text-slate-400",children:"Built in Montana"})]})]})]})})]})};Ey.createRoot(document.getElementById("root")).render(B.jsx(fy.StrictMode,{children:B.jsx(iE,{})}));window.BUSINESSES=JSON.parse(localStorage.getItem("mtBusinesses"))||[{id:"demo-cafe",name:"Mountain Brew Cafe ",lat:45.677,lng:-111.038,address:"15 Main St, Bozeman",phone:"(406) 555-0123",website:"https://example.com/cafe",icon:"",active:!0,expires:new Date(Date.now()+720*60*60*1e3).toISOString()}];window.COUNTY_DATA=JSON.parse(localStorage.getItem("countyData"))||{};window.CITY_DATA=JSON.parse(localStorage.getItem("cityData"))||{};window.EVENTS_DATA=JSON.parse(localStorage.getItem("eventsData"))||[];window.DISCUSSION_POSTS=JSON.parse(localStorage.getItem("discussionPosts"))||[];window.MEMBER_PROFILES=JSON.parse(localStorage.getItem("memberProfiles"))||{};window.MARKETPLACE_LISTINGS=JSON.parse(localStorage.getItem("marketplaceListings"))||[];window.ANALYTICS_VIEWS=JSON.parse(localStorage.getItem("analyticsViews"))||[];window.AWARDS={montana_expert:{name:"Montana Expert",icon:"",points:100,description:"Shared 10+ high-quality Montana facts",category:"knowledge"},helpful_contributor:{name:"Helpful Contributor",icon:"",points:50,description:"5+ helpful replies",category:"community"},wildlife_knowledge:{name:"Wildlife Whisperer",icon:"",points:75,description:"Shared valuable wildlife insights",category:"knowledge"},history_buff:{name:"History Buff",icon:"",points:75,description:"Shared Montana historical knowledge",category:"knowledge"},trail_advocate:{name:"Trail Advocate",icon:"",points:50,description:"Shared hiking and outdoor knowledge",category:"knowledge"},community_champion:{name:"Community Champion",icon:"",points:150,description:"50+ helpful community contributions",category:"community"},knowledge_seeker:{name:"Knowledge Seeker",icon:"",points:25,description:"Asked insightful questions",category:"community"},regional_master:{name:"Regional Master",icon:"",points:100,description:"Expert knowledge in multiple regions",category:"exploration"},quiz_master:{name:"Quiz Master",icon:"",points:125,description:"Aced Montana knowledge quizzes",category:"quiz"},geography_genius:{name:"Geography Genius",icon:"",points:100,description:"Perfect score on Montana geography quiz",category:"quiz"},history_scholar:{name:"History Scholar",icon:"",points:100,description:"Mastered Montana history quiz",category:"quiz"},wildlife_expert:{name:"Wildlife Expert",icon:"",points:100,description:"Identified all Montana wildlife species",category:"quiz"},route_explorer:{name:"Route Explorer",icon:"",points:75,description:"Explored 5+ scenic routes on the map",category:"exploration"},county_collector:{name:"County Collector",icon:"",points:125,description:"Visited and reviewed 10+ county pages",category:"exploration"},peak_bagger:{name:"Peak Bagger",icon:"",points:100,description:"Explored all mountain peak layers",category:"exploration"},trailblazer:{name:"Trailblazer",icon:"",points:150,description:"First to contribute in 3+ categories",category:"community"},first_responder:{name:"First Responder",icon:"",points:50,description:"First helpful reply on 5+ discussions",category:"community"},storyteller:{name:"Storyteller",icon:"",points:75,description:"Shared 5+ detailed local stories",category:"knowledge"},local_legend:{name:"Local Legend",icon:"",points:200,description:"Top contributor with 500+ total points",category:"prestige"},founding_member:{name:"Founding Member",icon:"",points:50,description:"Among the first 10 registered members",category:"prestige"}};window.COUNTY_CITIES={30001:["Dillon","Lima","Dell","Wisdom"],30003:["Hardin","Lodge Grass","Crow Agency","Wyola"],30005:["Chinook","Harlem","Dodson","Zurich"],30007:["Townsend","Toston"],30009:["Red Lodge","Joliet","Bridger","Fromberg"],30011:["Ekalaka"],30013:["Great Falls","Belt","Cascade"],30015:["Fort Benton","Geraldine","Highwood","Big Sandy"],30017:["Miles City"],30019:["Scobey"],30021:["Glendive","Richey"],30023:["Anaconda"],30025:["Baker","Plevna"],30027:["Lewistown","Moore","Grass Range"],30029:["Kalispell","Whitefish","Columbia Falls","Bigfork","Lakeside"],30031:["Bozeman","Belgrade","Manhattan","Three Forks","West Yellowstone"],30033:["Jordan"],30035:["Cut Bank","Browning"],30037:["Ryegate"],30039:["Philipsburg","Drummond"],30041:["Havre","Box Elder","Rudyard"],30043:["Boulder","Whitehall","Clancy"],30045:["Stanford","Geyser","Hobson"],30047:["Polson","Ronan","St. Ignatius","Pablo"],30049:["Helena","East Helena"],30051:["Chester","Joplin"],30053:["Libby","Troy","Eureka"],30055:["Circle","Brockway"],30057:["Ennis","Twin Bridges","Virginia City","Sheridan"],30059:["White Sulphur Springs","Ringling"],30061:["Superior","Alberton","St. Regis"],30063:["Missoula","Lolo","Frenchtown"],30065:["Roundup","Lavina"],30067:["Livingston","Gardiner","Clyde Park"],30069:["Winnett"],30071:["Malta","Dodson","Saco"],30073:["Conrad","Valier"],30075:["Broadus","Ashland"],30077:["Deer Lodge"],30079:["Terry","Mildred"],30081:["Hamilton","Darby","Stevensville","Corvallis","Victor"],30083:["Sidney","Fairview","Lambert"],30085:["Wolf Point","Poplar","Brockton","Culbertson"],30087:["Forsyth","Colstrip"],30089:["Thompson Falls","Plains","Hot Springs","Dixon"],30091:["Plentywood","Medicine Lake"],30093:["Butte","Walkerville"],30095:["Columbus","Absarokee"],30097:["Big Timber","Melville"],30099:["Choteau","Fairfield","Dutton"],30101:["Shelby","Sunburst","Kevin"],30103:["Hysham"],30105:["Glasgow","Fort Peck","Nashua","Hinsdale"],30107:["Harlowton","Judith Gap"],30109:["Wibaux"],30111:["Billings","Laurel","Shepherd","Lockwood"]};window.ADMIN_CONFIG={password:localStorage.getItem("adminPassword")||"admin123",isLoggedIn:!1};window.fetchSimpleMontanaUMap=async function(){try{const r=await fetch("https://umap.openstreetmap.fr/en/map/simple-montana_1357058/geojson/");if(!r.ok)return{type:"FeatureCollection",features:[]};const n=await r.json();return console.log(" Loaded Simple Montana uMap:",n.features?.length||0,"features"),n}catch(r){return console.error("uMap fetch failed:",r),{type:"FeatureCollection",features:[]}}};(function(){const r={apiKey:"AIzaSyCBILJQHJBRK6LN6x7yF2BwLwiXd80PlJQ",authDomain:"simplemontana-7d1da.firebaseapp.com",projectId:"simplemontana-7d1da",storageBucket:"simplemontana-7d1da.firebasestorage.app",messagingSenderId:"531058290354",appId:"1:531058290354:web:f5563186d8d9d398eb23ab",measurementId:"G-CJ4PS2DCEB"};let n=null,i=null,o=null,a=!1;try{typeof firebase<"u"&&r.apiKey&&r.projectId?(firebase.initializeApp(r),n=firebase.firestore(),i=firebase.auth(),o=typeof firebase.storage=="function"?firebase.storage():null,a=!0,console.log(" Firebase initialized")):console.warn(" Firebase SDK not loaded or config missing  using localStorage.")}catch(d){console.warn(" Firebase init failed, using localStorage:",d.message)}class u{constructor(){this.useFirebase=a}isFirebase(){return this.useFirebase}async login(m,p){if(this.useFirebase)try{return{success:!0,user:(await i.signInWithEmailAndPassword(m,p)).user}}catch(g){const v=g?.code||g?.message?.match(/\((auth\/[a-z-]+)\)/)?.[1];console.error("Firebase login error:",v,g.message);let w=g.message;if(v==="auth/unauthorized-domain"){const S=window.location.hostname;w=`This domain (${S}) is not authorized in Firebase. Go to Firebase Console  Authentication  Settings  Authorized Domains and add "${S}".`}else v==="auth/user-not-found"||v==="auth/wrong-password"||v==="auth/invalid-credential"?w="Incorrect email or password.":v==="auth/invalid-email"?w="Please enter a valid email address.":v==="auth/too-many-requests"?w="Too many failed attempts. Please wait a few minutes and try again.":v==="auth/network-request-failed"?w="Network error  check your internet connection.":v==="auth/configuration-not-found"&&(w="Firebase Authentication is not enabled. Enable Email/Password sign-in in the Firebase Console.");return{success:!1,error:w}}const h=localStorage.getItem("adminPassword")||"admin123";return p===h?{success:!0,user:{email:m||"admin@local",uid:"local"}}:{success:!1,error:"Incorrect password."}}async logout(){this.useFirebase&&await i.signOut()}onAuthChange(m){return this.useFirebase?i.onAuthStateChanged(m):()=>{}}async changePassword(m){if(this.useFirebase&&i.currentUser)try{return await i.currentUser.updatePassword(m),{success:!0}}catch(p){return{success:!1,error:p.message}}return localStorage.setItem("adminPassword",m),{success:!0}}async register(m,p,h){if(this.useFirebase)try{const w=await i.createUserWithEmailAndPassword(m,p);return await w.user.updateProfile({displayName:h||m.split("@")[0]}),await n.collection("members").doc(w.user.uid).set({email:m,displayName:h||m.split("@")[0],bio:"",avatarEmoji:"",totalPoints:0,postCount:0,helpfulCount:0,awards:[],joinedAt:firebase.firestore.FieldValue.serverTimestamp(),settings:{emailNotifications:!0,showOnLeaderboard:!0,publicProfile:!0},role:"member"}),{success:!0,user:w.user}}catch(w){return{success:!1,error:w.message}}const g=JSON.parse(localStorage.getItem("memberProfiles"))||{},v="local_"+Date.now();return g[h||m]={name:h||m,email:m,uid:v,avatarEmoji:"",bio:"",totalPoints:0,postCount:0,helpfulCount:0,awards:[],joinedAt:new Date().toISOString(),settings:{emailNotifications:!0,showOnLeaderboard:!0,publicProfile:!0},role:"member"},localStorage.setItem("memberProfiles",JSON.stringify(g)),localStorage.setItem("currentUser",JSON.stringify({email:m,displayName:h||m,uid:v})),{success:!0,user:{email:m,displayName:h||m,uid:v}}}async resetPassword(m){if(this.useFirebase)try{return await i.sendPasswordResetEmail(m),{success:!0,message:"Password reset email sent. Check your inbox."}}catch(p){return{success:!1,error:p.message}}return{success:!1,error:"Password reset requires Firebase. Contact admin."}}async getMemberProfile(m){if(this.useFirebase)try{const h=await n.collection("members").doc(m).get();return h.exists?{uid:h.id,...h.data()}:null}catch(h){return console.error("Error fetching member:",h),null}const p=JSON.parse(localStorage.getItem("memberProfiles"))||{};for(const[h,g]of Object.entries(p))if(g.uid===m||h===m)return{uid:h,...g};return null}async saveMemberProfile(m,p){if(this.useFirebase)try{await n.collection("members").doc(m).set(p,{merge:!0})}catch(v){console.error("Error saving member:",v)}const h=JSON.parse(localStorage.getItem("memberProfiles"))||{},g=p.name||p.displayName||m;h[g]={...h[g],...p,uid:m},localStorage.setItem("memberProfiles",JSON.stringify(h))}async getTopMembers(m=20){if(this.useFirebase)try{const h=await n.collection("members").orderBy("totalPoints","desc").limit(m).get(),g=[];return h.forEach(v=>g.push({uid:v.id,...v.data()})),g}catch(h){console.error("Error fetching top members:",h)}const p=JSON.parse(localStorage.getItem("memberProfiles"))||{};return Object.entries(p).map(([h,g])=>({uid:h,name:g.name||h,...g})).sort((h,g)=>(g.totalPoints||0)-(h.totalPoints||0)).slice(0,m)}async grantAward(m,p,h="admin"){if(this.useFirebase)try{const v=await n.collection("members").doc(m).get();if(v.exists){const w=v.data(),S=w.awards||[];if(!S.includes(p)){S.push(p);const b=window.AWARDS&&window.AWARDS[p]?window.AWARDS[p].points:0;await n.collection("members").doc(m).update({awards:S,totalPoints:(w.totalPoints||0)+b})}return{success:!0}}return{success:!1,error:"Member not found"}}catch(v){return{success:!1,error:v.message}}const g=JSON.parse(localStorage.getItem("memberProfiles"))||{};if(g[m]){if(g[m].awards||(g[m].awards=[]),!g[m].awards.includes(p)){g[m].awards.push(p);const v=window.AWARDS&&window.AWARDS[p]?window.AWARDS[p].points:0;g[m].totalPoints=(g[m].totalPoints||0)+v}return localStorage.setItem("memberProfiles",JSON.stringify(g)),{success:!0}}return{success:!1,error:"Member not found"}}getCurrentUser(){if(this.useFirebase)return i.currentUser;const m=JSON.parse(localStorage.getItem("currentUser")||"null");return m&&(m.email||m.displayName)?m:JSON.parse(localStorage.getItem("adminConfig")||"{}").isLoggedIn?{email:"admin@local",uid:"local",displayName:"Local Admin"}:null}async getUserList(){if(this.useFirebase)try{const m=await n.collection("users").get(),p=[];return m.forEach(h=>{p.push({uid:h.id,...h.data()})}),p}catch(m){return console.error("Error fetching users:",m),[]}return[{uid:"local",email:"admin@local",role:"admin",displayName:"Local Admin",createdAt:new Date().toISOString()}]}async createUser(m,p,h,g="admin"){if(this.useFirebase)try{const v=i.currentUser,w=`user_${Date.now()}`;return await n.collection("users").doc(w).set({email:m,role:g,displayName:h||m.split("@")[0],createdAt:firebase.firestore.FieldValue.serverTimestamp(),createdBy:v?v.uid:"system",pendingActivation:!0,tempPassword:p}),{success:!0,message:"User invited. They should sign up with this email and password."}}catch(v){return{success:!1,error:v.message}}return{success:!1,error:"Multi-user not supported in localStorage mode. Configure Firebase."}}async deleteUser(m){if(this.useFirebase)try{return await n.collection("users").doc(m).delete(),{success:!0}}catch(p){return{success:!1,error:p.message}}return{success:!1,error:"Cannot delete users in localStorage mode."}}async getCountyData(m){if(this.useFirebase){const h=await n.collection("counties").doc(m).get();return h.exists?h.data():null}return(JSON.parse(localStorage.getItem("countyData"))||{})[m]||null}async getAllCountyData(){if(this.useFirebase){const m=await n.collection("counties").get(),p={};return m.forEach(h=>{p[h.id]=h.data()}),p}return JSON.parse(localStorage.getItem("countyData"))||{}}async saveCountyData(m,p){this.useFirebase&&await n.collection("counties").doc(m).set(p,{merge:!0});const h=JSON.parse(localStorage.getItem("countyData"))||{};h[m]=p,localStorage.setItem("countyData",JSON.stringify(h))}async getCityData(m,p){const h=`${m}_${p}`;if(this.useFirebase){const v=await n.collection("cities").doc(h).get();return v.exists?v.data():null}return(JSON.parse(localStorage.getItem("cityData"))||{})[h]||null}async getAllCityData(){if(this.useFirebase){const m=await n.collection("cities").get(),p={};return m.forEach(h=>{p[h.id]=h.data()}),p}return JSON.parse(localStorage.getItem("cityData"))||{}}async saveCityData(m,p,h){const g=`${m}_${p}`;this.useFirebase&&await n.collection("cities").doc(g).set(h,{merge:!0});const v=JSON.parse(localStorage.getItem("cityData"))||{};v[g]=h,localStorage.setItem("cityData",JSON.stringify(v))}async getBusinesses(){if(this.useFirebase){const m=await n.collection("businesses").get(),p=[];return m.forEach(h=>{p.push({id:h.id,...h.data()})}),p}return JSON.parse(localStorage.getItem("mtBusinesses"))||[]}async saveBusiness(m){this.useFirebase&&await n.collection("businesses").doc(m.id).set(m);const p=JSON.parse(localStorage.getItem("mtBusinesses"))||[],h=p.findIndex(g=>g.id===m.id);h>=0?p[h]=m:p.push(m),localStorage.setItem("mtBusinesses",JSON.stringify(p))}async saveAllBusinesses(m){if(this.useFirebase)for(const p of m)await n.collection("businesses").doc(p.id).set(p);localStorage.setItem("mtBusinesses",JSON.stringify(m))}async getEvents(m={}){let p=[];if(this.useFirebase){let h=n.collection("events");m.countyFips&&(h=h.where("countyFips","==",m.countyFips)),m.citySlug&&(h=h.where("citySlug","==",m.citySlug)),m.type&&(h=h.where("type","==",m.type)),m.isActive!==void 0&&(h=h.where("isActive","==",m.isActive)),(await h.get()).forEach(v=>{p.push({id:v.id,...v.data()})})}else p=JSON.parse(localStorage.getItem("eventsData"))||[],m.countyFips&&(p=p.filter(h=>h.countyFips===m.countyFips)),m.citySlug&&(p=p.filter(h=>h.citySlug===m.citySlug)),m.type&&(p=p.filter(h=>h.type===m.type)),m.isActive!==void 0&&(p=p.filter(h=>h.isActive===m.isActive));return p}async getAllEvents(){if(this.useFirebase){const m=await n.collection("events").get(),p=[];return m.forEach(h=>{p.push({id:h.id,...h.data()})}),p}return JSON.parse(localStorage.getItem("eventsData"))||[]}async getEventsByCounty(m){return this.getEvents({countyFips:m,isActive:!0})}async getEventsByCity(m,p){if(this.useFirebase){const g=await n.collection("events").where("countyFips","==",m).where("isActive","==",!0).get(),v=[];return g.forEach(w=>{const S={id:w.id,...w.data()};(!S.citySlug||S.citySlug===p)&&v.push(S)}),v}return(JSON.parse(localStorage.getItem("eventsData"))||[]).filter(g=>g.countyFips===m&&g.isActive&&(!g.citySlug||g.citySlug===p))}async saveEvent(m){m.id||(m.id=`evt_${Date.now()}`),this.useFirebase&&(m.createdAt||(m.createdAt=firebase.firestore.FieldValue.serverTimestamp()),m.updatedAt=firebase.firestore.FieldValue.serverTimestamp(),await n.collection("events").doc(m.id).set(m,{merge:!0}));const p=JSON.parse(localStorage.getItem("eventsData"))||[],h=p.findIndex(g=>g.id===m.id);return m.createdAt||(m.createdAt=new Date().toISOString()),m.updatedAt=new Date().toISOString(),h>=0?p[h]=m:p.push(m),localStorage.setItem("eventsData",JSON.stringify(p)),m}async deleteEvent(m){this.useFirebase&&await n.collection("events").doc(m).delete();const h=(JSON.parse(localStorage.getItem("eventsData"))||[]).filter(g=>g.id!==m);localStorage.setItem("eventsData",JSON.stringify(h))}async getMarketplaceListings(){if(this.useFirebase)try{const m=await n.collection("marketplace").orderBy("createdAt","desc").get(),p=[];return m.forEach(h=>{const g=h.data()||{};p.push({id:h.id,...g,createdAt:g.createdAt?.toDate?g.createdAt.toDate().toISOString():g.createdAt||new Date().toISOString(),updatedAt:g.updatedAt?.toDate?g.updatedAt.toDate().toISOString():g.updatedAt||null})}),localStorage.setItem("marketplaceListings",JSON.stringify(p)),p}catch(m){console.error("Error fetching marketplace listings:",m)}return JSON.parse(localStorage.getItem("marketplaceListings"))||[]}async uploadMarketplaceImage(m,p="new"){if(!m)return"";if(this.useFirebase&&o){const h=String(m.name||"image").replace(/[^a-zA-Z0-9._-]/g,"_"),g=`marketplace/${p}/${Date.now()}_${h}`,v=o.ref().child(g);return await v.put(m),v.getDownloadURL()}return await new Promise((h,g)=>{const v=new FileReader;v.onload=()=>h(v.result),v.onerror=()=>g(new Error("Unable to read image file")),v.readAsDataURL(m)})}async saveMarketplaceListing(m){const p={title:m.title||"",description:m.description||"",price:m.price||"",category:m.category||m.type||"for_sale",location:m.location||"",imageUrl:m.imageUrl||"",contactInfo:m.contactInfo||m.contactEmail||"",contactName:m.contactName||"",contactEmail:m.contactEmail||"",contactPhone:m.contactPhone||"",userId:m.userId||"",userName:m.userName||"",isActive:m.isActive!==!1};let h;if(this.useFirebase)if(m.id){await n.collection("marketplace").doc(m.id).set({...p,updatedAt:firebase.firestore.FieldValue.serverTimestamp()},{merge:!0});const w=await n.collection("marketplace").doc(m.id).get(),S=w.data()||{};h={id:w.id,...S,createdAt:S.createdAt?.toDate?S.createdAt.toDate().toISOString():S.createdAt||new Date().toISOString(),updatedAt:S.updatedAt?.toDate?S.updatedAt.toDate().toISOString():S.updatedAt||new Date().toISOString()}}else{const S=await(await n.collection("marketplace").add({...p,createdAt:firebase.firestore.FieldValue.serverTimestamp(),updatedAt:firebase.firestore.FieldValue.serverTimestamp()})).get(),b=S.data()||{};h={id:S.id,...b,createdAt:b.createdAt?.toDate?b.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:b.updatedAt?.toDate?b.updatedAt.toDate().toISOString():new Date().toISOString()}}else h={id:m.id||`listing_${Date.now()}`,...p,createdAt:m.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()};const g=JSON.parse(localStorage.getItem("marketplaceListings"))||[],v=g.findIndex(w=>w.id===h.id);return v>=0?g[v]=h:g.unshift(h),localStorage.setItem("marketplaceListings",JSON.stringify(g)),h}async deleteMarketplaceListing(m){this.useFirebase&&await n.collection("marketplace").doc(m).delete();const p=JSON.parse(localStorage.getItem("marketplaceListings"))||[];return localStorage.setItem("marketplaceListings",JSON.stringify(p.filter(h=>h.id!==m))),{success:!0}}async getDiscussionPosts(){if(this.useFirebase)try{const m=await n.collection("discussions").orderBy("timestamp","desc").get(),p=[];return m.forEach(h=>p.push({id:h.id,...h.data()})),p}catch(m){console.error("Error fetching discussion posts:",m)}return JSON.parse(localStorage.getItem("discussionPosts"))||[]}async saveDiscussionPost(m){if(m.id||(m.id=`post_${Date.now()}`),this.useFirebase)try{await n.collection("discussions").doc(m.id).set(m,{merge:!0})}catch(g){console.error("Error saving discussion post:",g)}const p=JSON.parse(localStorage.getItem("discussionPosts"))||[],h=p.findIndex(g=>g.id===m.id);return h>=0?p[h]=m:p.unshift(m),localStorage.setItem("discussionPosts",JSON.stringify(p)),m}async updateDiscussionPost(m,p){if(this.useFirebase)try{await n.collection("discussions").doc(m).update(p)}catch(v){console.error("Error updating discussion post:",v)}const h=JSON.parse(localStorage.getItem("discussionPosts"))||[],g=h.findIndex(v=>v.id===m);g>=0&&(h[g]={...h[g],...p},localStorage.setItem("discussionPosts",JSON.stringify(h)))}async deleteDiscussionPost(m){if(this.useFirebase)try{await n.collection("discussions").doc(m).delete()}catch(h){console.error("Error deleting discussion post:",h)}const p=JSON.parse(localStorage.getItem("discussionPosts"))||[];localStorage.setItem("discussionPosts",JSON.stringify(p.filter(h=>h.id!==m)))}async getAllMembers(){if(this.useFirebase)try{const m=await n.collection("members").get(),p={};return m.forEach(h=>{const g=h.data(),v=g.displayName||g.name||h.id;p[v]={uid:h.id,...g}}),p}catch(m){console.error("Error fetching all members:",m)}return JSON.parse(localStorage.getItem("memberProfiles"))||{}}async trackView(m){if(this.useFirebase)try{await n.collection("analytics").add(m)}catch{}const p=JSON.parse(localStorage.getItem("analyticsViews"))||[];p.push(m),p.length>5e3&&p.splice(0,p.length-5e3),localStorage.setItem("analyticsViews",JSON.stringify(p)),window.ANALYTICS_VIEWS=p}async getAnalyticsViews(){if(this.useFirebase)try{const m=await n.collection("analytics").orderBy("ts","desc").limit(5e3).get(),p=[];return m.forEach(h=>p.push(h.data())),p}catch{}return JSON.parse(localStorage.getItem("analyticsViews"))||[]}}window.dataService=new u,window.firebaseReady=a})();function sE(){window.googleMapsLoaded=!0}window.initGoogleMaps=sE;const{ADMIN_CONFIG:Nt,BUSINESSES:Zt,COUNTY_DATA:Ii,CITY_DATA:ro,EVENTS_DATA:Cn,DISCUSSION_POSTS:It,MEMBER_PROFILES:Me,AWARDS:Bs,COUNTY_CITIES:In}=window,Ft={30001:"Beaverhead County",30003:"Big Horn County",30005:"Blaine County",30007:"Broadwater County",30009:"Carbon County",30011:"Carter County",30013:"Cascade County",30015:"Chouteau County",30017:"Custer County",30019:"Daniels County",30021:"Dawson County",30023:"Deer Lodge County",30025:"Fallon County",30027:"Fergus County",30029:"Flathead County",30031:"Gallatin County",30033:"Garfield County",30035:"Glacier County",30037:"Golden Valley County",30039:"Granite County",30041:"Hill County",30043:"Jefferson County",30045:"Judith Basin County",30047:"Lake County",30049:"Lewis and Clark County",30051:"Liberty County",30053:"Lincoln County",30055:"McCone County",30057:"Madison County",30059:"Meagher County",30061:"Mineral County",30063:"Missoula County",30065:"Musselshell County",30067:"Park County",30069:"Petroleum County",30071:"Phillips County",30073:"Pondera County",30075:"Powder River County",30077:"Powell County",30079:"Prairie County",30081:"Ravalli County",30083:"Richland County",30085:"Roosevelt County",30087:"Rosebud County",30089:"Sanders County",30091:"Sheridan County",30093:"Silver Bow County",30095:"Stillwater County",30097:"Sweet Grass County",30099:"Teton County",30101:"Toole County",30103:"Treasure County",30105:"Valley County",30107:"Wheatland County",30109:"Wibaux County",30111:"Yellowstone County"};class rE{constructor(){this.map=null,this.countyLayer=null,this.geocoder=null,this.businessMarkers=[],this.allCounties=[],this.currentEditingCounty=null,this.currentEditingCity=null,this.currentCounty=null,this.currentCity=null,this.pendingCountyEdit=null,this.layers={},this.layerData=this.initializeLayerData(),this.countySlugToFips=this.buildCountySlugMap(),this.isUpdatingHash=!1,this.ds=window.dataService,this._eventsAllCache=[],this._marketplaceListings=[],this._currentShareEvent=null,this._bigSkyRefreshTimer=null}async init(){this.setupEventListeners(),this.setupAuthListeners();const n=JSON.parse(localStorage.getItem("currentUser")||"null");this.updateAuthUI(n),await this.loadDataFromFirebase(),this.initMap(),await this.loadCountyBoundaries(),this.initializeLayerController(),this.initializeHUD(),this.initializeGhostTownTracker(),this.initializeBigSkyDashboard(),await Promise.race([new Promise(a=>{if(window.googleMapsLoaded)return a(!0);const u=setInterval(()=>{window.googleMapsLoaded&&(clearInterval(u),a(!0))},100)}),new Promise(a=>setTimeout(()=>a(!1),8e3))])?this.geocoder=new google.maps.Geocoder:console.warn(" Google Maps API did not load  geocoder unavailable"),this.populateCountyDropdown(),this.checkBusinessExpiration(),this.addBusinessMarkers(),this.renderBusinessList(),this.updateTimestamp(),this.buildCountyDirectory();const o=document.getElementById("admin-login-note");o&&(this.ds&&this.ds.isFirebase()?o.textContent="Use your Firebase admin email & password.":o.textContent="Default password: admin123 (Configure Firebase for multi-user support)"),this.ds&&this.ds.isFirebase()&&this.ds.onAuthChange(a=>{if(a){Nt.isLoggedIn=!0,console.log("User authenticated:",a.email);const u=document.getElementById("admin-section"),d=document.getElementById("admin-login"),m=document.getElementById("admin-dashboard");u&&u.style.display!=="none"&&(d&&(d.style.display="none"),m&&(m.style.display="block",this.loadCountyList()))}else Nt.isLoggedIn=!1}),this.handleRouteFromHash(),window.addEventListener("hashchange",()=>this.handleRouteFromHash()),console.log(" Montana County Explorer initialized")}async loadDataFromFirebase(){if(!(!this.ds||!this.ds.isFirebase()))try{const[n,i,o,a]=await Promise.all([this.ds.getAllCountyData(),this.ds.getAllCityData(),this.ds.getDiscussionPosts(),this.ds.getAllMembers()]);n&&Object.keys(n).length>0&&(Object.assign(window.COUNTY_DATA,n),localStorage.setItem("countyData",JSON.stringify(window.COUNTY_DATA))),i&&Object.keys(i).length>0&&(Object.assign(window.CITY_DATA,i),localStorage.setItem("cityData",JSON.stringify(window.CITY_DATA))),o&&o.length>0&&(window.DISCUSSION_POSTS.length=0,window.DISCUSSION_POSTS.push(...o),localStorage.setItem("discussionPosts",JSON.stringify(window.DISCUSSION_POSTS))),a&&Object.keys(a).length>0&&(Object.assign(window.MEMBER_PROFILES,a),localStorage.setItem("memberProfiles",JSON.stringify(window.MEMBER_PROFILES))),console.log(" Data loaded from Firebase (posts, counties, cities, members)")}catch(n){console.warn(" Could not load data from Firebase, using localStorage cache:",n.message)}}populateCountyDropdown(){const n=document.getElementById("biz-county");if(!n)return;const i={30001:"Beaverhead",30003:"Big Horn",30005:"Blaine",30007:"Broadwater",30009:"Carbon",30011:"Carter",30013:"Cascade",30015:"Chouteau",30017:"Custer",30019:"Daniels",30021:"Dawson",30023:"Deer Lodge",30025:"Fallon",30027:"Fergus",30029:"Flathead",30031:"Gallatin",30033:"Garfield",30035:"Glacier",30037:"Golden Valley",30039:"Granite",30041:"Hill",30043:"Jefferson",30045:"Judith Basin",30047:"Lake",30049:"Lewis and Clark",30051:"Liberty",30053:"Lincoln",30055:"McCone",30057:"Madison",30059:"Meagher",30061:"Mineral",30063:"Missoula",30065:"Musselshell",30067:"Park",30069:"Petroleum",30071:"Phillips",30073:"Pondera",30075:"Powder River",30077:"Powell",30079:"Prairie",30081:"Ravalli",30083:"Richland",30085:"Roosevelt",30087:"Rosebud",30089:"Sanders",30091:"Sheridan",30093:"Silver Bow",30095:"Stillwater",30097:"Sweet Grass",30099:"Teton",30101:"Toole",30103:"Treasure",30105:"Valley",30107:"Wheatland",30109:"Wibaux",30111:"Yellowstone"};n.innerHTML='<option value="">Select County...</option>',Object.entries(i).sort((o,a)=>o[1].localeCompare(a[1])).forEach(([o,a])=>{const u=document.createElement("option");u.value=o,u.textContent=a+" County",n.appendChild(u)})}updateTimestamp(){const n=document.getElementById("last-updated");if(n){const i=new Date;n.textContent=`Last updated: ${i.toLocaleDateString()} at ${i.toLocaleTimeString()}`}}initMap(){const n=[[44,-116.5],[49.2,-104]];this.map=L.map("map",{center:[46.8797,-110.3626],zoom:7,minZoom:6,maxZoom:13,maxBounds:n,maxBoundsViscosity:1}),L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",{attribution:'&copy; <a href="https://www.esri.com/" target="_blank">Esri</a>',maxZoom:18}).addTo(this.map)}async loadCountyBoundaries(){try{const a={type:"FeatureCollection",features:(await(await fetch("https://raw.githubusercontent.com/plotly/datasets/master/geojson-counties-fips.json")).json()).features.filter(u=>{const d=u.id||u.properties.FIPS||u.properties.GEO_ID;return d&&d.toString().startsWith("30")})};console.log(`Found ${a.features.length} Montana counties`),this.countyLayer=L.geoJSON(a,{style:{fillColor:"#1e3a5f",weight:2,opacity:.8,color:"#2d5a8e",dashArray:"4, 4",fillOpacity:.06},onEachFeature:(u,d)=>{const m=u.id||u.properties.FIPS||u.properties.GEO_ID,p=Ft[m]||`County ${m}`;d.on("mouseover",function(){this.setStyle({fillOpacity:.2,weight:3,color:"#d4a843"})}),d.on("mouseout",function(){this.setStyle({fillOpacity:.06,weight:2,color:"#2d5a8e"})});const h=Ii[m]||{};let g=`
            <div>
              <h3> ${p}</h3>
              <p style="margin: 8px 0; color: var(--ink-dark);">
                <strong>FIPS:</strong> ${m}
              </p>
              <p style="margin: 10px 0;">
                <a href="#" onclick="window.mtApp.openCountyPage('${m}', '${p}'); return false;"
                   style="color: var(--wood-dark); text-decoration: underline; font-weight: 600;">
                  Open County Page
                </a>
              </p>
          `;h.description&&(g+=`
              <p style="margin: 10px 0; color: var(--ink-dark); line-height: 1.6;">
                ${h.description}
              </p>
            `),h.seat&&(g+=`
              <p style="margin: 8px 0; color: var(--ink-dark);">
                <strong>County Seat:</strong> ${h.seat}
              </p>
            `),h.population&&(g+=`
              <p style="margin: 8px 0; color: var(--ink-dark);">
                <strong>Population:</strong> ${h.population}
              </p>
            `),h.established&&(g+=`
              <p style="margin: 8px 0; color: var(--ink-dark);">
                <strong>Established:</strong> ${h.established}
              </p>
            `),h.area&&(g+=`
              <p style="margin: 8px 0; color: var(--ink-dark);">
                <strong>Area:</strong> ${h.area} sq mi
              </p>
            `),h.poi&&(g+=`
              <p style="margin: 8px 0; color: var(--ink-dark);">
                <strong>Points of Interest:</strong> ${h.poi}
              </p>
            `),h.website&&(g+=`
              <p style="margin: 10px 0;">
                <a href="${h.website}" target="_blank" style="color: var(--wood-dark); text-decoration: underline;">
                  Visit County Website
                </a>
              </p>
            `);const v=In[m]||[];v.length>0&&(g+=`
              <div style="margin-top: 15px; padding-top: 15px; border-top: 2px solid var(--parchment-dark);">
                <p style="margin: 8px 0; color: var(--wood-dark);"><strong> Cities & Towns:</strong></p>
                <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px;">
            `,v.forEach(w=>{g+=`
                <a href="#" 
                   onclick="window.mtApp.openCityPage('${w}', '${p}', '${m}'); return false;"
                   style="display: inline-block; padding: 4px 10px; background: var(--parchment-light); 
                          border: 1px solid var(--wood-dark); border-radius: 4px; color: var(--wood-dark); 
                          text-decoration: none; font-size: 0.9em; transition: all 0.2s;"
                   onmouseover="this.style.background='var(--wood-dark)'; this.style.color='var(--parchment-light)';"
                   onmouseout="this.style.background='var(--parchment-light)'; this.style.color='var(--wood-dark)';">
                  ${w}
                </a>
              `}),g+=`
                </div>
              </div>
            `),g+="</div>",d.bindPopup(g,{maxWidth:350,className:"county-popup"}),d.on("click",function(){this.openPopup()}),d.bindTooltip(p,{permanent:!1,direction:"center",className:"county-label"})}}).addTo(this.map),this.map.fitBounds(this.countyLayer.getBounds()),console.log(" Montana county boundaries loaded with click functionality")}catch(n){console.error(" Failed to load county boundaries:",n),alert("Could not load county boundaries. Check console for details.")}}setupEventListeners(){const n=document.getElementById("sidebar-toggle"),i=document.getElementById("sidebar-close"),o=document.getElementById("sidebar-overlay");n&&n.addEventListener("click",()=>this.toggleSidebar()),i&&i.addEventListener("click",()=>this.closeSidebar()),o&&o.addEventListener("click",()=>this.closeSidebar());const a=document.getElementById("sidebar-admin"),u=document.getElementById("sidebar-business"),d=document.getElementById("sidebar-directory");a&&a.addEventListener("click",le=>{le.preventDefault(),this.closeSidebar(),this.toggleAdminPanel()}),u&&u.addEventListener("click",le=>{le.preventDefault(),this.closeSidebar(),this.toggleBusinessForm()}),d&&d.addEventListener("click",le=>{le.preventDefault(),this.closeSidebar(),this.showDirectory()});const m=document.getElementById("sidebar-marketplace");m&&m.addEventListener("click",le=>{le.preventDefault(),this.closeSidebar(),this.showMarketplace()}),document.getElementById("sidebar-signin-btn")?.addEventListener("click",()=>{this.closeSidebar(),this.showAuthModal("signin")}),document.getElementById("sidebar-register-btn")?.addEventListener("click",()=>{this.closeSidebar(),this.showAuthModal("register")}),document.getElementById("sidebar-profile-btn")?.addEventListener("click",()=>{this.closeSidebar(),this.showProfileModal()}),document.getElementById("sidebar-signout-btn-mobile")?.addEventListener("click",()=>{this.closeSidebar(),this.handleSignOut()}),document.getElementById("map-toggle-btn")?.addEventListener("click",()=>this.toggleMapVisibility());const p=document.getElementById("directory-btn");p&&p.addEventListener("click",()=>this.showDirectory());const h=document.getElementById("directory-search");h&&h.addEventListener("input",le=>this.filterDirectory(le.target.value));const g=document.getElementById("directory-back-map");g&&g.addEventListener("click",()=>this.showMapView());const v=document.getElementById("business-form");v&&v.addEventListener("submit",le=>this.handleBusinessSubmit(le));const w=document.getElementById("biz-county");w&&w.addEventListener("change",le=>this.updateCityDropdown(le.target.value));const S=document.getElementById("city-modal-close"),b=document.getElementById("city-modal-back");S&&S.addEventListener("click",()=>this.closeCityModal()),b&&b.addEventListener("click",()=>this.closeCityModal());const T=document.getElementById("county-back-map"),D=document.getElementById("county-open-admin");T&&T.addEventListener("click",()=>this.showMapView()),D&&D.addEventListener("click",()=>{this.currentCounty&&this.openAdminForCounty(this.currentCounty.fips,this.currentCounty.name)});const N=document.getElementById("city-back-county"),V=document.getElementById("city-open-admin");N&&N.addEventListener("click",()=>{this.currentCounty&&this.openCountyPage(this.currentCounty.fips,this.currentCounty.name)}),V&&V.addEventListener("click",()=>{this.currentCity&&this.currentCounty&&this.openAdminForCity(this.currentCounty.fips,this.currentCity.name)});const A=document.getElementById("umap-btn");A&&A.addEventListener("click",()=>this.toggleCountyLayer());const z=document.getElementById("business-btn");z&&z.addEventListener("click",()=>this.toggleBusinessForm());const F=document.getElementById("discussion-btn");F&&F.addEventListener("click",()=>this.toggleDiscussionBoard());const J=document.getElementById("hud-toggle-btn");J&&J.addEventListener("click",()=>this.toggleHUDPanel());const ie=document.getElementById("admin-btn");ie&&ie.addEventListener("click",()=>this.toggleAdminPanel());const Q=document.getElementById("admin-login-form");Q&&Q.addEventListener("submit",le=>this.handleAdminLogin(le));const me=document.getElementById("admin-logout-btn");me&&me.addEventListener("click",()=>this.handleAdminLogout()),document.querySelectorAll(".admin-tab").forEach(le=>{le.addEventListener("click",Ws=>this.switchAdminTab(Ws.target.dataset.tab))});const ve=document.getElementById("county-search");ve&&ve.addEventListener("input",le=>this.filterCounties(le.target.value));const we=document.getElementById("city-admin-county");we&&we.addEventListener("change",le=>this.loadCityList(le.target.value));const Oe=document.getElementById("city-admin-search");Oe&&Oe.addEventListener("input",le=>this.filterCityList(le.target.value));const je=document.getElementById("county-edit-form");je&&je.addEventListener("submit",le=>this.handleCountyUpdate(le));const He=document.getElementById("city-edit-form");He&&He.addEventListener("submit",le=>this.handleCityUpdate(le));const st=document.getElementById("modal-close-btn"),$e=document.getElementById("modal-cancel-btn");st&&st.addEventListener("click",()=>this.closeModal()),$e&&$e.addEventListener("click",()=>this.closeModal());const oe=document.getElementById("city-modal-close-btn"),U=document.getElementById("city-modal-cancel-btn");oe&&oe.addEventListener("click",()=>this.closeCityEditModal()),U&&U.addEventListener("click",()=>this.closeCityEditModal());const X=document.getElementById("admin-settings-form");X&&X.addEventListener("submit",le=>this.handlePasswordChange(le));const H=document.getElementById("add-user-btn");H&&H.addEventListener("click",()=>this.openAddUserModal());const C=document.getElementById("add-user-form");C&&C.addEventListener("submit",le=>this.handleAddUser(le));const R=document.getElementById("user-modal-close-btn"),re=document.getElementById("user-modal-cancel-btn");R&&R.addEventListener("click",()=>this.closeAddUserModal()),re&&re.addEventListener("click",()=>this.closeAddUserModal());const ae=document.getElementById("add-event-btn");ae&&ae.addEventListener("click",()=>this.openEventEditor());const ce=document.getElementById("event-filter-county"),de=document.getElementById("event-filter-type"),ge=document.getElementById("event-search");ce&&ce.addEventListener("change",()=>this.filterEventList()),de&&de.addEventListener("change",()=>this.filterEventList()),ge&&ge.addEventListener("input",()=>this.filterEventList());const pe=document.getElementById("event-edit-form");pe&&pe.addEventListener("submit",le=>this.handleEventSubmit(le));const Ee=document.getElementById("edit-event-county");Ee&&Ee.addEventListener("change",le=>this.updateEventCityDropdown(le.target.value));const Je=document.getElementById("event-modal-close-btn"),Mn=document.getElementById("event-modal-cancel-btn"),Ri=document.getElementById("event-delete-btn");Je&&Je.addEventListener("click",()=>this.closeEventEditModal()),Mn&&Mn.addEventListener("click",()=>this.closeEventEditModal()),Ri&&Ri.addEventListener("click",()=>this.handleEventDelete());const Tn=document.getElementById("marketplace-back-btn");Tn&&Tn.addEventListener("click",()=>this.showMapView());const Qn=document.getElementById("marketplace-signin-btn"),_i=document.getElementById("marketplace-register-btn");Qn&&Qn.addEventListener("click",()=>this.showAuthModal("signin")),_i&&_i.addEventListener("click",()=>this.showAuthModal("register"));const Oi=document.getElementById("marketplace-post-btn");Oi&&Oi.addEventListener("click",()=>this.openMarketplacePostModal());const Xn=document.getElementById("marketplace-filter-type"),ji=document.getElementById("marketplace-filter-county"),Zn=document.getElementById("marketplace-search");Xn&&Xn.addEventListener("change",()=>this.filterMarketplaceListings()),ji&&ji.addEventListener("change",()=>this.filterMarketplaceListings()),Zn&&Zn.addEventListener("input",()=>this.filterMarketplaceListings());const sn=document.getElementById("marketplace-post-form");sn&&sn.addEventListener("submit",le=>this.handleMarketplacePost(le));const Ht=document.getElementById("marketplace-modal-close-btn"),ei=document.getElementById("marketplace-modal-cancel-btn");Ht&&Ht.addEventListener("click",()=>this.closeMarketplacePostModal()),ei&&ei.addEventListener("click",()=>this.closeMarketplacePostModal());const $i=document.getElementById("marketplace-delete-btn");$i&&$i.addEventListener("click",()=>this.deleteMarketplaceListing());const Vi=document.getElementById("marketplace-view-close-btn");Vi&&Vi.addEventListener("click",()=>this.closeMarketplaceViewModal())}toggleMapVisibility(){const n=document.getElementById("map-collapsible"),i=document.getElementById("map-toggle-label"),o=document.getElementById("map-toggle-icon"),a=document.getElementById("map-toggle-btn");if(!n)return;n.classList.toggle("map-collapsed")?(i.textContent="Show Map",a.title="Show map",o.innerHTML='<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/>'):(i.textContent="Hide Map",a.title="Hide map",o.innerHTML='<path d="M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94"/><path d="M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19"/><line x1="1" y1="1" x2="23" y2="23"/>',this.map&&setTimeout(()=>this.map.invalidateSize(),50))}toggleCountyLayer(){this.countyLayer&&(this.map.hasLayer(this.countyLayer)?(this.map.removeLayer(this.countyLayer),console.log("County layer hidden")):(this.map.addLayer(this.countyLayer),console.log("County layer shown")))}toggleBusinessForm(n=null){const i=document.getElementById("business-form-section");if(i){const o=i.style.display==="none",a=n===null?o:n;i.style.display=a?"block":"none",this.setHeaderNavActive(a?"business-btn":null),this.setHash(a?"/montana/business":"/montana")}}toggleDiscussionBoard(n=null){const i=document.getElementById("map-section"),o=document.getElementById("discussion-section");if(o){const a=o.style.display==="none";(n===null?a:n)?(o.style.display="block",i&&(i.style.display="none"),this.setHeaderNavActive("discussion-btn"),this.setHash("/montana/discussion"),this.initializeDiscussionBoard()):(o.style.display="none",i&&(i.style.display="block"),this.setHeaderNavActive(),this.setHash("/montana"))}}initializeDiscussionBoard(){const n=document.getElementById("discussion-post-form");n&&n.addEventListener("submit",a=>this.handleDiscussionPost(a)),document.querySelectorAll(".filter-btn").forEach(a=>{a.addEventListener("click",u=>this.filterDiscussions(u.target.dataset.filter))});const i=document.getElementById("discussion-search");i&&i.addEventListener("input",a=>this.searchDiscussions(a.target.value));const o=document.getElementById("discussion-close-btn");o&&o.addEventListener("click",()=>this.toggleDiscussionBoard()),this.renderDiscussions(),this.updateLeaderboard()}async handleDiscussionPost(n){n.preventDefault();const i=JSON.parse(localStorage.getItem("currentUser")||"{}"),o=i.displayName||i.email?.split("@")[0]||"Community Member",a=document.getElementById("discussion-topic").value.trim(),u=document.getElementById("discussion-message").value.trim(),d=document.getElementById("discussion-category").value;if(!a||!u||!d){this.showNotification(" Please fill in all fields","error");return}this.trackPageView("discussion",`disc_${Date.now()}`,a);const m={id:`post_${Date.now()}`,username:o,topic:a,message:u,category:d,timestamp:new Date().toISOString(),helpful:0,replies:[],points:0};d==="wildlife"||d==="history"?m.points=15:d==="hiking"?m.points=10:d==="geology"?m.points=15:m.points=5,It.unshift(m),localStorage.setItem("discussionPosts",JSON.stringify(It)),Me[o]||(Me[o]={name:o,totalPoints:0,postCount:0,awards:[]}),Me[o].totalPoints+=m.points,Me[o].postCount+=1,localStorage.setItem("memberProfiles",JSON.stringify(Me)),this.awardMembersForActivity(o),this.ds.saveDiscussionPost(m).catch(p=>console.warn("Firestore post save failed:",p)),i.uid&&Me[o]&&this.ds.saveMemberProfile(i.uid,{...Me[o],uid:i.uid}).catch(p=>console.warn("Firestore member save failed:",p)),this.showNotification(` Discussion posted! You earned ${m.points} points!`,"success"),n.target.reset(),this.renderDiscussions(),this.updateLeaderboard()}getCategoryEmoji(n){return{wildlife:"",history:"",hiking:"",cities:"",geology:"",tips:"",general:""}[n]||""}getCategoryLabel(n){return{wildlife:"Wildlife & Nature",history:"History & Culture",hiking:"Hiking & Outdoor",cities:"Cities & Towns",geology:"Geology & Geography",tips:"Local Tips",general:"General"}[n]||"General"}renderDiscussions(n="all",i=""){const o=document.getElementById("discussions-list");if(!o)return;let a=It;if(n!=="all"&&(a=a.filter(p=>p.category===n)),i){const p=i.toLowerCase();a=a.filter(h=>h.topic.toLowerCase().includes(p)||h.message.toLowerCase().includes(p)||h.username.toLowerCase().includes(p))}if(a.length===0){o.innerHTML='<p class="empty-state">No discussions found.</p>';return}const u=JSON.parse(localStorage.getItem("currentUser")||"{}"),d=u.displayName||u.email?.split("@")[0]||"",m=Nt.isLoggedIn;o.innerHTML=a.map(p=>{const v=d&&p.username===d||m?`
        <button class="action-btn action-btn--edit" onclick="mtApp.openEditPostModal('${p.id}')"> Edit</button>
        <button class="action-btn action-btn--delete" onclick="mtApp.deletePost('${p.id}')"> Delete</button>
      `:"";return`
      <div class="discussion-post">
        <div class="post-header">
          <div class="post-author">
            <span class="post-author-name">${this.escapeHtml(p.username)}</span>
            <span class="post-author-rank">${this.getMemberRank(p.username)}</span>
          </div>
          <span class="post-time">${this.formatDate(p.timestamp)}</span>
        </div>
        <span class="post-category-badge">${this.getCategoryEmoji(p.category)} ${this.getCategoryLabel(p.category)}</span>
        <h3 class="post-topic">${this.escapeHtml(p.topic)}${p.edited?' <span class="post-edited-badge">(edited)</span>':""}</h3>
        <div class="post-content">${this.escapeHtml(p.message)}</div>
        <div class="post-stats">
          <div class="stat-item"> <span>${p.helpful||0} Helpful</span></div>
          <div class="stat-item"> <span>${p.points} Points</span></div>
          <div class="stat-item"> <span>${p.replies?p.replies.length:0} Replies</span></div>
        </div>
        <div class="post-actions">
          <button class="action-btn" onclick="mtApp.markPostHelpful('${p.id}')"> Helpful</button>
          <button class="action-btn" onclick="mtApp.togglePostReplies('${p.id}')"> Reply</button>
          ${v}
        </div>
        <div id="replies-${p.id}" class="post-replies" style="display: none;"></div>
      </div>
    `}).join("")}openEditPostModal(n){const i=It.find(u=>u.id===n);if(!i)return;document.getElementById("edit-post-id").value=i.id,document.getElementById("edit-post-topic").value=i.topic,document.getElementById("edit-post-message").value=i.message,document.getElementById("edit-post-category").value=i.category;const o=document.getElementById("discussion-edit-modal");o&&(o.style.display="flex");const a=document.getElementById("discussion-edit-form");a.onsubmit=u=>this.saveEditPost(u),document.getElementById("discussion-edit-close-btn").onclick=()=>this.closeEditPostModal(),document.getElementById("discussion-edit-cancel-btn").onclick=()=>this.closeEditPostModal()}closeEditPostModal(){const n=document.getElementById("discussion-edit-modal");n&&(n.style.display="none")}saveEditPost(n){n.preventDefault();const i=document.getElementById("edit-post-id").value,o=It.find(a=>a.id===i);o&&(o.topic=document.getElementById("edit-post-topic").value.trim(),o.message=document.getElementById("edit-post-message").value.trim(),o.category=document.getElementById("edit-post-category").value,o.edited=!0,o.editedAt=new Date().toISOString(),localStorage.setItem("discussionPosts",JSON.stringify(It)),this.ds.updateDiscussionPost(i,{topic:o.topic,message:o.message,category:o.category,edited:!0,editedAt:o.editedAt}).catch(a=>console.warn("Firestore post update failed:",a)),this.closeEditPostModal(),this.showNotification(" Post updated successfully!","success"),this.renderDiscussions())}deletePost(n){if(!confirm("Are you sure you want to delete this post? This cannot be undone."))return;const i=It.findIndex(u=>u.id===n);if(i===-1)return;const o=It[i];Me[o.username]&&(Me[o.username].totalPoints=Math.max(0,(Me[o.username].totalPoints||0)-(o.points||0)),Me[o.username].postCount=Math.max(0,(Me[o.username].postCount||1)-1),localStorage.setItem("memberProfiles",JSON.stringify(Me))),It.splice(i,1),localStorage.setItem("discussionPosts",JSON.stringify(It)),this.ds.deleteDiscussionPost(n).catch(u=>console.warn("Firestore post delete failed:",u));const a=JSON.parse(localStorage.getItem("currentUser")||"{}");a.uid&&Me[o.username]&&this.ds.saveMemberProfile(a.uid,{...Me[o.username],uid:a.uid}).catch(u=>console.warn("Firestore member save failed:",u)),this.showNotification(" Post deleted.","success"),this.renderDiscussions(),this.updateLeaderboard()}markPostHelpful(n){const i=It.find(o=>o.id===n);i&&(i.helpful=(i.helpful||0)+1,i.points=(i.points||0)+5,this.awardMembersForActivity(i.username),localStorage.setItem("discussionPosts",JSON.stringify(It)),this.ds.updateDiscussionPost(n,{helpful:i.helpful,points:i.points}).catch(o=>console.warn("Firestore helpful update failed:",o)),this.showNotification(" Marked as helpful! Author earned bonus points","success"),this.renderDiscussions(),this.updateLeaderboard())}togglePostReplies(n){const i=document.getElementById(`replies-${n}`);i&&(i.style.display=i.style.display==="none"?"block":"none")}filterDiscussions(n){document.querySelectorAll(".filter-btn").forEach(i=>{i.classList.remove("active")}),event&&event.target&&event.target.classList.add("active"),this.renderDiscussions(n)}searchDiscussions(n){const i=document.querySelector(".filter-btn.active")?.dataset.filter||"all";this.renderDiscussions(i,n)}updateLeaderboard(){const n=document.getElementById("leaderboard");if(!n)return;const i=Object.values(Me).sort((o,a)=>a.totalPoints-o.totalPoints).slice(0,10);if(i.length===0){n.innerHTML='<p class="empty-state">No members yet</p>';return}n.innerHTML=i.map((o,a)=>`
      <div class="member-item">
        <span class="member-rank">#${a+1}</span>
        <span class="member-name">${this.escapeHtml(o.name)}</span>
        <span class="member-points">${o.totalPoints} pts  ${o.postCount} posts</span>
      </div>
    `).join("")}awardMembersForActivity(n){if(!Me[n])return;const i=Me[n],o=i.awards||[];i.postCount>=10&&!o.includes("montana_expert")&&(i.awards.push("montana_expert"),this.showNotification(` ${n} earned the "Montana Expert" award!`,"success")),i.totalPoints>=200&&!o.includes("community_champion")&&(i.awards.push("community_champion"),this.showNotification(` ${n} earned the "Community Champion" award!`,"success")),localStorage.setItem("memberProfiles",JSON.stringify(Me));const a=JSON.parse(localStorage.getItem("currentUser")||"{}");a.uid&&Me[n]&&this.ds.saveMemberProfile(a.uid,{...Me[n],uid:a.uid}).catch(u=>console.warn("Firestore member award save failed:",u))}getMemberRank(n){const i=Me[n];return i?i.awards?.includes("community_champion")?" Champion":i.awards?.includes("montana_expert")?" Expert":i.totalPoints>=100?" Star Member":i.totalPoints>=50?" Active Member":" Member":" Member"}escapeHtml(n){const i=document.createElement("div");return i.textContent=n,i.innerHTML}formatDate(n){const i=new Date(n),a=new Date-i,u=Math.floor(a/6e4),d=Math.floor(a/36e5),m=Math.floor(a/864e5);return u<1?"Just now":u<60?`${u}m ago`:d<24?`${d}h ago`:m<7?`${m}d ago`:i.toLocaleDateString()}toggleSidebar(){const n=document.getElementById("sidebar"),i=document.getElementById("sidebar-overlay");n&&i&&(n.classList.contains("active")?this.closeSidebar():(n.classList.add("active"),i.classList.add("active")))}closeSidebar(){const n=document.getElementById("sidebar"),i=document.getElementById("sidebar-overlay");n&&i&&(n.classList.remove("active"),i.classList.remove("active"))}updateCityDropdown(n){const i=document.getElementById("biz-city");if(!i)return;i.innerHTML='<option value="">Select City...</option>';const o=In[n]||[];o.forEach(a=>{const u=document.createElement("option");u.value=a,u.textContent=a,i.appendChild(u)}),i.disabled=o.length===0}openCityPage(n,i,o){this.currentCounty={fips:o,name:i},this.currentCity={name:n},this.renderCityPage(n,i,o),this.showCityPage(),this.setBreadcrumb({countyName:i,cityName:n}),this.setHash(`/montana/${this.slugify(i)}/${this.slugify(n)}`);const a=document.getElementById("city-open-admin");a&&(a.style.display=Nt.isLoggedIn?"":"none"),this.trackPageView("city",`${o}_${this.slugify(n)}`,n,{county:i,fips:o})}renderCityPage(n,i,o){const a=document.getElementById("city-page-title"),u=document.getElementById("city-page-county-label"),d=document.getElementById("city-page-description"),m=document.getElementById("city-meta"),p=document.getElementById("city-page-activities"),h=document.getElementById("city-page-highlights"),g=document.getElementById("city-page-businesses"),v=document.getElementById("city-hero"),w=document.getElementById("city-hero-image");if(!a)return;const S=this.slugify(n),b=`${o}_${S}`,T=ro[b]||{};T.heroImage&&v&&w?(w.src=T.heroImage,w.alt=`${n} landscape`,v.style.display="block"):v&&(v.style.display="none"),a.textContent=n,u.textContent=`${i}  Montana`,d.textContent=T.description||`Discover ${n}, a community in ${i}, Montana.`;const D=[{label:"Population",value:T.population},{label:"Elevation",value:T.elevation},{label:"Website",value:T.website,isLink:!0}].filter(A=>A.value);if(D.length?m.innerHTML=D.map(A=>A.isLink?`<div class="county-meta-item"><span>${A.label}</span><a href="${A.value}" target="_blank">${A.value}</a></div>`:`<div class="county-meta-item"><span>${A.label}</span><strong>${A.value}</strong></div>`).join(""):m.innerHTML="",T.activities){const A=T.activities.split(",").map(z=>z.trim()).filter(Boolean);p.innerHTML=A.map(z=>`<span class="city-chip">${z}</span>`).join(" ")}else p.innerHTML="<em>No activities listed yet. Add them in the admin panel.</em>";if(T.highlights){const A=T.highlights.split(",").map(z=>z.trim()).filter(Boolean);h.innerHTML=A.map(z=>`<span class="city-chip">${z}</span>`).join(" ")}else h.innerHTML="<em>No highlights listed yet.</em>";const N=Zt.filter(A=>A.active&&A.city===n&&A.county===o);N.length>0?g.innerHTML=N.map(A=>`
        <div class="business-item" style="padding: 12px; margin-bottom: 10px; background: var(--parchment-light);
             border: 1px solid var(--wood-dark); border-radius: 6px;">
          <h4 style="margin: 0 0 8px 0; color: var(--wood-dark);">
            ${A.icon} ${A.name}
          </h4>
          <p style="margin: 4px 0; color: var(--ink-dark); font-size: 0.9em;"> ${A.address}</p>
          ${A.phone?`<p style="margin: 4px 0; color: var(--ink-dark); font-size: 0.9em;"> ${A.phone}</p>`:""}
          ${A.website?`<p style="margin: 8px 0 0 0;"><a href="${A.website}" target="_blank" style="color: var(--wood-dark); text-decoration: underline;">Visit Website</a></p>`:""}
        </div>
      `).join(""):g.innerHTML=`<p style="color: var(--ink-dark); font-style: italic;">No businesses registered in ${n} yet. Be the first!</p>`;const V=document.getElementById("city-events-list");if(V){const A=this.getCityEvents(o,S);V.innerHTML=this.renderEventsSection(A)}}showCityPage(){const n=document.getElementById("city-page"),i=document.getElementById("county-page"),o=document.getElementById("map-section"),a=document.getElementById("info-section"),u=document.getElementById("directory-section"),d=document.getElementById("city-modal");n&&(n.style.display="block"),i&&(i.style.display="none"),o&&(o.style.display="none"),a&&(a.style.display="none"),u&&(u.style.display="none"),d&&(d.style.display="none"),this.setHeaderNavActive()}closeCityModal(){const n=document.getElementById("city-modal");n&&(n.style.display="none"),this.currentCounty&&(this.currentCity=null,this.openCountyPage(this.currentCounty.fips,this.currentCounty.name))}buildCountyDirectory(){if(!document.getElementById("directory-grid"))return;const i=document.getElementById("city-admin-county"),o=Object.entries(Ft).map(([a,u])=>({fips:a,name:u,shortName:u.replace(/\s+County$/i,"")})).sort((a,u)=>a.shortName.localeCompare(u.shortName));this._directoryEntries=o,this.renderDirectoryGrid(o),i&&(i.innerHTML='<option value="">Select County...</option>',o.forEach(({fips:a,name:u})=>{const d=document.createElement("option");d.value=a,d.textContent=u,i.appendChild(d)}))}renderDirectoryGrid(n){const i=document.getElementById("directory-grid");if(i){if(n.length===0){i.innerHTML='<p class="empty-state">No counties match your search.</p>';return}i.innerHTML=n.map(({fips:o,name:a,shortName:u})=>{const d=Ii[o]||{},m=In[o]||[];return`
        <a href="#/montana/${this.slugify(a)}" class="directory-card"
           onclick="window.mtApp.openCountyPage('${o}', '${a.replace(/'/g,"\\'")}'); return false;">
          <h4>${u}</h4>
          <div class="directory-card-meta">
            ${d.seat?`<span> ${d.seat}</span>`:""}
            ${d.population?`<span> ${d.population}</span>`:""}
            <span> ${m.length} cities</span>
          </div>
        </a>
      `}).join("")}}filterDirectory(n){if(!this._directoryEntries)return;if(!n){this.renderDirectoryGrid(this._directoryEntries);return}const i=n.toLowerCase(),o=this._directoryEntries.filter(a=>a.name.toLowerCase().includes(i)||a.shortName.toLowerCase().includes(i)||a.fips.includes(n));this.renderDirectoryGrid(o)}showDirectory(){const n=document.getElementById("directory-section"),i=document.getElementById("map-section"),o=document.getElementById("county-page"),a=document.getElementById("city-page"),u=document.getElementById("admin-section"),d=document.getElementById("business-form-section");n&&(n.style.display="block"),i&&(i.style.display="none"),o&&(o.style.display="none"),a&&(a.style.display="none"),u&&(u.style.display="none"),d&&(d.style.display="none"),this.currentCounty=null,this.currentCity=null,this.setBreadcrumb({}),this.setHeaderNavActive("directory-btn"),this.setHash("/montana")}setHeaderNavActive(n=null){if(["directory-btn","business-btn","marketplace-nav-btn","discussion-btn","events-nav-btn","awards-btn"].forEach(o=>{const a=document.getElementById(o);a&&a.classList.remove("active")}),n){const o=document.getElementById(n);o&&o.classList.add("active")}}refresh(){window.location.reload()}addBusinessMarkers(){this.businessMarkers.forEach(n=>this.map.removeLayer(n)),this.businessMarkers=[],Zt.filter(n=>n.active).forEach(n=>{const i=n.city?`${n.address}, ${n.city}`:n.fullAddress||n.address,o=L.marker([n.lat,n.lng]).bindPopup(`
          <div>
            <h3>${n.icon} ${n.name}</h3>
            <p style="margin: 8px 0;"> ${i}</p>
            ${n.phone?`<p style="margin: 8px 0;"> ${n.phone}</p>`:""}
            ${n.website?`<p style="margin: 8px 0;"><a href="${n.website}" target="_blank" style="color: var(--wood-dark); text-decoration: underline;">Visit Website</a></p>`:""}
          </div>
        `).addTo(this.map);this.businessMarkers.push(o)})}async handleBusinessSubmit(n){n.preventDefault();const i=n.target.querySelector("button"),o=i.textContent;i.textContent="Geocoding Location...",i.disabled=!0;try{const a=document.getElementById("biz-county").value,u=document.getElementById("biz-city").value,d=document.getElementById("biz-address").value,m=document.querySelector('input[name="biz-plan"]:checked')?.value||"free",p=document.getElementById("biz-billing-status")?.value||"active",h={free:{label:"Free",monthlyPrice:0,featured:!1},pro:{label:"Pro",monthlyPrice:29,featured:!0},premium:{label:"Premium",monthlyPrice:79,featured:!0}},g=h[m]||h.free;if(!a||!u)throw new Error("Please select both county and city");const v=`${d}, ${u}, Montana, USA`,w=await new Promise((T,D)=>{this.geocoder.geocode({address:v,componentRestrictions:{country:"US",administrativeArea:"MT"}},(N,V)=>{V==="OK"&&N[0]?T({lat:N[0].geometry.location.lat(),lng:N[0].geometry.location.lng(),formatted:N[0].formatted_address}):D(new Error(`Geocoding failed: ${V}`))})}),S={id:"biz_"+Date.now(),name:document.getElementById("biz-name").value,county:a,city:u,address:d,fullAddress:w.formatted,phone:document.getElementById("biz-phone").value,website:document.getElementById("biz-website").value,icon:document.getElementById("biz-icon").value||"",plan:m,planLabel:g.label,monthlyPrice:g.monthlyPrice,featured:g.featured,billingStatus:p,lat:w.lat,lng:w.lng,active:!0,expires:new Date(Date.now()+720*60*60*1e3).toISOString()};Zt.push(S),localStorage.setItem("mtBusinesses",JSON.stringify(Zt)),this.addBusinessMarkers(),this.renderBusinessList(),alert(` ${S.name} added successfully!
 ${u}, ${w.formatted}
 Plan: ${S.planLabel}${S.monthlyPrice?` ($${S.monthlyPrice}/mo)`:" ($0/mo)"}
 Next renewal: ${new Date(S.expires).toLocaleDateString()}`),document.getElementById("business-form").reset(),document.getElementById("biz-city").innerHTML='<option value="">Select County First...</option>';const b=document.getElementById("biz-billing-status");b&&(b.value="active"),document.getElementById("business-form-section").style.display="none"}catch(a){alert(` ${a.message}

Please verify the address and try again.`)}finally{i.textContent=o,i.disabled=!1}}renderBusinessList(){const n=document.getElementById("business-list");if(!n)return;const i=Nt.isLoggedIn,o=Zt.filter(d=>i?!0:d.active&&(d.billingStatus||"active")!=="canceled").sort((d,m)=>(m.featured===!0)-(d.featured===!0));if(o.length===0){n.innerHTML='<p class="empty-state">No businesses listed yet</p>';return}const a=d=>({active:"Active",past_due:"Past Due",canceled:"Canceled"})[d]||"Active",u=d=>({active:"var(--mt-success)",past_due:"var(--mt-warning)",canceled:"var(--mt-danger)"})[d]||"var(--mt-success)";n.innerHTML=o.map(d=>{const m=d.billingStatus||"active";return`
      <div style="padding: 0.75rem; margin-bottom: 0.75rem; border-bottom: 1px solid var(--parchment-dark);">
        <strong>${d.icon} ${d.name}</strong>
        ${d.featured?'<span style="margin-left:8px;font-size:0.75rem;padding:2px 8px;border-radius:999px;background:var(--mt-gold-light);color:var(--mt-slate-900);">Featured</span>':""}<br>
        <small style="color: var(--ink-light);">${d.address}</small>
        <br><small style="color: var(--ink-light);">Plan: ${d.planLabel||"Free"}${d.monthlyPrice?`  $${d.monthlyPrice}/mo`:"  $0/mo"}</small>
        <br><small style="color: ${u(m)};">Billing: ${a(m)}</small>
        ${d.phone?`<br><small> ${d.phone}</small>`:""}
        ${i?`<div style="margin-top:8px; display:flex; gap:6px; flex-wrap:wrap;">
          <button class="nav-btn" style="padding:4px 8px; font-size:0.75rem;" onclick="mtApp.updateBusinessBillingStatus('${d.id}','active')">Set Active</button>
          <button class="nav-btn" style="padding:4px 8px; font-size:0.75rem;" onclick="mtApp.updateBusinessBillingStatus('${d.id}','past_due')">Set Past Due</button>
          <button class="nav-btn" style="padding:4px 8px; font-size:0.75rem;" onclick="mtApp.updateBusinessBillingStatus('${d.id}','canceled')">Set Canceled</button>
        </div>`:""}
      </div>
    `}).join("")}updateBusinessBillingStatus(n,i){const o=Zt.find(a=>a.id===n);o&&(o.billingStatus=i,o.active=i!=="canceled",localStorage.setItem("mtBusinesses",JSON.stringify(Zt)),this.addBusinessMarkers(),this.renderBusinessList(),this.showNotification(`Billing status updated to ${i.replace("_"," ")}.`,"success"))}setAdminMapSplitMode(n){document.body.classList.toggle("admin-map-split",n)}showAdminMapSplitView(){const n=document.getElementById("admin-section"),i=document.getElementById("map-section");["business-form-section","county-page","city-page","directory-section","info-section","discussion-section","events-section","awards-page-section","marketplace-section"].forEach(a=>{const u=document.getElementById(a);u&&(u.style.display="none")}),n&&(n.style.display="block"),i&&(i.style.display="block"),this.setAdminMapSplitMode(!0),this.map&&setTimeout(()=>this.map.invalidateSize(),80)}toggleAdminPanel(){const n=document.getElementById("admin-section"),i=["business-form-section","map-section","county-page","city-page","directory-section"];if(n.style.display==="none")this.setAdminMapSplitMode(!1),n.style.display="block",i.forEach(o=>{const a=document.getElementById(o);a&&(a.style.display="none")}),Nt.isLoggedIn?(document.getElementById("admin-login").style.display="none",document.getElementById("admin-dashboard").style.display="block",this.loadCountyList()):(document.getElementById("admin-login").style.display="block",document.getElementById("admin-dashboard").style.display="none");else{this.setAdminMapSplitMode(!1),n.style.display="none";const o=document.querySelector(".map-section");o&&(o.style.display="block")}}async handleAdminLogin(n){n.preventDefault();const i=document.getElementById("admin-password").value,o=document.getElementById("admin-email")?.value||"",a=document.getElementById("admin-login-error");a&&(a.style.display="none",a.textContent="");const u=await this.ds.login(o,i);u.success?(Nt.isLoggedIn=!0,document.getElementById("admin-login").style.display="none",document.getElementById("admin-dashboard").style.display="block",document.getElementById("admin-password").value="",document.getElementById("admin-email").value="",this.loadCountyList(),this.pendingCountyEdit&&(this.pendingCountyEdit.isCity?this.openAdminForCity(this.pendingCountyEdit.fips,this.pendingCountyEdit.name):this.openCountyEditor(this.pendingCountyEdit.fips,this.pendingCountyEdit.name),this.pendingCountyEdit=null)):(a&&(a.textContent=` ${u.error}`,a.style.display="block"),document.getElementById("admin-password").value="")}async handleAdminLogout(){Nt.isLoggedIn=!1,this.ds&&await this.ds.logout(),this.setAdminMapSplitMode(!1),document.getElementById("admin-dashboard").style.display="none",document.getElementById("admin-login").style.display="block",document.getElementById("admin-section").style.display="none";const n=document.querySelector(".map-section");n&&(n.style.display="block")}switchAdminTab(n){document.querySelectorAll(".admin-tab").forEach(o=>{o.classList.remove("active"),o.dataset.tab===n&&o.classList.add("active")}),document.querySelectorAll(".admin-tab-content").forEach(o=>{o.style.display="none"});const i=document.getElementById(`tab-${n}`);i&&(i.style.display="block"),n==="users"?this.loadUserList():n==="events"?(this.populateEventCountyDropdown(),this.loadEventList()):n==="community-awards"?this.setupCommunityAwardsTab():n==="analytics"&&this.renderAnalyticsDashboard()}loadCountyList(){if(!document.getElementById("county-list"))return;const i=Ft;this.allCounties=Object.entries(i).map(([o,a])=>({fips:o,name:a,data:Ii[o]||null})),this.allCounties.sort((o,a)=>o.name.localeCompare(a.name)),this.renderCountyList(this.allCounties)}renderCountyList(n){const i=document.getElementById("county-list"),o=document.getElementById("county-list-summary");if(!i)return;const a=[...n].sort((d,m)=>{const p=!!(d.data&&Object.keys(d.data).length>0),h=!!(m.data&&Object.keys(m.data).length>0);return p!==h?p?-1:1:d.name.localeCompare(m.name)}),u=a.filter(d=>d.data&&Object.keys(d.data).length>0).length;if(o&&(o.textContent=`${a.length} counties  ${u} customized  ${a.length-u} default`),a.length===0){i.innerHTML='<p class="empty-state">No counties found</p>';return}i.innerHTML=a.map(d=>{const m=d.data&&Object.keys(d.data).length>0,p=d.data||{},h=d.name.replace(/'/g,"\\'"),g=[p.description,p.population,p.seat,p.established,p.area,p.website,p.poi,p.heroImage],v=g.filter(b=>b&&String(b).trim()).length,w=Math.round(v/g.length*100),S=[p.seat?`Seat: ${p.seat}`:null,p.population?`Pop: ${p.population}`:null].filter(Boolean).join("  ");return`
        <div class="county-admin-row" data-fips="${d.fips}">
          <div class="county-admin-main">
            <div class="county-admin-title-row">
              <h4>${d.name}</h4>
              <span class="status-badge ${m?"has-data":"no-data"}">
                ${m?"Customized":"Default"}
              </span>
            </div>
            <p class="county-admin-meta">FIPS ${d.fips}${S?`  ${this.escapeHtml(S)}`:""}</p>
            <div class="county-admin-completion">
              <div class="county-admin-completion-head">
                <span>Content completion</span>
                <span>${w}% (${v}/${g.length} fields)</span>
              </div>
              <div class="county-admin-meter"><span style="width:${w}%"></span></div>
            </div>
          </div>
          <div class="county-admin-actions">
            <button class="nav-btn county-quick-btn" onclick="window.mtApp.openCountyPage('${d.fips}', '${h}')">
              View County Page
            </button>
            <button class="nav-btn county-quick-btn" onclick="window.mtApp.openCountyInMap('${d.fips}', '${h}')">
              Open in Map
            </button>
            <button class="submit-btn county-edit-btn" onclick="window.mtApp.openCountyEditor('${d.fips}', '${h}')">
              Edit County
            </button>
          </div>
        </div>
      `}).join("")}filterCounties(n){if(!n){this.renderCountyList(this.allCounties);return}const i=this.allCounties.filter(o=>o.name.toLowerCase().includes(n.toLowerCase())||o.fips.includes(n));this.renderCountyList(i)}openCountyEditor(n,i){this.currentEditingCounty=n;const o=Ii[n]||{};document.getElementById("modal-county-name").textContent=`Edit ${i}`,document.getElementById("edit-county-id").value=n,document.getElementById("edit-county-display-name").value=i,document.getElementById("edit-county-description").value=o.description||"",document.getElementById("edit-county-population").value=o.population||"",document.getElementById("edit-county-seat").value=o.seat||"",document.getElementById("edit-county-established").value=o.established||"",document.getElementById("edit-county-area").value=o.area||"",document.getElementById("edit-county-website").value=o.website||"",document.getElementById("edit-county-poi").value=o.poi||"",document.getElementById("edit-county-hero-image").value=o.heroImage||"",document.getElementById("county-edit-modal").style.display="flex"}closeModal(){document.getElementById("county-edit-modal").style.display="none",this.currentEditingCounty=null}async handleCountyUpdate(n){n.preventDefault();const i=n.target.querySelector('button[type="submit"]'),o=i?i.textContent:"";i&&(i.textContent="Saving...",i.disabled=!0);try{const a=document.getElementById("edit-county-id").value,u={description:document.getElementById("edit-county-description").value,population:document.getElementById("edit-county-population").value,seat:document.getElementById("edit-county-seat").value,established:document.getElementById("edit-county-established").value,area:document.getElementById("edit-county-area").value,website:document.getElementById("edit-county-website").value,poi:document.getElementById("edit-county-poi").value,heroImage:document.getElementById("edit-county-hero-image").value};this.ds&&await this.ds.saveCountyData(a,u),Ii[a]=u,this.loadCountyList(),this.closeModal(),this.currentCounty&&this.currentCounty.fips===a&&this.renderCountyPage(a,this.currentCounty.name),this.buildCountyDirectory(),this.showNotification(" County information updated successfully!","success")}catch(a){console.error("County save error:",a),this.showNotification(` Save failed: ${a.message||a}`,"error")}finally{i&&(i.textContent=o,i.disabled=!1)}}async handlePasswordChange(n){n.preventDefault();const i=document.getElementById("new-password").value,o=document.getElementById("confirm-password").value;if(!i||!o){alert(" Please fill in both password fields.");return}if(i!==o){alert(" Passwords do not match.");return}if(i.length<6){alert(" Password must be at least 6 characters long.");return}if(this.ds){const a=await this.ds.changePassword(i);if(!a.success){alert(` ${a.error}`);return}}Nt.password=i,localStorage.setItem("adminPassword",i),document.getElementById("new-password").value="",document.getElementById("confirm-password").value="",alert(" Admin password updated successfully!")}trackPageView(n,i,o,a={}){const u={type:n,id:i,name:o,extra:a,ts:Date.now()},d=JSON.parse(localStorage.getItem("analyticsViews"))||[];d.push(u),d.length>5e3&&d.splice(0,d.length-5e3),localStorage.setItem("analyticsViews",JSON.stringify(d)),window.ANALYTICS_VIEWS=d,this.ds&&typeof this.ds.trackView=="function"&&this.ds.trackView(u).catch(()=>{})}async renderAnalyticsDashboard(){let n=window.ANALYTICS_VIEWS||[];if(this.ds&&typeof this.ds.getAnalyticsViews=="function")try{n=await this.ds.getAnalyticsViews()}catch{}const i=Date.now(),o=864e5,a=n.filter(A=>i-A.ts<o),u=n.filter(A=>A.type==="county"),d=n.filter(A=>A.type==="city"),m=(A,z)=>{const F=document.getElementById(A);F&&(F.textContent=z)};m("stat-total-views",n.length.toLocaleString()),m("stat-today-views",a.length.toLocaleString()),m("stat-county-views",u.length.toLocaleString()),m("stat-city-views",d.length.toLocaleString()),m("stat-discussions",(window.DISCUSSION_POSTS||[]).length.toLocaleString());const p=this._eventsAllCache||[];m("stat-events-created",p.length.toLocaleString());const h=A=>{const z={};return A.forEach(F=>{z[F.id]||(z[F.id]={name:F.name,count:0,extra:F.extra||{}}),z[F.id].count++}),Object.values(z).sort((F,J)=>J.count-F.count)},g=(A,z,F=10)=>{const J=document.getElementById(A);if(!J)return;const ie=z.slice(0,F);if(ie.length===0){J.innerHTML='<p class="empty-state">No data yet.</p>';return}const Q=ie[0].count;J.innerHTML=ie.map(me=>`
        <div class="analytics-bar-row">
          <div class="analytics-bar-label" title="${me.name}">${me.name}</div>
          <div class="analytics-bar-track">
            <div class="analytics-bar-fill" style="width:${Math.round(me.count/Q*100)}%"></div>
          </div>
          <div class="analytics-bar-count">${me.count}</div>
        </div>
      `).join("")};g("chart-top-counties",h(u)),g("chart-top-cities",h(d));const v=document.getElementById("analytics-discussions");if(v){const A=(window.DISCUSSION_POSTS||[]).slice();A.sort((F,J)=>{const ie=(F.helpful||0)+(F.replies||[]).length;return(J.helpful||0)+(J.replies||[]).length-ie});const z=A.slice(0,8);z.length===0?v.innerHTML='<p class="empty-state">No discussions yet.</p>':v.innerHTML=`
          <table class="analytics-table">
            <thead><tr><th>Topic</th><th>Author</th><th>Category</th><th> Helpful</th><th> Replies</th></tr></thead>
            <tbody>
              ${z.map(F=>`
                <tr>
                  <td>${F.topic||""}</td>
                  <td>${F.username||""}</td>
                  <td>${F.category||""}</td>
                  <td>${F.helpful||0}</td>
                  <td>${(F.replies||[]).length}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
        `}const w=document.getElementById("analytics-feed");if(w){const A=n.slice().sort((z,F)=>F.ts-z.ts).slice(0,25);if(A.length===0)w.innerHTML='<p class="empty-state">No activity recorded yet.</p>';else{const z={county:"",city:"",event:"",discussion:""};w.innerHTML=A.map(F=>{const J=new Date(F.ts),ie=J.toLocaleDateString()+" "+J.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return`
            <div class="analytics-feed-row">
              <span class="analytics-feed-icon">${z[F.type]||""}</span>
              <span class="analytics-feed-name">${F.name}</span>
              <span class="analytics-feed-type">${F.type}</span>
              <span class="analytics-feed-time">${ie}</span>
            </div>
          `}).join("")}}const S=(window.BUSINESSES||[]).slice(),b=S.filter(A=>(A.billingStatus||"active")==="active"),T=S.filter(A=>A.billingStatus==="past_due"),D=S.filter(A=>A.billingStatus==="canceled"),N=b.reduce((A,z)=>A+Number(z.monthlyPrice||0),0);m("bill-total-businesses",S.length.toLocaleString()),m("bill-active",b.length.toLocaleString()),m("bill-past-due",T.length.toLocaleString()),m("bill-canceled",D.length.toLocaleString()),m("bill-mrr",`$${N.toLocaleString()}`);const V=document.getElementById("billing-breakdown");if(V){const z=[{key:"free",label:"Free"},{key:"pro",label:"Pro"},{key:"premium",label:"Premium"}].map(F=>{const J=S.filter(we=>(we.plan||"free")===F.key),ie=J.filter(we=>(we.billingStatus||"active")==="active"),Q=J.filter(we=>we.billingStatus==="past_due"),me=J.filter(we=>we.billingStatus==="canceled"),ve=ie.reduce((we,Oe)=>we+Number(Oe.monthlyPrice||0),0);return{label:F.label,total:J.length,active:ie.length,pastDue:Q.length,canceled:me.length,mrr:ve}});V.innerHTML=`
        <table class="analytics-table">
          <thead>
            <tr>
              <th>Plan</th>
              <th>Total</th>
              <th>Active</th>
              <th>Past Due</th>
              <th>Canceled</th>
              <th>MRR</th>
            </tr>
          </thead>
          <tbody>
            ${z.map(F=>`
              <tr>
                <td>${F.label}</td>
                <td>${F.total}</td>
                <td>${F.active}</td>
                <td>${F.pastDue}</td>
                <td>${F.canceled}</td>
                <td>$${F.mrr.toLocaleString()}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
      `}}buildCountySlugMap(){const n={};return Object.entries(Ft).forEach(([i,o])=>{const a=o.replace(/\s+County$/i,"");n[this.slugify(a)]=i}),n}slugify(n){return n.toString().toLowerCase().replace(/\s+county$/i,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}setHash(n){this.isUpdatingHash||(this.isUpdatingHash=!0,window.location.hash=`#${n}`,window.setTimeout(()=>{this.isUpdatingHash=!1},0))}setBreadcrumb({countyName:n=null,cityName:i=null}){const o=document.getElementById("breadcrumb-county"),a=document.getElementById("breadcrumb-city"),u=document.getElementById("breadcrumb-sep-county"),d=document.getElementById("breadcrumb-sep-city");!o||!a||!u||!d||(n?(o.textContent=n,o.classList.remove("disabled"),o.href=`#/montana/${this.slugify(n)}`,o.style.display="inline-flex",u.style.display="inline-flex"):(o.textContent="County",o.classList.add("disabled"),o.href="#/montana",o.style.display="none",u.style.display="none"),i?(a.textContent=i,a.style.display="inline-flex",d.style.display="inline-flex"):(a.textContent="City",a.style.display="none",d.style.display="none"))}showCountyPage(){this.setAdminMapSplitMode(!1);const n=document.getElementById("county-page"),i=document.getElementById("map-section"),o=document.getElementById("info-section"),a=document.getElementById("city-page"),u=document.getElementById("directory-section");n&&(n.style.display="block"),i&&(i.style.display="none"),o&&(o.style.display="none"),a&&(a.style.display="none"),u&&(u.style.display="none"),this.setHeaderNavActive()}showMapView(){this.setAdminMapSplitMode(!1);const n=document.getElementById("county-page"),i=document.getElementById("map-section"),o=document.getElementById("city-page"),a=document.getElementById("directory-section"),u=document.getElementById("admin-section"),d=document.getElementById("business-form-section");n&&(n.style.display="none"),i&&(i.style.display="block"),o&&(o.style.display="none"),a&&(a.style.display="none"),u&&(u.style.display="none"),d&&(d.style.display="none"),this.currentCounty=null,this.currentCity=null,this.setBreadcrumb({}),this.setHeaderNavActive(),this.setHash("/montana")}renderCountyPage(n,i){const o=document.getElementById("county-page-title"),a=document.getElementById("county-page-description"),u=document.getElementById("county-meta"),d=document.getElementById("county-cities-list"),m=document.getElementById("county-hero"),p=document.getElementById("county-hero-image");if(!o||!a||!u||!d)return;const h=Ii[n]||{},g=h.description||`Explore ${i} and discover local history, landmarks, and activities.`;h.heroImage&&m&&p?(p.src=h.heroImage,p.alt=`${i} landscape`,m.style.display="block"):m&&(m.style.display="none"),o.textContent=i,a.textContent=g;const v=[{label:"County Seat",value:h.seat},{label:"Population",value:h.population},{label:"Established",value:h.established},{label:"Area (sq mi)",value:h.area},{label:"Website",value:h.website,isLink:!0},{label:"Points of Interest",value:h.poi}].filter(b=>b.value);v.length===0?u.innerHTML='<p class="empty-state">No custom county details yet. Add them in the admin panel.</p>':u.innerHTML=v.map(b=>b.isLink?`
            <div class="county-meta-item">
              <span>${b.label}</span>
              <a href="${b.value}" target="_blank">${b.value}</a>
            </div>
          `:`
          <div class="county-meta-item">
            <span>${b.label}</span>
            <strong>${b.value}</strong>
          </div>
        `).join("");const w=In[n]||[];w.length===0?d.innerHTML='<p class="empty-state">No cities listed yet.</p>':d.innerHTML=w.map(b=>`
        <button class="city-chip" onclick="window.mtApp.openCityPage('${b}', '${i}', '${n}')">
          ${b}
        </button>
      `).join("");const S=document.getElementById("county-events-list");if(S){const b=this.getCountyEvents(n);S.innerHTML=this.renderEventsSection(b)}}openCountyPage(n,i){this.currentCounty={fips:n,name:i},this.currentCity=null,this.renderCountyPage(n,i),this.showCountyPage(),this.setBreadcrumb({countyName:i}),this.setHash(`/montana/${this.slugify(i)}`),this.trackPageView("county",n,i)}openCountyInMap(n,i){if(this.showAdminMapSplitView(),!this.countyLayer)return;let o=null;if(this.countyLayer.eachLayer(a=>{if(o)return;const d=(a.feature||{}).properties||{},m=d.GEOID||d.COUNTYFP||d.FIPS||d.fips;String(m)===String(n)&&(o=a)}),!o){this.showNotification(`Could not find ${i} on the current map layer.`,"error");return}o.getBounds&&this.map.fitBounds(o.getBounds(),{padding:[20,20]}),o.openPopup&&setTimeout(()=>o.openPopup(),150),this.updateHUD(`Focused map on ${i}.`,i)}handleRouteFromHash(){if(this.isUpdatingHash)return;const o=(window.location.hash||"#/montana").replace("#","").trim().split("/").filter(Boolean);if(o.length===0||o[0]!=="montana"){this.showMapView();return}if(o.length===1){this.showMapView();return}if(o.length===2&&o[1]==="marketplace"){this.showMarketplace();return}if(o.length===2&&o[1]==="events"){this.showEventsPage();return}if(o.length===2&&o[1]==="discussion"){this.toggleDiscussionBoard(!0);return}if(o.length===2&&o[1]==="business"){this.toggleBusinessForm(!0);return}const a=o[1],u=this.countySlugToFips[a],d=u?Ft[u]:null;if(!u||!d){this.showMapView();return}if(o.length===2){this.currentCounty={fips:u,name:d},this.currentCity=null,this.renderCountyPage(u,d),this.showCountyPage(),this.setBreadcrumb({countyName:d});return}const m=o[2],p=(In[u]||[]).find(h=>this.slugify(h)===m);p?(this.currentCounty={fips:u,name:d},this.currentCity={name:p},this.renderCityPage(p,d,u),this.showCityPage(),this.setBreadcrumb({countyName:d,cityName:p})):this.openCountyPage(u,d)}openAdminForCounty(n,i){const o=document.getElementById("admin-section");!o||!n||!i||(o.style.display==="none"&&this.toggleAdminPanel(),Nt.isLoggedIn?this.openCountyEditor(n,i):this.pendingCountyEdit={fips:n,name:i})}openAdminForCity(n,i){const o=document.getElementById("admin-section");if(!(!o||!n||!i))if(o.style.display==="none"&&this.toggleAdminPanel(),Nt.isLoggedIn){this.switchAdminTab("cities");const a=document.getElementById("city-admin-county");a&&(a.value=n),this.loadCityList(n),setTimeout(()=>{this.openCityEditor(n,i)},100)}else this.pendingCountyEdit={fips:n,name:i,isCity:!0}}loadCityList(n){const i=document.getElementById("city-list");if(!i)return;if(!n){i.innerHTML='<p class="empty-state">Select a county to see its cities.</p>',this._currentCityListFips=null,this._currentCityListEntries=null;return}this._currentCityListFips=n;const o=In[n]||[],a=Ft[n]||"Unknown County";this._currentCityListEntries=o.map(u=>{const d=this.slugify(u),m=`${n}_${d}`,p=ro[m]||null;return{name:u,slug:d,key:m,data:p,fips:n,countyName:a}}),this.renderCityList(this._currentCityListEntries)}renderCityList(n){const i=document.getElementById("city-list");if(i){if(!n||n.length===0){i.innerHTML='<p class="empty-state">No cities found for this county.</p>';return}i.innerHTML=n.map(o=>{const a=o.data&&Object.keys(o.data).length>0;return`
        <div class="county-item" data-city="${o.slug}">
          <div class="county-item-info">
            <h4>${o.name}</h4>
            <p>${o.countyName}</p>
          </div>
          <div class="county-item-status">
            <span class="status-badge ${a?"has-data":"no-data"}">
              ${a?" Customized":"Default"}
            </span>
            <button class="edit-btn" onclick="app.openCityEditor('${o.fips}', '${o.name.replace(/'/g,"\\'")}')">
              Edit
            </button>
          </div>
        </div>
      `}).join("")}}filterCityList(n){if(!this._currentCityListEntries)return;if(!n){this.renderCityList(this._currentCityListEntries);return}const i=n.toLowerCase(),o=this._currentCityListEntries.filter(a=>a.name.toLowerCase().includes(i));this.renderCityList(o)}openCityEditor(n,i){this.currentEditingCity={fips:n,name:i};const o=this.slugify(i),a=`${n}_${o}`,u=ro[a]||{};document.getElementById("modal-city-name").textContent=`Edit ${i}`,document.getElementById("edit-city-fips").value=n,document.getElementById("edit-city-slug").value=o,document.getElementById("edit-city-display-name").value=i,document.getElementById("edit-city-description").value=u.description||"",document.getElementById("edit-city-population").value=u.population||"",document.getElementById("edit-city-elevation").value=u.elevation||"",document.getElementById("edit-city-website").value=u.website||"",document.getElementById("edit-city-activities").value=u.activities||"",document.getElementById("edit-city-highlights").value=u.highlights||"",document.getElementById("edit-city-hero-image").value=u.heroImage||"",document.getElementById("city-edit-modal").style.display="flex"}closeCityEditModal(){document.getElementById("city-edit-modal").style.display="none",this.currentEditingCity=null}async handleCityUpdate(n){n.preventDefault();const i=n.target.querySelector('button[type="submit"]'),o=i?i.textContent:"";i&&(i.textContent="Saving...",i.disabled=!0);try{const a=document.getElementById("edit-city-fips").value,u=document.getElementById("edit-city-slug").value,d={description:document.getElementById("edit-city-description").value,population:document.getElementById("edit-city-population").value,elevation:document.getElementById("edit-city-elevation").value,website:document.getElementById("edit-city-website").value,activities:document.getElementById("edit-city-activities").value,highlights:document.getElementById("edit-city-highlights").value,heroImage:document.getElementById("edit-city-hero-image").value},m=`${a}_${u}`;this.ds&&await this.ds.saveCityData(a,u,d),ro[m]=d,this._currentCityListFips&&this.loadCityList(this._currentCityListFips),this.closeCityEditModal(),this.currentCity&&this.currentCounty&&this.currentCounty.fips===a&&this.slugify(this.currentCity.name)===u&&this.renderCityPage(this.currentCity.name,this.currentCounty.name,a),this.showNotification(" City information updated successfully!","success")}catch(a){console.error("City save error:",a),this.showNotification(` Save failed: ${a.message||a}`,"error")}finally{i&&(i.textContent=o,i.disabled=!1)}}checkBusinessExpiration(){const n=new Date;Zt.forEach(i=>{new Date(i.expires)<n&&(i.active=!1)}),localStorage.setItem("mtBusinesses",JSON.stringify(Zt))}initializeLayerData(){return{"hiking-trails":{name:"Hiking Trails (USFS)",tileUrl:"https://apps.fs.usda.gov/arcx/rest/services/EDW/EDW_TrailNFS_01/MapServer/tile/{z}/{y}/{x}",tileAttribution:'<a href="https://www.fs.usda.gov/" target="_blank">USDA Forest Service</a>',tileOpacity:.85,minZoom:8,features:[{name:"Highline Trail (Glacier NP)",lat:48.6974,lng:-113.718},{name:"Beartooth Pass Trail",lat:45.1633,lng:-109.55},{name:"Grinnell Glacier Trail",lat:48.7597,lng:-113.7179},{name:"Lamar Valley Trail",lat:44.8974,lng:-110.3342},{name:"Rattlesnake Wilderness",lat:46.9307,lng:-114.0121},{name:"Spanish Peaks Trail",lat:45.3222,lng:-111.3167},{name:"Pine Creek Lake Trail",lat:45.5061,lng:-110.6519},{name:"Jewel Basin",lat:48.1678,lng:-113.8833},{name:"Big Horn Lake Trail",lat:48.0833,lng:-113.25},{name:"Lolo Pass Trails",lat:46.6333,lng:-114.5833}],color:"#2E7D32",fact:"Montana has over 15,000 miles of hiking trails on National Forest land alone  more than any other state in the lower 48!"},"fishing-access":{name:"Fishing Access Sites (MT FWP)",features:[{name:"Kim Williams Trail (Missoula)",lat:46.868,lng:-113.954},{name:"Milltown Reservoir (Clark Fork)",lat:46.8833,lng:-113.8583},{name:"Warm Springs Ponds",lat:46.1833,lng:-112.8167},{name:"Nelson Reservoir (Phillips Co.)",lat:48.35,lng:-107.6167},{name:"Canyon Ferry Lake",lat:46.6667,lng:-111.7333},{name:"Havre Pond (Milk River)",lat:48.5461,lng:-109.6797},{name:"Bighorn River  Afterbay",lat:45.5028,lng:-107.4167},{name:"Missouri River  Cascade",lat:47.2667,lng:-111.7},{name:"Yellowstone River  Springdale",lat:46.1333,lng:-109.7833},{name:"Flathead River  Buffalo Bridge",lat:47.9333,lng:-114.0167},{name:"Rock Creek (Missoula Co.)",lat:46.55,lng:-113.4833},{name:"Madison River  Lyon Bridge",lat:45.5306,lng:-111.575},{name:"Gallatin River  Red Cliff",lat:45.4583,lng:-111.2083},{name:"Smith River  Camp Baker",lat:46.8333,lng:-110.8833},{name:"Tongue River Reservoir",lat:45.5,lng:-106.6667},{name:"Fort Peck Lake  Devils Creek",lat:47.95,lng:-107.9833},{name:"Fresno Reservoir (Havre)",lat:48.7333,lng:-110.15},{name:"Holter Lake",lat:47,lng:-111.7333},{name:"Lake Koocanusa",lat:48.8333,lng:-115.3167},{name:"Swan Lake",lat:47.8833,lng:-113.7167}],color:"#0277BD",fact:"MT FWP manages over 330 fishing access sites statewide  Montana is widely considered one of the top fly-fishing destinations in the world!"},watersheds:{name:"Watersheds",features:[{name:"Missouri River Basin",lat:47.5,lng:-111,type:"polygon"},{name:"Yellowstone River Basin",lat:46,lng:-108.5,type:"polygon"},{name:"Columbia River Basin",lat:47.8,lng:-114.5,type:"polygon"}],color:"#4A90E2",fact:"Montana is the only state that drains to three different oceans: the Pacific, Atlantic, and Hudson Bay!"},grizzly:{name:"Grizzly Bear Ranges",features:[{name:"Northern Continental Divide Ecosystem",lat:48.5,lng:-113.5,radius:5e4},{name:"Greater Yellowstone Ecosystem",lat:45,lng:-110.5,radius:4e4}],color:"#8B4513",fact:"Montana's grizzly population is around 1,900 bears, making it one of the best habitats in the lower 48 states!"},peaks:{name:"Major Mountain Peaks",features:[{name:"Granite Peak (12,807 ft)",lat:45.1634,lng:-109.8075},{name:"Mount Wood (12,649 ft)",lat:45.1689,lng:-109.8442},{name:"Castle Mountain (12,612 ft)",lat:45.1456,lng:-109.8206},{name:"Whitetail Peak (12,551 ft)",lat:45.1292,lng:-109.8561},{name:"Mount Peal (12,395 ft)",lat:45.1178,lng:-109.8978}],color:"#696969",fact:"Granite Peak is Montana's highest point at 12,807 feet and requires technical climbing skills to summit!"},"lewis-clark":{name:"Lewis & Clark Trail",features:[{name:"Great Falls Portage",lat:47.5053,lng:-111.2977},{name:"Three Forks",lat:45.8924,lng:-111.5502},{name:"Lemhi Pass",lat:44.6869,lng:-113.4097},{name:"Travelers' Rest",lat:46.8126,lng:-114.0899},{name:"Camp Disappointment",lat:48.8333,lng:-112.5833}],color:"#D2691E",fact:"Lewis and Clark spent more time in Montana than any other state - from April 1805 to August 1806!"},"native-lands":{name:"Native American Ancestral Lands",features:[{name:"Blackfeet Nation",lat:48.5,lng:-113,radius:5e4},{name:"Crow Nation",lat:45.5,lng:-107.5,radius:4e4},{name:"Salish & Kootenai",lat:47.5,lng:-114,radius:35e3},{name:"Northern Cheyenne",lat:45.6,lng:-106.5,radius:3e4},{name:"Assiniboine & Sioux",lat:48.2,lng:-105.5,radius:35e3}],color:"#CD853F",fact:"Montana is home to seven Indian reservations, representing 12 distinct tribal nations with rich cultural heritage!"},"ghost-towns":{name:"Historic Ghost Towns",features:[{name:"Bannack",lat:45.1617,lng:-112.9994,preservationMeter:92,status:"Fully Preserved",accessibility:"Open seasonally via paved + short gravel access",teachersNote:"Bannack held over 3,000 residents in its boom years, but fewer than a dozen stayed year-round by 1950."},{name:"Virginia City",lat:45.2938,lng:-111.9428,preservationMeter:88,status:"Living Ghost Town",accessibility:"Open year-round; museums and boardwalk tours in peak season",teachersNote:"Virginia City survived partly because tourism became its second economy after hard-rock mining faded."},{name:"Garnet",lat:46.8833,lng:-113.3667,preservationMeter:67,status:"Substantial Structures Remain",accessibility:"Best access late spring through fall; winter routes limited",teachersNote:"Many cabins at Garnet were re-used by families into the 1930s, well after the classic rush narrative ended."},{name:"Coolidge",lat:45.8833,lng:-109.7167,preservationMeter:34,status:"Mostly Foundations",accessibility:"Backcountry access; high-clearance recommended",teachersNote:"Coolidge was a company town tied to one mining systemwhen financing vanished, the community collapsed quickly."},{name:"Kendall",lat:47.2702,lng:-109.7154,preservationMeter:24,status:"Mostly Foundations",accessibility:"Public roads nearby; on-site remains are fragile",teachersNote:"Kendall had electric lights early for a frontier camp, but cyanide-based extraction also left a complex environmental legacy."},{name:"Granite",lat:46.5667,lng:-113.3833,preservationMeter:46,status:"Partial Ruins",accessibility:"Summer/fall access only; steep mountain roads",teachersNote:"Granites hilltop location made ore transport expensiveprofitability hinged as much on freight cost as metal price."}],color:"#A9A9A9",fact:"Bannack was Montana's first territorial capital in 1864, and ghost town preservation levels still change with weather, access, and restoration work.",popupBuilder:n=>{const i=Math.max(0,Math.min(100,Number(n.preservationMeter)||0));return`
            <div class="layer-popup ghost-popup">
              <strong>${this.escapeHtml(n.name)}</strong>
              <div class="ghost-popup-status">Status: ${this.escapeHtml(n.status||"Unknown")}</div>
              <div class="ghost-popup-access">Access: ${this.escapeHtml(n.accessibility||"Varies by season")}</div>
              <div class="ghost-popup-meter"><span style="width:${i}%"></span></div>
              <p class="ghost-popup-note"> Teachers Note: ${this.escapeHtml(n.teachersNote||"")}</p>
            </div>
          `}},"copper-king-era":{name:"Layer A: Copper King Era (Mines & Mansions)",features:[{name:"Butte Mining District",lat:46.0038,lng:-112.5348,note:"Once called the richest hill on Earth, Butte linked geology to global industrial power."},{name:"Anselmo Mine Yard",lat:46.0068,lng:-112.5179,note:"Headframes became symbols of industrial identity and labor organizing in Montana."},{name:"Copper King Mansion (Butte)",lat:46.0108,lng:-112.5387,note:"Lavish mansions reflected Gilded Age wealth concentration from extractive industries."},{name:"Original Governor's Mansion (Helena)",lat:46.5892,lng:-112.0318,note:"Political influence and mining money often moved through the same social networks."}],color:"#B45309",fact:"The Copper King era transformed Montana from frontier camps into globally connected industrial centers.",popupBuilder:n=>`<strong>${this.escapeHtml(n.name)}</strong><br><em>Layer A: Copper King Era</em><br>${this.escapeHtml(n.note||"")}`},"indigenous-heritage":{name:"Layer B: Indigenous Heritage & Tribal Lands",features:[{name:"Blackfeet Nation",lat:48.5,lng:-113,radius:5e4,note:"Keep in mind these are educational reference areas, not legal boundary maps."},{name:"Crow Nation",lat:45.5,lng:-107.5,radius:4e4,note:"Oral history and language revitalization are central to living heritage today."},{name:"Salish & Kootenai (CSKT)",lat:47.5,lng:-114,radius:35e3,note:"Treaty history and stewardship practices continue shaping policy and education."},{name:"Northern Cheyenne",lat:45.6,lng:-106.5,radius:3e4,note:"Community-led education work documents both resistance and cultural continuity."},{name:"Fort Peck (Assiniboine & Sioux)",lat:48.2,lng:-105.5,radius:35e3,note:"Regional history includes both displacement and modern sovereignty efforts."}],color:"#92400E",fact:"Montana's Indigenous history is living historyrooted in language, land, and sovereign communities.",popupBuilder:n=>`<strong>${this.escapeHtml(n.name)}</strong><br><em>Layer B: Indigenous Heritage</em><br>${this.escapeHtml(n.note||"")}`},"film-locations":{name:"Layer C: Modern Film Locations",features:[{name:"Chief Joseph Ranch (Yellowstone series)",lat:45.1168,lng:-113.9968,note:"Filming can reshape local tourism economics and community identity."},{name:"Missoula Valley (A River Runs Through It)",lat:46.8721,lng:-113.994,note:"Film narratives often blend multiple real locations into one on-screen place."},{name:"Paradise Valley (Yellowstone scenes)",lat:45.6486,lng:-110.5609,note:"Landscape cinematography helped brand Montana internationally as Big Sky Country."},{name:"Glacier Region (The Revenant area shoots)",lat:48.6967,lng:-113.7183,note:"Production logistics in remote terrain mirror many historical travel constraints."}],color:"#2563EB",fact:"Montana's landscapes keep drawing film and TV productions, connecting place-based history with modern media.",popupBuilder:n=>`<strong>${this.escapeHtml(n.name)}</strong><br><em>Layer C: Film Locations</em><br>${this.escapeHtml(n.note||"")}`},"wildlife-hotspots":{name:"Layer D: Wildlife Hotspots",features:[{name:"Freezeout Lake WMA (Snow Goose Migration)",lat:47.8044,lng:-111.6386,note:"Peak migration windows can bring tens of thousands of birds in concentrated pulses."},{name:"National Bison Range",lat:47.8,lng:-114.17,note:"A key site for understanding conservation history and species recovery debates."},{name:"Charles M. Russell NWR",lat:47.8828,lng:-107.8472,radius:7e4,note:"Large habitat mosaics matter more for many species than any single protected parcel."},{name:"Red Rock Lakes NWR",lat:44.6118,lng:-111.9434,note:"High-elevation wetlands are critical stopovers for migratory birds."}],color:"#059669",fact:"Wildlife hotspots reveal how migration, water, and land management intersect across Montana.",popupBuilder:n=>`<strong>${this.escapeHtml(n.name)}</strong><br><em>Layer D: Wildlife Hotspots</em><br>${this.escapeHtml(n.note||"")}`},mines:{name:"Active Mines",features:[{name:"Stillwater Mine (Platinum)",lat:45.4833,lng:-109.8833},{name:"Montana Tunnels (Gold)",lat:46.2833,lng:-111.85},{name:"Golden Sunlight (Gold)",lat:45.8167,lng:-112.0667}],color:"#FFD700",fact:"The Stillwater Mine produces platinum and palladium - Montana is one of only two places in the US where platinum is mined!"},agriculture:{name:"Agriculture Zones",features:[{name:"Golden Triangle (Wheat)",lat:48,lng:-110.5,radius:6e4},{name:"Gallatin Valley (Diversified)",lat:45.7,lng:-111,radius:3e4},{name:"Yellowstone Valley (Sugar Beets)",lat:46.3,lng:-108,radius:45e3}],color:"#90EE90",fact:`Montana's "Golden Triangle" produces over 40% of the state's wheat - one of the most productive wheat regions in the world!`},"wind-farms":{name:"Wind Energy Farms",features:[{name:"Rim Rock Wind Farm",lat:47.7667,lng:-111.5833},{name:"Glacier Wind Farm",lat:48.2833,lng:-111.4167},{name:"Spion Kop Wind Farm",lat:47.8333,lng:-111.5}],color:"#87CEEB",fact:"Montana has one of the best wind energy potentials in the US, with capacity to power millions of homes!"},"nature-hotspots":{name:"Nature Hot Spots",features:[{name:"Glacier National Park",lat:48.5,lng:-113.8,radius:5e4},{name:"Yellowstone National Park",lat:45,lng:-110.5,radius:6e4},{name:"Beartooth Scenic Highway",lat:45.4,lng:-109.8},{name:"Mission Mountains",lat:47.7,lng:-113.8,radius:3e4},{name:"Bob Marshall Wilderness",lat:47.9,lng:-112.5,radius:45e3}],color:"#228B22",fact:"Montana's nature hot spots attract millions of visitors annually to experience pristine wilderness and incredible biodiversity!"},"national-forests":{name:"National Forests",features:[{name:"Flathead National Forest",lat:48,lng:-113.5,radius:7e4},{name:"Kootenai National Forest",lat:48.5,lng:-115.5,radius:5e4},{name:"Gallatin National Forest",lat:45.3,lng:-110.5,radius:6e4},{name:"Bitterroot National Forest",lat:46,lng:-113.8,radius:55e3},{name:"Custer National Forest",lat:45.4,lng:-109,radius:35e3}],color:"#2D5016",fact:"Montana contains nearly 19 million acres of National Forest land - perfect for hiking, camping, and outdoor recreation!"},"wildlife-viewing":{name:"Wildlife Viewing Areas",features:[{name:"National Bison Range",lat:47.8,lng:-114.1},{name:"Rocky Mountain Elk Foundation",lat:47.9,lng:-113.9},{name:"Lee Metcalf Refuge",lat:46.8,lng:-113.6},{name:"Medicine Lake National Wildlife Refuge",lat:48.5,lng:-104.5},{name:"Charles M. Russell NWR",lat:48.5,lng:-107.5,radius:8e4}],color:"#FF6B35",fact:"Montana is one of the best destinations in North America for wildlife viewing - home to bears, elk, buffalo, and eagles!"},"scenic-byways":{name:"Scenic Byways & Drives",features:[{name:"Going-to-the-Sun Road",lat:48.4,lng:-113.8},{name:"Beartooth Highway",lat:45.4,lng:-109.8},{name:"Kings Hill Scenic Byway",lat:46.8,lng:-110.9},{name:"Elkhorn Scenic Loop",lat:46.6,lng:-112.7},{name:"Paradise Valley Loop",lat:46.7,lng:-111.3}],color:"#FF8C42",fact:"Montana's scenic byways offer some of the most stunning drives in America, with mountain vistas and pristine wilderness!"},geothermal:{name:"Geothermal Features",features:[{name:"Mammoth Hot Springs",lat:44.9741,lng:-110.8442},{name:"Norris Geyser Basin",lat:44.732,lng:-110.7086},{name:"White Mountain Hot Springs",lat:45.8,lng:-110.4},{name:"Broadwater Hot Springs",lat:46.6,lng:-111.9},{name:"Ennis Hot Springs",lat:45.3,lng:-111.7}],color:"#FF4500",fact:"Montana lies along the northern edge of the world's largest geothermal zone - Yellowstone Super Volcano!"},"wilderness-areas":{name:"Protected Wilderness Areas",features:[{name:"Abel Tasman Wilderness",lat:45.7,lng:-112,radius:35e3},{name:"Anaconda-Pintlar Wilderness",lat:45.9,lng:-112.8,radius:4e4},{name:"Beartooth Absaroka Wilderness",lat:45.2,lng:-109.5,radius:5e4},{name:"Cabinet Mountains Wilderness",lat:47.8,lng:-114,radius:3e4},{name:"Gates of the Mountains Wilderness",lat:46.9,lng:-111.4,radius:25e3}],color:"#1B4D3E",fact:"Montana protects over 3.5 million acres of designated Wilderness - pristine backcountry for solitude and adventure!"},"geological-wonders":{name:"Geological Wonders",features:[{name:"Giant Springs",lat:47.5,lng:-111.3},{name:"The Pinnacles",lat:48.3,lng:-115.1},{name:"Makoshika State Park",lat:48.3,lng:-105},{name:"Missouri River Breaks",lat:47.8,lng:-109.5,radius:5e4},{name:"Medicine Rocks State Park",lat:48.5,lng:-105.3}],color:"#8B7355",fact:"Montana's geological features reveal 2 billion years of Earth's history - from ancient granite to colorful badlands!"}}}initializeLayerController(){const n=document.querySelector(".layer-controller"),i=document.getElementById("layer-header"),o=document.getElementById("layer-toggle-btn"),a=document.getElementById("layer-minimize-btn");if(!n)return;const u=localStorage.getItem("layerControllerPosition");if(u){const S=JSON.parse(u);n.style.top=S.top,n.style.right=S.right,n.style.left="auto",n.style.bottom="auto"}localStorage.getItem("layerControllerMinimized")==="true"&&(n.classList.add("minimized"),a.textContent="+",a.title="Maximize");let m=!1,p,h,g,v;i&&i.addEventListener("mousedown",S=>{if(S.target.closest("button"))return;m=!0,n.classList.add("dragging");const b=n.getBoundingClientRect();p=S.clientX,h=S.clientY,g=b.left,v=b.top,S.preventDefault()}),document.addEventListener("mousemove",S=>{if(!m)return;const b=S.clientX-p,T=S.clientY-h;let D=g+b,N=v+T;const V=n.getBoundingClientRect(),A=window.innerWidth-V.width-10,z=window.innerHeight-V.height-10;D=Math.max(10,Math.min(D,A)),N=Math.max(10,Math.min(N,z)),n.style.left=D+"px",n.style.top=N+"px",n.style.right="auto",n.style.bottom="auto"}),document.addEventListener("mouseup",()=>{if(m){m=!1,n.classList.remove("dragging");const S=n.getBoundingClientRect(),b=window.innerWidth-S.right;localStorage.setItem("layerControllerPosition",JSON.stringify({top:n.style.top,right:b+"px"}))}}),a&&a.addEventListener("click",()=>{const S=n.classList.toggle("minimized");a.textContent=S?"+":"",a.title=S?"Maximize":"Minimize",localStorage.setItem("layerControllerMinimized",S)}),o&&o.addEventListener("click",()=>{n.classList.toggle("collapsed")}),document.querySelectorAll(".layer-checkbox").forEach(S=>{S.addEventListener("change",b=>{const T=b.target.dataset.layer;b.target.checked?this.addLayer(T):this.removeLayer(T)})})}addLayer(n){const i=this.layerData[n];if(!i||this.layers[n])return;const o=L.layerGroup();if(i.tileUrl){L.tileLayer(i.tileUrl,{attribution:i.tileAttribution||"",opacity:i.tileOpacity!==void 0?i.tileOpacity:.8,minZoom:i.minZoom||1,maxZoom:18}).addTo(o),i.features&&i.features.length&&i.features.forEach(u=>{const d=i.popupBuilder?i.popupBuilder(u):`<strong>${u.name}</strong><br><em>${i.name}</em>`;L.circleMarker([u.lat,u.lng],{color:i.color,fillColor:i.color,fillOpacity:.85,radius:7,weight:2}).bindPopup(d).addTo(o)}),o.addTo(this.map),this.layers[n]=o,this.updateHUD(i.fact,i.name);return}i.features.forEach(a=>{const u=i.popupBuilder?i.popupBuilder(a):`<strong>${a.name}</strong><br>${i.name}`;a.radius?L.circle([a.lat,a.lng],{color:i.color,fillColor:i.color,fillOpacity:.2,radius:a.radius,weight:2}).bindPopup(u).addTo(o):L.circleMarker([a.lat,a.lng],{color:i.color,fillColor:i.color,fillOpacity:.7,radius:8,weight:2}).bindPopup(u).addTo(o)}),o.addTo(this.map),this.layers[n]=o,this.updateHUD(i.fact,i.name)}removeLayer(n){this.layers[n]&&(this.map.removeLayer(this.layers[n]),delete this.layers[n])}initializeHUD(){const n=document.getElementById("hud-close"),i=document.getElementById("hud-panel");n&&i&&n.addEventListener("click",()=>{i.classList.add("hidden")}),this.map.on("moveend",()=>{this.updateHUDBasedOnLocation()})}updateHUD(n,i="Montana"){const o=document.getElementById("hud-content"),a=document.getElementById("hud-location"),u=document.getElementById("hud-panel");o&&a&&u&&(o.innerHTML=`<p>${n}</p>`,a.textContent=i,u.classList.remove("hidden"))}updateHUDBasedOnLocation(){const n=this.map.getCenter(),i=this.getRegionalFacts(n.lat,n.lng);if(i.length>0){const o=i[Math.floor(Math.random()*i.length)];this.updateHUD(o.fact,o.region)}}getRegionalFacts(n,i){const o=[];return i<-112&&(o.push({region:"Western Montana",fact:"This region is home to Glacier National Park, featuring over 700 miles of trails and stunning mountain scenery!"}),o.push({region:"Western Montana",fact:"The Bitterroot Valley was the site of the first permanent settlement by non-indigenous people in Montana in 1841."})),i>=-112&&i<-108&&(o.push({region:"Central Montana",fact:"The Continental Divide runs through this region - water on one side flows to the Pacific, the other to the Atlantic!"}),o.push({region:"Central Montana",fact:"Great Falls has the most powerful freshwater waterfalls in the United States!"})),i>=-108&&(o.push({region:"Eastern Montana",fact:"The Yellowstone River is the longest free-flowing river in the lower 48 states at 692 miles!"}),o.push({region:"Eastern Montana",fact:"Montana produces over 28% of U.S. coal, with most mines located in the southeastern region!"})),n>47.5&&o.push({region:"Northern Montana",fact:"The northern border with Canada spans 545 miles, the longest international border for any U.S. state!"}),n<=45.5&&o.push({region:"Southern Montana",fact:"Yellowstone National Park (mostly in Wyoming) extends into Montana's southern border!"}),o.push({region:"Montana",fact:"Montana has the largest migrating elk herd in the nation, with over 150,000 elk!"}),o.push({region:"Montana",fact:"The state fossil is the duck-billed dinosaur - over 14 species of dinosaurs have been discovered here!"}),o}toggleHUDPanel(){const n=document.getElementById("hud-panel");n&&n.classList.toggle("hidden")}initializeBigSkyDashboard(){const n=document.getElementById("big-sky-refresh-btn"),i=document.getElementById("big-sky-legend-btn"),o=document.getElementById("big-sky-legend-tooltip");n&&n.addEventListener("click",()=>this.refreshBigSkyDashboard(!0)),i&&o&&(i.addEventListener("click",()=>{o.classList.toggle("visible")}),document.addEventListener("click",a=>{o.classList.contains("visible")&&(a.target.closest("#big-sky-legend-btn")||a.target.closest("#big-sky-legend-tooltip")||o.classList.remove("visible"))})),this.refreshBigSkyDashboard(),this._bigSkyRefreshTimer&&clearInterval(this._bigSkyRefreshTimer),this._bigSkyRefreshTimer=setInterval(()=>{this.refreshBigSkyDashboard()},1800*1e3)}async refreshBigSkyDashboard(n=!1){const i=document.getElementById("big-sky-refresh-btn"),o=document.getElementById("big-sky-updated");i&&n&&(i.disabled=!0,i.textContent="Refreshing...");try{const[a,u]=await Promise.all([this.fetchSnotelSnowpackData(),this.fetchStreamflowData()]);this.renderBigSkySnotel(a),this.renderBigSkyStreamflow(u),this.updateBigSkyLegendMeta(a,u);const d=this.getHistoryFactOfTheDay(),m=document.getElementById("big-sky-fact");m&&(m.innerHTML=`
          <h4> History Fact of the Day</h4>
          <p><strong>${this.escapeHtml(d.title)}</strong></p>
          <p>${this.escapeHtml(d.text)}</p>
        `),o&&(o.textContent=`Last refresh: ${new Date().toLocaleString()} (AWDB + USGS)`)}catch(a){console.error("Big Sky dashboard refresh failed:",a),o&&(o.textContent="Last refresh failed. Showing latest available values.")}finally{i&&(i.disabled=!1,i.textContent="Refresh")}}async fetchSnotelSnowpackData(){const n=[{triplet:"924:MT:SNTL",label:"West Yellowstone"},{triplet:"876:MT:SNTL",label:"Wood Creek"},{triplet:"862:MT:SNTL",label:"White Mill"},{triplet:"858:MT:SNTL",label:"Whiskey Creek"}],i=new Date,o=new Date(i);o.setDate(i.getDate()-14);const a=g=>g.toISOString().slice(0,10),d=`https://wcc.sc.egov.usda.gov/awdbRestApi/services/v1/data?${new URLSearchParams({stationTriplets:n.map(g=>g.triplet).join(","),elements:"WTEQ",duration:"DAILY",beginDate:a(o),endDate:a(i)}).toString()}`,m=await fetch(d);if(!m.ok)throw new Error(`SNOTEL request failed (${m.status})`);const p=await m.json(),h=new Map(p.map(g=>[g.stationTriplet,g]));return n.map(g=>{const S=(h.get(g.triplet)?.data?.find(N=>N.stationElement?.elementCode==="WTEQ")?.values||[]).filter(N=>typeof N.value=="number"),b=S.length?S[S.length-1]:null,T=S.length>7?S[S.length-8]:null,D=b&&T?b.value-T.value:null;return{station:g.label,sweInches:b?.value??null,trendInches7d:D,observedDate:b?.date||null}})}renderBigSkySnotel(n){const i=document.getElementById("big-sky-snotel");if(i){if(!n||n.length===0){i.innerHTML='<p class="empty-state">No SNOTEL data available.</p>';return}i.innerHTML=n.map(o=>{if(o.sweInches===null)return`
          <div class="big-sky-row">
            <div class="big-sky-row-title">${this.escapeHtml(o.station)}</div>
            <div class="big-sky-row-meta">No recent SWE reading available</div>
          </div>
        `;const a=Math.max(5,Math.min(100,Math.round(o.sweInches/20*100))),u=o.trendInches7d===null?"7d trend unavailable":`${o.trendInches7d>=0?"+":""}${o.trendInches7d.toFixed(1)} in (7d)`;return`
        <div class="big-sky-row">
          <div class="big-sky-row-title">${this.escapeHtml(o.station)} <span>${o.sweInches.toFixed(1)} in SWE</span></div>
          <div class="big-sky-meter"><span style="width:${a}%"></span></div>
          <div class="big-sky-row-meta">${this.escapeHtml(u)}  Observed ${this.escapeHtml(o.observedDate||"n/a")}</div>
        </div>
      `}).join("")}}async fetchStreamflowData(){const n=[{id:"06054500",label:"Missouri at Toston",low:1500,high:8e3},{id:"06192500",label:"Yellowstone at Livingston",low:1e3,high:7e3},{id:"06214500",label:"Yellowstone at Billings",low:1800,high:12e3},{id:"12340500",label:"Clark Fork above Missoula",low:900,high:9e3}],o=`https://waterservices.usgs.gov/nwis/iv/?${new URLSearchParams({format:"json",sites:n.map(p=>p.id).join(","),parameterCd:"00060",siteStatus:"all"}).toString()}`,a=await fetch(o);if(!a.ok)throw new Error(`Streamflow request failed (${a.status})`);const d=(await a.json())?.value?.timeSeries||[],m=new Map;return d.forEach(p=>{const h=p?.sourceInfo?.siteCode?.[0]?.value;h&&m.set(h,p)}),n.map(p=>{const g=m.get(p.id)?.values?.[0]?.value||[],v=g.length?g[g.length-1]:null,w=g.length>1?g[g.length-2]:null,S=v?Number(v.value):null,b=v&&w?Number(v.value)-Number(w.value):null;let T="Unavailable";return S!==null&&!Number.isNaN(S)&&(S<p.low?T="Low":S>p.high?T="High":T="Normal"),{site:p.label,cfs:Number.isNaN(S)?null:S,trend:b,status:T,observedAt:v?.dateTime||null}})}renderBigSkyStreamflow(n){const i=document.getElementById("big-sky-streamflow");if(i){if(!n||n.length===0){i.innerHTML='<p class="empty-state">No streamflow data available.</p>';return}i.innerHTML=n.map(o=>{if(o.cfs===null)return`
          <div class="big-sky-row">
            <div class="big-sky-row-title">${this.escapeHtml(o.site)}</div>
            <div class="big-sky-row-meta">No recent discharge reading available</div>
          </div>
        `;const a=o.trend===null?"Trend unavailable":`${o.trend>=0?"+":""}${Math.round(o.trend)} cfs vs prior reading`;return`
        <div class="big-sky-row">
          <div class="big-sky-row-title">${this.escapeHtml(o.site)} <span>${Math.round(o.cfs).toLocaleString()} cfs</span></div>
          <div class="big-sky-row-meta"><span class="flow-status flow-${o.status.toLowerCase()}">${this.escapeHtml(o.status)}</span>  ${this.escapeHtml(a)}</div>
        </div>
      `}).join("")}}updateBigSkyLegendMeta(n,i){const o=document.getElementById("big-sky-legend-meta");if(!o)return;const a=(n||[]).map(g=>g.observedDate).filter(Boolean),u=(i||[]).map(g=>g.observedAt).filter(Boolean),d=a.length?a.sort((g,v)=>new Date(v)-new Date(g))[0]:null,m=u.length?u.sort((g,v)=>new Date(v)-new Date(g))[0]:null,p=d?new Date(d).toLocaleString():"n/a",h=m?new Date(m).toLocaleString():"n/a";o.textContent=`Latest AWDB: ${p}  Latest USGS: ${h}`}getHistoryFactOfTheDay(){const n=[{title:"Today's classroom lens: Mining camps became civic systems",text:"Many Montana boomtowns first built schools, newspapers, and courts to stabilize commerce before population settled permanently."},{title:"Today's classroom lens: Railroads reshaped settlement patterns",text:"Communities with rail access often outlasted nearby camps, because freight and migration routes determined long-term viability."},{title:"Today's classroom lens: Water rights drove local politics",text:"Across Montana, irrigation and river access shaped county-level decision making as much as party politics did."},{title:"Today's classroom lens: Tribal resilience is ongoing history",text:"Montana history is not just frontier chronologylanguage recovery, governance, and land stewardship remain active today."},{title:"Today's classroom lens: Fire and forestry are linked",text:"Historic logging patterns, drought cycles, and modern fuel loads all help explain why wildfire seasons vary across regions."},{title:"Today's classroom lens: Tourism became a second economy",text:"Places that once relied on extraction often transitioned by interpreting local history, landscapes, and cultural heritage."}],i=new Date,o=new Date(i.getFullYear(),0,0),a=Math.floor((i-o)/864e5);return n[a%n.length]}initializeGhostTownTracker(){this.renderGhostTownStatusTracker();const n=document.getElementById("ghost-town-status-list");!n||n.dataset.bound==="true"||(n.addEventListener("click",i=>{const o=i.target.closest(".ghost-town-zoom-btn");if(!o)return;const a=o.dataset.town;a&&this.focusGhostTown(a)}),n.dataset.bound="true")}renderGhostTownStatusTracker(){const n=document.getElementById("ghost-town-status-list"),i=this.layerData["ghost-towns"];if(!n||!i)return;const o=[...i.features].sort((a,u)=>(u.preservationMeter||0)-(a.preservationMeter||0));if(!o.length){n.innerHTML='<p class="empty-state">No ghost town records available.</p>';return}n.innerHTML=o.map(a=>{const u=Math.max(0,Math.min(100,Number(a.preservationMeter)||0)),d=a.status?.toLowerCase().includes("fully")?"status-strong":a.status?.toLowerCase().includes("mostly foundations")?"status-fragile":"status-moderate";return`
        <div class="ghost-town-row">
          <div class="ghost-town-row-title">
            <strong>${this.escapeHtml(a.name)}</strong>
            <span class="ghost-status-chip ${d}">${this.escapeHtml(a.status||"Unknown")}</span>
          </div>
          <div class="ghost-meter"><span style="width:${u}%"></span></div>
          <div class="ghost-town-row-meta">Preservation Meter: ${u}%  ${this.escapeHtml(a.accessibility||"Seasonal conditions vary")}</div>
          <p class="ghost-town-teacher-note"> Teachers Note: ${this.escapeHtml(a.teachersNote||"")}</p>
          <button class="nav-btn ghost-town-zoom-btn" data-town="${this.escapeHtml(a.name)}" type="button">Zoom to location</button>
        </div>
      `}).join("")}focusGhostTown(n){const o=this.layerData["ghost-towns"]?.features?.find(a=>a.name===n);if(!(!o||!this.map)){if(!this.layers["ghost-towns"]){this.addLayer("ghost-towns");const a=document.querySelector('.layer-checkbox[data-layer="ghost-towns"]');a&&(a.checked=!0)}this.map.setView([o.lat,o.lng],10,{animate:!0}),this.updateHUD(`${o.status}  ${o.accessibility}`,o.name)}}showNotification(n,i="success"){const o=document.createElement("div");o.className=`notification notification-${i}`,o.textContent=n,document.body.appendChild(o),setTimeout(()=>{o.classList.add("show")},10),setTimeout(()=>{o.classList.remove("show"),setTimeout(()=>o.remove(),300)},3e3)}async loadUserList(){const n=document.getElementById("users-header"),i=document.getElementById("user-help-text");if(!this.ds)return;this.ds.isFirebase()?(n&&(n.style.display="flex"),i&&(i.textContent="Add and manage admin users who can edit county and event information.")):(n&&(n.style.display="none"),i&&(i.textContent="Multi-user authentication requires Firebase. Configure Firebase in firebase-config.js to enable this feature."));const o=await this.ds.getUserList();this.renderUserList(o)}renderUserList(n){const i=document.getElementById("user-list");if(i){if(n.length===0){i.innerHTML='<p class="empty-state">No users found.</p>';return}i.innerHTML=n.map(o=>`
      <div class="user-item">
        <div class="user-item-info">
          <h4>${o.displayName||o.email}<span class="user-role-badge">${o.role||"admin"}</span></h4>
          <p>${o.email}</p>
          ${o.createdAt?`<p style="font-size: 0.8rem;">Created: ${new Date(o.createdAt).toLocaleDateString()}</p>`:""}
        </div>
        <div class="user-actions">
          ${o.uid!=="local"&&this.ds.isFirebase()?`<button class="nav-btn danger" onclick="mtApp.handleDeleteUser('${o.uid}')">Delete</button>`:""}
        </div>
      </div>
    `).join("")}}openAddUserModal(){const n=document.getElementById("add-user-modal");n&&(n.style.display="flex",document.getElementById("new-user-email").value="",document.getElementById("new-user-name").value="",document.getElementById("new-user-password").value="",document.getElementById("new-user-role").value="admin")}closeAddUserModal(){const n=document.getElementById("add-user-modal");n&&(n.style.display="none")}async handleAddUser(n){n.preventDefault();const i=document.getElementById("new-user-email").value,o=document.getElementById("new-user-name").value,a=document.getElementById("new-user-password").value,u=document.getElementById("new-user-role").value;if(!i||!a){this.showNotification("Please fill in all required fields.","error");return}if(a.length<6){this.showNotification("Password must be at least 6 characters.","error");return}const d=await this.ds.createUser(i,a,o,u);d.success?(this.showNotification(d.message||"User added successfully!","success"),this.closeAddUserModal(),this.loadUserList()):this.showNotification(d.error,"error")}async handleDeleteUser(n){if(!confirm(`Are you sure you want to remove this admin user?

They will lose access to the admin panel immediately.`))return;const o=await this.ds.deleteUser(n);o.success?(this.showNotification("User removed successfully.","success"),this.loadUserList()):this.showNotification(o.error,"error")}showEventsPage(){const n=document.getElementById("events-section"),i=document.getElementById("map-section"),o=document.getElementById("discussion-section"),a=document.getElementById("awards-page-section");n&&(n.style.display="block",i&&(i.style.display="none"),o&&(o.style.display="none"),a&&(a.style.display="none"),this.setHeaderNavActive("events-nav-btn"),this.setHash("/montana/events"),this._populateEventsCountyFilter(),this.loadPublicEvents())}closeEventsPage(){const n=document.getElementById("events-section"),i=document.getElementById("map-section");n&&(n.style.display="none"),i&&(i.style.display="block"),this.setHeaderNavActive(),this.setHash("/montana")}_countyNameMap(){return{30001:"Beaverhead",30003:"Big Horn",30005:"Blaine",30007:"Broadwater",30009:"Carbon",30011:"Carter",30013:"Cascade",30015:"Chouteau",30017:"Custer",30019:"Daniels",30021:"Dawson",30023:"Deer Lodge",30025:"Fallon",30027:"Fergus",30029:"Flathead",30031:"Gallatin",30033:"Garfield",30035:"Glacier",30037:"Golden Valley",30039:"Granite",30041:"Hill",30043:"Jefferson",30045:"Judith Basin",30047:"Lake",30049:"Lewis and Clark",30051:"Liberty",30053:"Lincoln",30055:"McCone",30057:"Madison",30059:"Meagher",30061:"Mineral",30063:"Missoula",30065:"Musselshell",30067:"Park",30069:"Petroleum",30071:"Phillips",30073:"Pondera",30075:"Powder River",30077:"Powell",30079:"Prairie",30081:"Ravalli",30083:"Richland",30085:"Roosevelt",30087:"Rosebud",30089:"Sanders",30091:"Sheridan",30093:"Silver Bow",30095:"Stillwater",30097:"Sweet Grass",30099:"Teton",30101:"Toole",30103:"Treasure",30105:"Valley",30107:"Wheatland",30109:"Wibaux",30111:"Yellowstone"}}_populateEventsCountyFilter(){const n=document.getElementById("events-filter-county");if(!n||n.options.length>1)return;const i=this._countyNameMap();Object.entries(i).sort((a,u)=>a[1].localeCompare(u[1])).forEach(([a,u])=>{const d=document.createElement("option");d.value=a,d.textContent=u+" County",n.appendChild(d)});const o=document.getElementById("ue-county");o&&o.options.length<=1&&Object.entries(i).sort((a,u)=>a[1].localeCompare(u[1])).forEach(([a,u])=>{const d=document.createElement("option");d.value=a,d.textContent=u+" County",o.appendChild(d)})}async loadPublicEvents(){const n=document.getElementById("public-events-grid");if(n){n.innerHTML='<div class="events-loading">Loading events...</div>';try{const i=await this.ds.getAllEvents();i.sort((o,a)=>{if(o.featured&&!a.featured)return-1;if(!o.featured&&a.featured)return 1;const u=o.startDate?new Date(o.startDate):new Date(864e13),d=a.startDate?new Date(a.startDate):new Date(864e13);return u-d}),this._eventsAllCache=i,this.renderPublicEvents(i)}catch(i){console.error("Failed to load events:",i),n.innerHTML='<div class="events-loading">Could not load events. Please try again.</div>'}}}filterPublicEvents(){const n=(document.getElementById("events-search")?.value||"").toLowerCase(),i=document.getElementById("events-filter-type")?.value||"",o=document.getElementById("events-filter-county")?.value||"";let a=this._eventsAllCache;n&&(a=a.filter(u=>u.name?.toLowerCase().includes(n)||u.description?.toLowerCase().includes(n)||u.address?.toLowerCase().includes(n))),i&&(a=a.filter(u=>u.type===i)),o&&(a=a.filter(u=>u.countyFips===o)),this.renderPublicEvents(a)}renderPublicEvents(n){const i=document.getElementById("public-events-grid");if(!i)return;if(!n||n.length===0){i.innerHTML='<p class="events-loading">No events found. Be the first to add one!</p>';return}const o={community:" Community",outdoor:" Outdoor",arts:" Arts & Culture",business:" Business",historical:" Historical",sports:" Sports",food:" Food & Drink",other:" Other"},a=this._countyNameMap();i.innerHTML=n.map(u=>{const d=o[u.type]||u.type||"Event",p=[a[u.countyFips]?a[u.countyFips]+" County":u.countyFips||"",u.citySlug].filter(Boolean).join("  "),h=u.startDate?new Date(u.startDate+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",g=u.endDate&&u.endDate!==u.startDate?"  "+new Date(u.endDate+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",v=u.startTime?" at "+u.startTime:"",w=h?` ${h}${g}${v}`:"",S=this.escapeHtml(u.description||"").substring(0,160)+((u.description||"").length>160?"...":""),b=this.escapeHtml(u.submittedBy||u.createdBy||"Community Member");return`
        <div class="event-card" onclick="mtApp.openEventDetailModal('${u.id}')">
          <div class="event-card-header">
            <div class="event-card-type-row">
              <span class="event-type-chip">${d}</span>
              ${u.featured?'<span class="event-featured-badge"> Featured</span>':""}
            </div>
            <h3 class="event-card-title">${this.escapeHtml(u.name)}</h3>
          </div>
          <div class="event-card-body">
            <div class="event-card-meta">
              ${w?`<span>${w}</span>`:""}
              ${p?`<span> ${p}</span>`:""}
              ${u.price?`<span> ${this.escapeHtml(u.price)}</span>`:""}
            </div>
            <p class="event-card-description">${S}</p>
          </div>
          <div class="event-card-footer">
            <span>Posted by ${b}</span>
            <button class="event-card-view-btn" onclick="event.stopPropagation(); mtApp.openEventDetailModal('${u.id}')">View Details</button>
          </div>
        </div>
      `}).join("")}showUserAddEventModal(){const n=JSON.parse(localStorage.getItem("currentUser")||"{}");if(!n.email&&!n.displayName){this.showNotification("Please sign in to add an event.","error"),this.showAuthModal("signin");return}this._populateEventsCountyFilter();const i=new Date().toISOString().split("T")[0];document.getElementById("ue-start").min=i,document.getElementById("ue-end").min=i,document.getElementById("user-event-form").reset(),document.getElementById("user-event-error").style.display="none",document.getElementById("user-event-modal").style.display="flex"}closeUserAddEventModal(){document.getElementById("user-event-modal").style.display="none"}async handleUserEventSubmit(n){n.preventDefault();const i=document.getElementById("user-event-submit-btn"),o=document.getElementById("user-event-error");o.style.display="none";const a=JSON.parse(localStorage.getItem("currentUser")||"{}"),u=a.displayName||a.email?.split("@")[0]||"Community Member",d=document.getElementById("ue-name").value.trim(),m=document.getElementById("ue-type").value,p=document.getElementById("ue-county").value,h=document.getElementById("ue-city").value.trim(),g=document.getElementById("ue-description").value.trim(),v=document.getElementById("ue-start").value,w=document.getElementById("ue-end").value,S=document.getElementById("ue-start-time").value,b=document.getElementById("ue-end-time").value,T=document.getElementById("ue-address").value.trim(),D=document.getElementById("ue-website").value.trim(),N=document.getElementById("ue-price").value.trim(),V=document.getElementById("ue-contact-email").value.trim();if(!d||!m||!p||!g||!v){o.textContent="Please fill in all required fields.",o.style.display="block";return}i.textContent="Submitting...",i.disabled=!0;try{const A={id:`evt_${Date.now()}`,name:d,type:m,countyFips:p,citySlug:h||null,description:g,startDate:v,endDate:w||null,startTime:S||null,endTime:b||null,address:T||null,website:D||null,price:N||null,contactEmail:V||null,submittedBy:u,submittedByUid:a.uid||null,isActive:!0,featured:!1,createdAt:new Date().toISOString()};await this.ds.saveEvent(A);const z=await this.ds.getAllEvents();Cn.length=0,Cn.push(...z),this._eventsAllCache=z,this.closeUserAddEventModal(),this.showNotification(" Event submitted! It's now live for everyone to see.","success"),this.filterPublicEvents();const F=JSON.parse(localStorage.getItem("memberProfiles"))||{};F[u]||(F[u]={name:u,totalPoints:0,postCount:0,awards:[]}),F[u].totalPoints=(F[u].totalPoints||0)+20,localStorage.setItem("memberProfiles",JSON.stringify(F)),window.MEMBER_PROFILES=F,a.uid&&this.ds.saveMemberProfile(a.uid,{...F[u],uid:a.uid}).catch(()=>{})}catch(A){console.error("Event submit error:",A),o.textContent="Failed to save event. Please try again.",o.style.display="block"}finally{i.textContent="Submit Event",i.disabled=!1}}async openEventDetailModal(n){const i=document.getElementById("event-detail-modal");if(!i)return;let o=this._eventsAllCache.find(S=>S.id===n);if(o||(o=(await this.ds.getAllEvents()).find(b=>b.id===n)),!o)return;this.trackPageView("event",o.id,o.name);const a=this._countyNameMap(),u={community:" Community",outdoor:" Outdoor",arts:" Arts & Culture",business:" Business",historical:" Historical",sports:" Sports",food:" Food & Drink",other:" Other"};document.getElementById("event-detail-title").textContent=o.name,document.getElementById("event-detail-type-chip").textContent=u[o.type]||o.type||"Event",document.getElementById("event-detail-county").textContent=a[o.countyFips]?a[o.countyFips]+" County"+(o.citySlug?`  ${o.citySlug}`:""):"";const d=o.startDate?new Date(o.startDate+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):"",m=o.endDate&&o.endDate!==o.startDate?" to "+new Date(o.endDate+"T00:00:00").toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"",p=o.startTime?` at ${o.startTime}${o.endTime?"  "+o.endTime:""}`:"";document.getElementById("event-detail-dates").textContent=d?` ${d}${m}${p}`:"",document.getElementById("event-detail-address").textContent=o.address?` ${o.address}`:"",document.getElementById("event-detail-description").textContent=o.description||"";const h=[];o.price&&h.push(` ${this.escapeHtml(o.price)}`),o.website&&h.push(` <a href="${this.escapeHtml(o.website)}" target="_blank" rel="noopener">Visit Website / Tickets</a>`),o.contactEmail&&h.push(` ${this.escapeHtml(o.contactEmail)}`),o.submittedBy&&h.push(` Posted by ${this.escapeHtml(o.submittedBy)}`),document.getElementById("event-detail-meta").innerHTML=h.join("<br>"),this._currentShareEvent=o;const g=`${window.location.origin}${window.location.pathname}#event-${o.id}`,v=encodeURIComponent(` ${o.name}  ${d}${o.address?" at "+o.address:""} | Montana Community Events`),w=encodeURIComponent(g);document.getElementById("share-facebook").onclick=()=>window.open(`https://www.facebook.com/sharer/sharer.php?u=${w}`,"_blank","width=600,height=400"),document.getElementById("share-twitter").onclick=()=>window.open(`https://twitter.com/intent/tweet?text=${v}&url=${w}`,"_blank","width=600,height=400"),document.getElementById("share-reddit").onclick=()=>window.open(`https://www.reddit.com/submit?url=${w}&title=${v}`,"_blank","width=700,height=500"),document.getElementById("share-email").onclick=()=>{const S=encodeURIComponent(`Check out this event: ${o.name}`),b=encodeURIComponent(`Hey! I thought you'd be interested in this event:

${o.name}
${d}${o.address?`
`+o.address:""}

${o.description||""}

Details: ${g}`);window.location.href=`mailto:?subject=${S}&body=${b}`},document.getElementById("share-copy").onclick=async()=>{try{await navigator.clipboard.writeText(g),this.showNotification(" Link copied to clipboard!","success")}catch{this.showNotification("Could not copy. URL: "+g,"error")}},i.style.display="flex"}closeEventDetailModal(){const n=document.getElementById("event-detail-modal");n&&(n.style.display="none")}async loadEventList(n={}){if(!document.getElementById("event-list"))return;let a=await this.ds.getAllEvents();if(n.countyFips&&(a=a.filter(u=>u.countyFips===n.countyFips)),n.type&&(a=a.filter(u=>u.type===n.type)),n.search){const u=n.search.toLowerCase();a=a.filter(d=>d.name.toLowerCase().includes(u)||d.description&&d.description.toLowerCase().includes(u))}this.renderEventList(a)}renderEventList(n){const i=document.getElementById("event-list");if(!i)return;if(n.length===0){i.innerHTML='<p class="empty-state">No events found.</p>';return}const o={community:"",business:"",historical:"",outdoor:""},a={community:"Community",business:"Business",historical:"Historical",outdoor:"Outdoor"};i.innerHTML=n.map(u=>{const d=Ft[u.countyFips]||u.countyFips,m=u.startDate?new Date(u.startDate).toLocaleDateString():"No date";return`
        <div class="event-item" onclick="mtApp.openEventEditor('${u.id}')">
          <div class="event-item-info">
            <h4>
              ${u.featured?" ":""}${u.name}
              <span class="event-type-badge">${o[u.type]||""} ${a[u.type]||u.type}</span>
            </h4>
            <p>${d}${u.citySlug?` - ${u.citySlug}`:""}  ${m}</p>
            <p>${u.description?u.description.substring(0,100)+(u.description.length>100?"...":""):""}</p>
          </div>
        </div>
      `}).join("")}async filterEventList(){const n=document.getElementById("event-filter-county")?.value||"",i=document.getElementById("event-filter-type")?.value||"",o=document.getElementById("event-search")?.value||"";await this.loadEventList({countyFips:n,type:i,search:o})}async openEventEditor(n=null){const i=document.getElementById("event-edit-modal"),o=document.getElementById("event-modal-title"),a=document.getElementById("event-delete-btn");if(i){if(this.populateEventCountyDropdown(),n){const d=(await this.ds.getAllEvents()).find(m=>m.id===n);if(!d){this.showNotification("Event not found.","error");return}o.textContent="Edit Event",a.style.display="block",document.getElementById("edit-event-id").value=d.id,document.getElementById("edit-event-name").value=d.name||"",document.getElementById("edit-event-type").value=d.type||"community",document.getElementById("edit-event-featured").checked=d.featured||!1,document.getElementById("edit-event-description").value=d.description||"",document.getElementById("edit-event-county").value=d.countyFips||"",await this.updateEventCityDropdown(d.countyFips),document.getElementById("edit-event-city").value=d.citySlug||"",document.getElementById("edit-event-start").value=d.startDate||"",document.getElementById("edit-event-end").value=d.endDate||"",document.getElementById("edit-event-recurring").value=d.recurrencePattern||"",document.getElementById("edit-event-price").value=d.price||"",document.getElementById("edit-event-address").value=d.address||"",document.getElementById("edit-event-website").value=d.website||"",document.getElementById("edit-event-email").value=d.contactEmail||"",document.getElementById("edit-event-phone").value=d.contactPhone||""}else o.textContent="Add Event",a.style.display="none",document.getElementById("edit-event-id").value="",document.getElementById("edit-event-name").value="",document.getElementById("edit-event-type").value="community",document.getElementById("edit-event-featured").checked=!1,document.getElementById("edit-event-description").value="",document.getElementById("edit-event-county").value="",document.getElementById("edit-event-city").innerHTML='<option value="">County-wide</option>',document.getElementById("edit-event-start").value="",document.getElementById("edit-event-end").value="",document.getElementById("edit-event-recurring").value="",document.getElementById("edit-event-price").value="",document.getElementById("edit-event-address").value="",document.getElementById("edit-event-website").value="",document.getElementById("edit-event-email").value="",document.getElementById("edit-event-phone").value="";i.style.display="flex"}}closeEventEditModal(){const n=document.getElementById("event-edit-modal");n&&(n.style.display="none")}async handleEventSubmit(n){n.preventDefault();const i=n.target.querySelector('button[type="submit"]'),o=i.textContent;i.textContent="Saving...",i.disabled=!0;try{const a=document.getElementById("edit-event-id").value,u=this.ds.getCurrentUser(),d={name:document.getElementById("edit-event-name").value,type:document.getElementById("edit-event-type").value,featured:document.getElementById("edit-event-featured").checked,description:document.getElementById("edit-event-description").value,countyFips:document.getElementById("edit-event-county").value,citySlug:document.getElementById("edit-event-city").value||null,startDate:document.getElementById("edit-event-start").value||null,endDate:document.getElementById("edit-event-end").value||null,recurrencePattern:document.getElementById("edit-event-recurring").value||null,price:document.getElementById("edit-event-price").value||null,address:document.getElementById("edit-event-address").value||null,website:document.getElementById("edit-event-website").value||null,contactEmail:document.getElementById("edit-event-email").value||null,contactPhone:document.getElementById("edit-event-phone").value||null,isActive:!0,createdBy:u?u.uid:"system"};a&&(d.id=a),await this.ds.saveEvent(d);const m=await this.ds.getAllEvents();Cn.length=0,Cn.push(...m),this.showNotification("Event saved successfully!","success"),this.closeEventEditModal(),this.filterEventList()}catch(a){console.error("Error saving event:",a),this.showNotification("Failed to save event. Please try again.","error")}finally{i.textContent=o,i.disabled=!1}}async handleEventDelete(){const n=document.getElementById("edit-event-id").value;if(!n)return;const i=document.getElementById("edit-event-name").value;if(confirm(`Are you sure you want to delete "${i}"?

This action cannot be undone.`))try{await this.ds.deleteEvent(n);const a=await this.ds.getAllEvents();Cn.length=0,Cn.push(...a),this.showNotification("Event deleted successfully.","success"),this.closeEventEditModal(),this.filterEventList()}catch(a){console.error("Error deleting event:",a),this.showNotification("Failed to delete event.","error")}}async updateEventCityDropdown(n){const i=document.getElementById("edit-event-city");if(!i||(i.innerHTML='<option value="">County-wide</option>',!n||!In[n]))return;In[n].forEach(a=>{const u=document.createElement("option");u.value=this.slugify(a),u.textContent=a,i.appendChild(u)})}populateEventCountyDropdown(){const n=document.getElementById("edit-event-county"),i=document.getElementById("event-filter-county");n&&(n.innerHTML='<option value="">Select County...</option>',Object.entries(Ft).sort((o,a)=>o[1].localeCompare(a[1])).forEach(([o,a])=>{const u=document.createElement("option");u.value=o,u.textContent=a,n.appendChild(u)})),i&&i.children.length<=1&&(i.innerHTML='<option value="">All Counties</option>',Object.entries(Ft).sort((o,a)=>o[1].localeCompare(a[1])).forEach(([o,a])=>{const u=document.createElement("option");u.value=o,u.textContent=a,i.appendChild(u)}))}getCountyEvents(n){const i=new Date;return Cn.filter(o=>o.countyFips===n&&o.isActive).filter(o=>!o.startDate||new Date(o.startDate)>=i||o.recurrencePattern).sort((o,a)=>o.startDate?a.startDate?new Date(o.startDate)-new Date(a.startDate):-1:1)}getCityEvents(n,i){const o=new Date;return Cn.filter(a=>a.countyFips===n&&a.isActive&&(!a.citySlug||a.citySlug===i)).filter(a=>!a.startDate||new Date(a.startDate)>=o||a.recurrencePattern).sort((a,u)=>a.startDate?u.startDate?new Date(a.startDate)-new Date(u.startDate):-1:1)}renderEventsSection(n){if(n.length===0)return'<p class="empty-state">No upcoming events.</p>';const i=this.groupEventsByType(n);let o="";const a={community:"",business:"",historical:"",outdoor:""},u={community:"Community Events",business:"Business Events",historical:"Historical Events & Facts",outdoor:"Outdoor Activities"};for(const[d,m]of Object.entries(i))o+=`<div class="event-type-section">
        <h4>${a[d]} ${u[d]}</h4>
        ${m.map(p=>this.renderEventCard(p)).join("")}
      </div>`;return o}renderEventCard(n){const i=n.startDate?this.formatEventDate(n.startDate,n.endDate,n.recurrencePattern):"";return`
      <div class="event-card">
        ${n.featured?'<span class="event-badge">Featured</span>':""}
        <h5>${n.name}</h5>
        <p class="event-description">${n.description}</p>
        ${i?`<p class="event-date"> ${i}</p>`:""}
        ${n.price?`<p class="event-price"> ${n.price}</p>`:""}
        ${n.address?`<p class="event-date"> ${n.address}</p>`:""}
        ${n.website?`<a href="${n.website}" target="_blank" class="event-link">Learn More </a>`:""}
      </div>
    `}formatEventDate(n,i,o){if(!n)return"";const a=new Date(n),u=i?new Date(i):null;return o==="annual"?`Annual - ${a.toLocaleDateString("en-US",{month:"long",day:"numeric"})}`:o==="monthly"?`Monthly - ${a.toLocaleDateString("en-US",{day:"numeric"})}`:o==="weekly"?`Weekly - ${a.toLocaleDateString("en-US",{weekday:"long"})}`:u?`${a.toLocaleDateString()} - ${u.toLocaleDateString()}`:a.toLocaleDateString()}groupEventsByType(n){return n.reduce((i,o)=>(i[o.type]||(i[o.type]=[]),i[o.type].push(o),i),{})}setupAuthListeners(){document.getElementById("auth-signin-btn")?.addEventListener("click",()=>this.showAuthModal("signin")),document.getElementById("auth-register-btn")?.addEventListener("click",()=>this.showAuthModal("register")),document.getElementById("auth-close-btn")?.addEventListener("click",()=>this.closeAuthModal()),document.querySelectorAll(".auth-tab").forEach(n=>{n.addEventListener("click",i=>this.switchAuthTab(i.target.dataset.authTab))}),document.getElementById("auth-goto-register")?.addEventListener("click",n=>{n.preventDefault(),this.switchAuthTab("register")}),document.getElementById("auth-goto-signin")?.addEventListener("click",n=>{n.preventDefault(),this.switchAuthTab("signin")}),document.getElementById("auth-goto-signin2")?.addEventListener("click",n=>{n.preventDefault(),this.switchAuthTab("signin")}),document.getElementById("auth-goto-forgot")?.addEventListener("click",n=>{n.preventDefault(),this.switchAuthTab("forgot")}),document.getElementById("signin-form")?.addEventListener("submit",n=>this.handleSignIn(n)),document.getElementById("register-form")?.addEventListener("submit",n=>this.handleRegister(n)),document.getElementById("forgot-form")?.addEventListener("submit",n=>this.handleForgotPassword(n)),document.querySelectorAll("#avatar-picker .avatar-option").forEach(n=>{n.addEventListener("click",i=>{document.querySelectorAll("#avatar-picker .avatar-option").forEach(o=>o.classList.remove("selected")),i.target.classList.add("selected"),document.getElementById("register-avatar").value=i.target.dataset.emoji})}),document.getElementById("user-profile-btn")?.addEventListener("click",()=>this.showProfileModal()),document.getElementById("profile-close-btn")?.addEventListener("click",()=>this.closeProfileModal()),document.getElementById("user-signout-btn")?.addEventListener("click",()=>this.handleSignOut()),document.querySelectorAll(".profile-nav-btn").forEach(n=>{n.addEventListener("click",i=>this.switchProfileTab(i.currentTarget.dataset.profileTab))}),document.getElementById("profile-settings-form")?.addEventListener("submit",n=>this.handleProfileUpdate(n)),document.getElementById("profile-privacy-form")?.addEventListener("submit",n=>this.handlePrivacyUpdate(n)),document.getElementById("user-password-form")?.addEventListener("submit",n=>this.handleUserPasswordChange(n)),document.getElementById("profile-signout-btn")?.addEventListener("click",()=>this.handleSignOut()),document.querySelectorAll("#profile-avatar-picker .avatar-option").forEach(n=>{n.addEventListener("click",i=>{document.querySelectorAll("#profile-avatar-picker .avatar-option").forEach(o=>o.classList.remove("selected")),i.target.classList.add("selected"),document.getElementById("profile-edit-avatar").value=i.target.dataset.emoji})}),document.getElementById("profile-edit-bio")?.addEventListener("input",n=>{const i=document.getElementById("bio-char-count");i&&(i.textContent=n.target.value.length)}),document.getElementById("awards-btn")?.addEventListener("click",()=>this.showAwardsPage()),document.getElementById("awards-page-close-btn")?.addEventListener("click",()=>this.closeAwardsPage()),document.getElementById("events-nav-btn")?.addEventListener("click",()=>this.showEventsPage()),document.getElementById("marketplace-nav-btn")?.addEventListener("click",()=>this.showMarketplace()),document.getElementById("events-close-btn")?.addEventListener("click",()=>this.closeEventsPage()),document.getElementById("events-add-btn")?.addEventListener("click",()=>this.showUserAddEventModal()),document.getElementById("user-event-modal-close")?.addEventListener("click",()=>this.closeUserAddEventModal()),document.getElementById("user-event-cancel")?.addEventListener("click",()=>this.closeUserAddEventModal()),document.getElementById("user-event-form")?.addEventListener("submit",n=>this.handleUserEventSubmit(n)),document.getElementById("event-detail-close")?.addEventListener("click",()=>this.closeEventDetailModal()),["events-search","events-filter-type","events-filter-county"].forEach(n=>{document.getElementById(n)?.addEventListener("input",()=>this.filterPublicEvents()),document.getElementById(n)?.addEventListener("change",()=>this.filterPublicEvents())}),this.ds&&this.ds.onAuthChange&&this.ds.onAuthChange(n=>{this.ds.isFirebase&&this.ds.isFirebase()&&(n&&(n.email||n.displayName)?localStorage.setItem("currentUser",JSON.stringify({email:n.email||"",displayName:n.displayName||n.email?.split("@")[0]||"User",uid:n.uid||""})):localStorage.removeItem("currentUser")),this.updateAuthUI(n)})}showAuthModal(n="signin"){const i=document.getElementById("auth-section");i&&(i.style.display="block",this.switchAuthTab(n))}closeAuthModal(){const n=document.getElementById("auth-section");n&&(n.style.display="none")}switchAuthTab(n){document.querySelectorAll(".auth-tab-content").forEach(a=>a.style.display="none"),document.querySelectorAll(".auth-tab").forEach(a=>a.classList.remove("active"));const i=document.getElementById(`auth-tab-${n}`),o=document.querySelector(`.auth-tab[data-auth-tab="${n}"]`);i&&(i.style.display="block"),o&&o.classList.add("active")}async handleSignIn(n){n.preventDefault();const i=document.getElementById("signin-email").value.trim(),o=document.getElementById("signin-password").value.trim(),a=document.getElementById("signin-error");if(a.style.display="none",!i||!o){a.textContent="Please fill in all fields",a.style.display="block";return}const u=await this.ds.login(i,o);u.success?(localStorage.setItem("currentUser",JSON.stringify(u.user)),this.closeAuthModal(),this.showNotification(" Signed in successfully!","success"),this.updateAuthUI(u.user),n.target.reset()):(a.textContent=u.error||"Sign in failed",a.style.display="block")}async handleRegister(n){n.preventDefault();const i=document.getElementById("register-name").value.trim(),o=document.getElementById("register-email").value.trim(),a=document.getElementById("register-password").value.trim(),u=document.getElementById("register-confirm").value.trim(),d=document.getElementById("register-avatar").value,m=document.getElementById("register-error");if(m.style.display="none",!i||!o||!a){m.textContent="Please fill in all required fields",m.style.display="block";return}if(a!==u){m.textContent="Passwords do not match",m.style.display="block";return}if(a.length<6){m.textContent="Password must be at least 6 characters",m.style.display="block";return}const p=await this.ds.register(o,a,i);if(p.success){localStorage.setItem("currentUser",JSON.stringify({email:o,displayName:i,uid:p.user.uid||o}));const h=JSON.parse(localStorage.getItem("memberProfiles"))||{};h[i]={name:i,email:o,totalPoints:0,postCount:0,helpfulCount:0,awards:[],avatarEmoji:d,bio:"",joinedAt:new Date().toISOString(),role:"member"},localStorage.setItem("memberProfiles",JSON.stringify(h)),this.closeAuthModal(),this.showNotification(` Welcome to Montana Explorer, ${i}!`,"success"),this.updateAuthUI(p.user),n.target.reset()}else m.textContent=p.error||"Registration failed",m.style.display="block"}async handleForgotPassword(n){n.preventDefault();const i=document.getElementById("forgot-email").value.trim(),o=document.getElementById("forgot-error"),a=document.getElementById("forgot-success");if(o.style.display="none",a.style.display="none",!i){o.textContent="Please enter your email address",o.style.display="block";return}const u=await this.ds.resetPassword(i);u.success?(a.textContent=u.message||" Password reset email sent!",a.style.display="block",n.target.reset(),setTimeout(()=>{this.switchAuthTab("signin")},3e3)):(o.textContent=u.error||"Password reset failed",o.style.display="block")}async handleSignOut(){await this.ds.logout(),localStorage.removeItem("currentUser"),this.updateAuthUI(null),this.closeProfileModal(),this.showNotification(" Signed out successfully","success")}updateAuthUI(n){const i=document.getElementById("auth-nav"),o=document.getElementById("user-nav");if(n&&(n.email||n.displayName)){const a=n.displayName||n.email?.split("@")[0]||"User";if(i&&(i.style.display="none"),o){o.style.display="flex";const b=JSON.parse(localStorage.getItem("memberProfiles"))||{},D=Object.values(b).find(N=>N.email===n.email||N.name===a)?.avatarEmoji||"";document.getElementById("user-display-name").textContent=a,document.getElementById("user-avatar-emoji").textContent=D}this.currentUser={email:n.email,displayName:a,uid:n.uid};const u=document.getElementById("events-add-btn");u&&(u.style.display="inline-flex");const d=document.getElementById("sidebar-auth-guest"),m=document.getElementById("sidebar-auth-user");d&&(d.style.display="none"),m&&(m.style.display="block");const p=n.displayName||n.email?.split("@")[0]||"User",h=JSON.parse(localStorage.getItem("memberProfiles"))||{},g=Object.values(h).find(b=>b.email===n.email||b.name===p),v=document.getElementById("sidebar-user-avatar"),w=document.getElementById("sidebar-user-name"),S=document.getElementById("sidebar-user-email");v&&(v.textContent=g?.avatarEmoji||""),w&&(w.textContent=p),S&&(S.textContent=n.email||"")}else{i&&(i.style.display="flex"),o&&(o.style.display="none"),this.currentUser=null;const a=document.getElementById("events-add-btn");a&&(a.style.display="none");const u=document.getElementById("sidebar-auth-guest"),d=document.getElementById("sidebar-auth-user");u&&(u.style.display="block"),d&&(d.style.display="none")}}switchProfileTab(n){document.querySelectorAll(".profile-nav-btn").forEach(i=>{i.classList.toggle("active",i.dataset.profileTab===n)}),document.querySelectorAll(".profile-tab-panel").forEach(i=>{i.style.display=i.id===`profile-tab-${n}`?"flex":"none"})}showProfileModal(){const n=document.getElementById("profile-section"),i=JSON.parse(localStorage.getItem("currentUser")||"{}"),o=i.displayName||i.email?.split("@")[0]||"Member",a=JSON.parse(localStorage.getItem("memberProfiles"))||{},u=a[o]||Object.values(a).find(w=>w.email===i.email)||{};if(!n)return;n.style.display="block",this.switchProfileTab("overview");const d=u.avatarEmoji||"";document.getElementById("profile-avatar-display").textContent=d,document.getElementById("profile-display-name").textContent=u.name||o,document.getElementById("profile-email-display").textContent=i.email||"",document.getElementById("profile-rank").textContent=this.getMemberRank(o);const m=u.totalPoints||0,p=u.postCount||0,h=(u.awards||[]).length;document.getElementById("profile-total-points").textContent=m,document.getElementById("profile-post-count").textContent=p,document.getElementById("profile-award-count").textContent=h,document.getElementById("activity-posts").textContent=p,document.getElementById("activity-points").textContent=m,document.getElementById("activity-awards").textContent=h,this.renderMemberAwards(u),document.getElementById("profile-edit-name").value=u.name||o,document.getElementById("profile-edit-bio").value=u.bio||"",document.getElementById("profile-edit-avatar").value=d;const g=document.getElementById("bio-char-count");g&&(g.textContent=(u.bio||"").length),document.querySelectorAll("#profile-avatar-picker .avatar-option").forEach(w=>{w.classList.toggle("selected",w.dataset.emoji===d)}),document.getElementById("profile-show-leaderboard").checked=u.settings?.showOnLeaderboard??!0,document.getElementById("profile-public-profile").checked=u.settings?.publicProfile??!0,document.getElementById("profile-email-notifications").checked=u.settings?.emailNotifications??!0,document.getElementById("profile-account-email").textContent=i.email||"",document.getElementById("profile-member-since").textContent=u.joinedAt?new Date(u.joinedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Montana Explorer Member",document.getElementById("profile-account-posts").textContent=p;const v=document.getElementById("user-password-form");v&&v.reset(),["user-password-error","user-password-success"].forEach(w=>{const S=document.getElementById(w);S&&(S.style.display="none")})}closeProfileModal(){const n=document.getElementById("profile-section");n&&(n.style.display="none")}async handleProfileUpdate(n){n.preventDefault();const i=n.target.querySelector('button[type="submit"]');i&&(i.textContent="Saving...",i.disabled=!0);try{const o=JSON.parse(localStorage.getItem("currentUser")||"{}"),a=o.displayName||o.email?.split("@")[0]||"Member",u=document.getElementById("profile-edit-name").value.trim()||a,d=document.getElementById("profile-edit-bio").value.trim(),m=document.getElementById("profile-edit-avatar").value,p=JSON.parse(localStorage.getItem("memberProfiles"))||{},h=Object.keys(p).find(v=>p[v].email===o.email)||a,g=p[h]||{};if(h!==u&&delete p[h],p[u]={...g,name:u,bio:d,avatarEmoji:m,email:o.email,settings:{showOnLeaderboard:g.settings?.showOnLeaderboard??!0,publicProfile:g.settings?.publicProfile??!0,emailNotifications:g.settings?.emailNotifications??!0}},localStorage.setItem("memberProfiles",JSON.stringify(p)),this.ds&&this.ds.isFirebase&&this.ds.isFirebase())try{const{auth:v}=window._firebaseInternals||{};v&&v.currentUser&&await v.currentUser.updateProfile({displayName:u})}catch{}o.displayName=u,localStorage.setItem("currentUser",JSON.stringify(o)),this.updateAuthUI(o),document.getElementById("profile-display-name").textContent=u,document.getElementById("profile-avatar-display").textContent=m,this.showNotification(" Profile updated!","success")}catch(o){this.showNotification(` ${o.message||"Save failed"}`,"error")}finally{i&&(i.textContent="Save Profile",i.disabled=!1)}}async handlePrivacyUpdate(n){n.preventDefault();const i=n.target.querySelector('button[type="submit"]');i&&(i.textContent="Saving...",i.disabled=!0);try{const o=JSON.parse(localStorage.getItem("currentUser")||"{}"),a=o.displayName||o.email?.split("@")[0]||"Member",u=JSON.parse(localStorage.getItem("memberProfiles"))||{},d=Object.keys(u).find(m=>u[m].email===o.email)||a;u[d]||(u[d]={name:a,email:o.email}),u[d].settings={showOnLeaderboard:document.getElementById("profile-show-leaderboard").checked,publicProfile:document.getElementById("profile-public-profile").checked,emailNotifications:document.getElementById("profile-email-notifications").checked},localStorage.setItem("memberProfiles",JSON.stringify(u)),this.showNotification(" Preferences saved!","success")}catch(o){this.showNotification(` ${o.message||"Save failed"}`,"error")}finally{i&&(i.textContent="Save Preferences",i.disabled=!1)}}async handleUserPasswordChange(n){n.preventDefault();const i=document.getElementById("user-password-error"),o=document.getElementById("user-password-success"),a=n.target.querySelector('button[type="submit"]');[i,o].forEach(p=>p&&(p.style.display="none"));const u=document.getElementById("user-current-password").value,d=document.getElementById("user-new-password").value,m=document.getElementById("user-confirm-password").value;if(!u||!d||!m){i&&(i.textContent="Please fill in all password fields.",i.style.display="block");return}if(d!==m){i&&(i.textContent="New passwords do not match.",i.style.display="block");return}if(d.length<6){i&&(i.textContent="Password must be at least 6 characters.",i.style.display="block");return}a&&(a.textContent="Updating...",a.disabled=!0);try{if(this.ds&&this.ds.isFirebase&&this.ds.isFirebase()){const p=JSON.parse(localStorage.getItem("currentUser")||"{}");if(!(await this.ds.login(p.email,u)).success)throw new Error("Current password is incorrect.");const g=await this.ds.changePassword(d);if(!g.success)throw new Error(g.error)}else{const p=localStorage.getItem("adminPassword")||"admin123";if(u!==p)throw new Error("Current password is incorrect.");localStorage.setItem("adminPassword",d)}n.target.reset(),o&&(o.textContent=" Password updated successfully!",o.style.display="block")}catch(p){i&&(i.textContent=` ${p.message}`,i.style.display="block")}finally{a&&(a.textContent="Update Password",a.disabled=!1)}}renderMemberAwards(n){const i=document.getElementById("profile-awards-grid"),o=n.awards||[];if(o.length===0){i.innerHTML='<p class="empty-state">No awards earned yet. Start contributing!</p>';return}i.innerHTML=o.map(a=>{const u=Bs[a];return u?`
        <div class="award-badge-large" title="${u.name}">
          <span class="award-badge-icon">${u.icon}</span>
          <div class="award-badge-info">
            <strong>${u.name}</strong>
            <p>${u.description}</p>
            <span class="award-badge-points">+${u.points} points</span>
          </div>
        </div>
      `:""}).join("")}showAwardsPage(){const n=document.getElementById("awards-page-section");n&&(n.style.display="block",this.setHeaderNavActive("awards-btn"),this.renderTopLeaderboard(),this.renderAwardsCatalog())}closeAwardsPage(){const n=document.getElementById("awards-page-section");n&&(n.style.display="none"),this.setHeaderNavActive()}async renderTopLeaderboard(){const n=JSON.parse(localStorage.getItem("memberProfiles"))||{},i=Object.entries(n).map(([m,p])=>({key:m,...p})).filter(m=>m.settings?.showOnLeaderboard!==!1).sort((m,p)=>(p.totalPoints||0)-(m.totalPoints||0)).slice(0,20),o=i.slice(0,3).map((m,p)=>{const h=["","",""];return`
        <div class="podium-position podium-${p+1}">
          <div class="podium-medal">${h[p]}</div>
          <div class="podium-avatar">${m.avatarEmoji||""}</div>
          <div class="podium-name">#${p+1} ${this.escapeHtml(m.name)}</div>
          <div class="podium-points">${m.totalPoints} points</div>
        </div>
      `}).join(""),a=document.getElementById("top3-podium");a&&(a.innerHTML=o);const u=i.slice(3,20).map((m,p)=>`
      <div class="leaderboard-row">
        <span class="lb-rank">#${p+4}</span>
        <span class="lb-avatar">${m.avatarEmoji||""}</span>
        <span class="lb-name">${this.escapeHtml(m.name)}</span>
        <span class="lb-awards">${(m.awards||[]).length} </span>
        <span class="lb-points">${m.totalPoints} pts</span>
      </div>
    `).join(""),d=document.getElementById("full-leaderboard");d&&(d.innerHTML=u||'<p class="empty-state">No members on leaderboard yet</p>')}renderAwardsCatalog(){const n=Object.entries(Bs).map(([,o])=>`
      <div class="award-catalog-item">
        <div class="award-catalog-icon">${o.icon}</div>
        <div class="award-catalog-content">
          <h4>${o.name}</h4>
          <p>${o.description}</p>
          <div class="award-catalog-meta">
            <span class="award-catalog-points">+${o.points} pts</span>
            <span class="award-catalog-category">${o.category}</span>
          </div>
        </div>
      </div>
    `).join(""),i=document.getElementById("awards-catalog");i&&(i.innerHTML=n)}setupCommunityAwardsTab(){document.getElementById("grant-award-btn")?.addEventListener("click",()=>this.grantCommunityAward()),document.getElementById("award-member-select")?.addEventListener("change",i=>this.onMemberSelected(i.target.value)),document.getElementById("award-type-select")?.addEventListener("change",i=>this.onAwardSelected(i.target.value)),document.getElementById("admin-member-search")?.addEventListener("input",i=>this.searchAdminMembers(i.target.value));const n=document.getElementById("award-type-select");n&&Object.entries(Bs).forEach(([i,o])=>{const a=document.createElement("option");a.value=i,a.textContent=`${o.icon} ${o.name} (+${o.points} pts)`,n.appendChild(a)}),this.loadAdminMembers()}loadAdminMembers(){const n=JSON.parse(localStorage.getItem("memberProfiles"))||{},i=document.getElementById("award-member-select");i&&(i.innerHTML='<option value="">Choose a member...</option>',Object.entries(n).forEach(([o,a])=>{const u=document.createElement("option");u.value=o,u.textContent=`${a.avatarEmoji||""} ${a.name||o} (${a.totalPoints||0} pts)`,i.appendChild(u)})),this.renderAdminMemberList(n)}renderAdminMemberList(n,i=""){const o=document.getElementById("admin-member-list");if(!o)return;const a=Object.entries(n).filter(([u,d])=>!i||d.name?.toLowerCase().includes(i)||u.toLowerCase().includes(i)).sort((u,d)=>(d[1].totalPoints||0)-(u[1].totalPoints||0));if(a.length===0){o.innerHTML='<p class="empty-state">No members found</p>';return}o.innerHTML=a.map(([u,d])=>`
      <div class="admin-member-card">
        <div class="admin-member-header">
          <span class="admin-member-avatar">${d.avatarEmoji||""} ${this.escapeHtml(d.name||u)}</span>
          <span class="admin-member-points">${d.totalPoints||0} pts</span>
        </div>
        <div class="admin-member-awards">
          ${(d.awards||[]).slice(0,5).map(m=>{const p=Bs[m];return p?`<span class="admin-member-award" title="${p.name}">${p.icon}</span>`:""}).join("")}
          ${(d.awards||[]).length>5?`<span class="admin-member-more">+${(d.awards||[]).length-5}</span>`:""}
        </div>
      </div>
    `).join("")}searchAdminMembers(n){const i=JSON.parse(localStorage.getItem("memberProfiles"))||{};this.renderAdminMemberList(i,n)}onMemberSelected(n){const i=document.getElementById("grant-award-btn");i&&(i.disabled=!n)}onAwardSelected(n){const i=document.getElementById("award-preview"),o=Bs[n];!o||!i||(document.getElementById("award-preview-icon").textContent=o.icon,document.getElementById("award-preview-name").textContent=o.name,document.getElementById("award-preview-desc").textContent=o.description,document.getElementById("award-preview-points").textContent=`+${o.points} points`,i.style.display="block")}async grantCommunityAward(){const n=document.getElementById("award-member-select").value,i=document.getElementById("award-type-select").value;if(!n||!i){this.showNotification(" Please select a member and award","error");return}const o=await this.ds.grantAward(n,i,"admin");o.success?(this.showNotification(` Award granted to ${n}!`,"success"),this.loadAdminMembers(),document.getElementById("award-member-select").value="",document.getElementById("award-type-select").value="",document.getElementById("award-preview").style.display="none",document.getElementById("grant-award-btn").disabled=!0):this.showNotification(o.error||"Failed to grant award","error")}async showMarketplace(){const n=this.ds?.getCurrentUser(),i=document.getElementById("marketplace-section"),o=document.getElementById("marketplace-auth-required"),a=document.getElementById("marketplace-content"),u=document.getElementById("marketplace-post-btn"),d=document.getElementById("map-section"),m=document.getElementById("info-section"),p=document.getElementById("directory-section"),h=document.getElementById("county-page"),g=document.getElementById("city-page"),v=document.getElementById("admin-section");d&&(d.style.display="none"),m&&(m.style.display="none"),p&&(p.style.display="none"),h&&(h.style.display="none"),g&&(g.style.display="none"),v&&(v.style.display="none"),i&&(i.style.display="block"),this.setHeaderNavActive("marketplace-nav-btn"),this.setHash("/montana/marketplace"),n?(o&&(o.style.display="none"),a&&(a.style.display="block"),u&&(u.style.display="inline-block"),this.populateMarketplaceCountyDropdowns(),await this.refreshMarketplaceListings(),this.renderMarketplaceListings()):(o&&(o.style.display="block"),a&&(a.style.display="none"),u&&(u.style.display="none"))}async refreshMarketplaceListings(){try{this.ds?.getMarketplaceListings?this._marketplaceListings=await this.ds.getMarketplaceListings():this._marketplaceListings=JSON.parse(localStorage.getItem("marketplaceListings"))||[]}catch(n){console.error("Error refreshing marketplace listings:",n),this._marketplaceListings=JSON.parse(localStorage.getItem("marketplaceListings"))||[]}return window.MARKETPLACE_LISTINGS=this._marketplaceListings,this._marketplaceListings}populateMarketplaceCountyDropdowns(){const n=document.getElementById("marketplace-filter-county"),i=document.getElementById("edit-listing-county"),o=Object.entries(Ft).sort((a,u)=>a[1].localeCompare(u[1])).map(([a,u])=>`<option value="${a}">${u}</option>`).join("");n&&(n.innerHTML='<option value="">All Counties</option>'+o),i&&(i.innerHTML='<option value="">Select county...</option>'+o)}renderMarketplaceListings(n=this._marketplaceListings){const i=document.getElementById("marketplace-listings");if(!i)return;const o=n.filter(a=>a.isActive!==!1);if(o.length===0){i.innerHTML='<p class="empty-state">No listings found. Be the first to post!</p>';return}i.innerHTML=o.map(a=>{const u=a.category||a.type,d=this.getMarketplaceTypeLabel(u),m=Ft[a.countyFips]||"Unknown",p=new Date(a.createdAt).toLocaleDateString(),h=this.ds?.getCurrentUser(),g=h&&h.email===a.contactEmail,v=a.imageUrl||"",w=a.contactInfo||a.contactEmail||"";return`
        <div class="marketplace-item" data-id="${a.id}">
          ${v?`<img class="marketplace-item-image" src="${this.escapeHtml(v)}" alt="${this.escapeHtml(a.title)}">`:'<div class="marketplace-item-image marketplace-item-image-placeholder"></div>'}
          <div class="marketplace-item-header">
            <span class="marketplace-type-badge ${u}">${d}</span>
            ${g?'<span class="marketplace-owner-badge">Your Listing</span>':""}
          </div>
          <h3 class="marketplace-item-title">${this.escapeHtml(a.title)}</h3>
          <p class="marketplace-item-description">${this.escapeHtml(a.description)}</p>
          <div class="marketplace-item-meta">
            <span> ${this.escapeHtml(a.location||m)}</span>
            ${a.price?`<span> ${this.escapeHtml(a.price)}</span>`:""}
            <span> ${p}</span>
          </div>
          <div class="marketplace-item-footer">
            <div class="marketplace-item-contact">
              <strong>${this.escapeHtml(a.contactName)}</strong>
              ${a.contactPhone?`<span> ${this.escapeHtml(a.contactPhone)}</span>`:""}
              <span>${this.escapeHtml(w)}</span>
            </div>
            <div>
              <button class="nav-btn" onclick="window.mtApp.openMarketplaceViewModal('${a.id}')">View</button>
              ${g?`<button class="nav-btn" onclick="window.mtApp.editMarketplaceListing('${a.id}')">Edit</button>`:""}
            </div>
          </div>
        </div>
      `}).join("")}getMarketplaceTypeLabel(n){return{buying:" Buy",selling:" Sell",for_hire:" For Hire",for_sale:" For Sale",community:" Community"}[n]||n}filterMarketplaceListings(){const n=document.getElementById("marketplace-filter-type")?.value||"",i=document.getElementById("marketplace-filter-county")?.value||"",o=document.getElementById("marketplace-search")?.value.toLowerCase()||"",a=this._marketplaceListings.filter(u=>!(n&&(u.category||u.type)!==n||i&&u.countyFips!==i||o&&!`${u.title} ${u.description} ${u.location}`.toLowerCase().includes(o)));this.renderMarketplaceListings(a)}openMarketplacePostModal(n=null){const i=document.getElementById("marketplace-post-modal"),o=document.getElementById("marketplace-modal-title"),a=document.getElementById("marketplace-delete-btn"),u=this.ds?.getCurrentUser();if(i){if(n){const d=this._marketplaceListings.find(m=>m.id===n);if(!d)return;o.textContent="Edit Listing",document.getElementById("edit-listing-id").value=d.id,document.getElementById("edit-listing-type").value=d.category||d.type||"",document.getElementById("edit-listing-title").value=d.title,document.getElementById("edit-listing-description").value=d.description,document.getElementById("edit-listing-price").value=d.price||"",document.getElementById("edit-listing-county").value=d.countyFips,document.getElementById("edit-listing-location").value=d.location||"",document.getElementById("edit-listing-contact-name").value=d.contactName,document.getElementById("edit-listing-contact-email").value=d.contactEmail,document.getElementById("edit-listing-contact-phone").value=d.contactPhone||"",document.getElementById("edit-listing-image").required=!1,a&&(a.style.display="inline-block")}else o.textContent="Post Listing",document.getElementById("marketplace-post-form").reset(),document.getElementById("edit-listing-id").value="",document.getElementById("edit-listing-image").required=!0,u&&(document.getElementById("edit-listing-contact-email").value=u.email,u.displayName&&(document.getElementById("edit-listing-contact-name").value=u.displayName)),a&&(a.style.display="none");i.style.display="flex"}}openMarketplaceViewModal(n){const i=document.getElementById("marketplace-view-modal");if(!i)return;const o=this._marketplaceListings.find(u=>u.id===n);if(!o)return;document.getElementById("marketplace-view-title").textContent=o.title||"",document.getElementById("marketplace-view-description").textContent=o.description||"",document.getElementById("marketplace-view-price").textContent=o.price?` ${o.price}`:" Contact for price",document.getElementById("marketplace-view-location").textContent=` ${o.location||"Montana"}`,document.getElementById("marketplace-view-date").textContent=` ${new Date(o.createdAt).toLocaleDateString()}`,document.getElementById("marketplace-view-contact").textContent=o.contactInfo||o.contactEmail||"";const a=document.getElementById("marketplace-view-image");a.src=o.imageUrl||"",a.style.display=o.imageUrl?"block":"none",i.style.display="flex"}closeMarketplaceViewModal(){const n=document.getElementById("marketplace-view-modal");n&&(n.style.display="none")}closeMarketplacePostModal(){const n=document.getElementById("marketplace-post-modal");n&&(n.style.display="none")}async handleMarketplacePost(n){n.preventDefault();const i=this.ds?.getCurrentUser();if(!i){this.showNotification("You must be logged in to post","error");return}const o=n.target.querySelector('button[type="submit"]'),a=o?.textContent||"";o&&(o.textContent="Posting...",o.disabled=!0);try{const u=document.getElementById("edit-listing-id").value,d=!!u,p=document.getElementById("edit-listing-image")?.files?.[0]||null,h=d?this._marketplaceListings.find(V=>V.id===u):null,g=!!h?.imageUrl;if(!d&&!p){this.showNotification("Please upload at least one image for your post.","error");return}let v=h?.imageUrl||"";if(p&&(v=await this.ds.uploadMarketplaceImage?.(p,u||"new")||v),!v&&!g){this.showNotification("Image upload is required before posting.","error");return}const w=document.getElementById("edit-listing-contact-email").value,S=document.getElementById("edit-listing-contact-phone").value,b=S||w,T={id:u||void 0,category:document.getElementById("edit-listing-type").value,title:document.getElementById("edit-listing-title").value,description:document.getElementById("edit-listing-description").value,price:document.getElementById("edit-listing-price").value,countyFips:document.getElementById("edit-listing-county").value,location:document.getElementById("edit-listing-location").value,imageUrl:v,contactInfo:b,contactName:document.getElementById("edit-listing-contact-name").value,contactEmail:w,contactPhone:S,userId:i.uid||i.email,userName:i.displayName||i.email,isActive:!0,createdAt:d?h?.createdAt||new Date().toISOString():new Date().toISOString(),updatedAt:new Date().toISOString()},D=this.ds?.saveMarketplaceListing?await this.ds.saveMarketplaceListing(T):T,N=this._marketplaceListings.findIndex(V=>V.id===D.id);N>=0?this._marketplaceListings[N]=D:this._marketplaceListings.unshift(D),window.MARKETPLACE_LISTINGS=this._marketplaceListings,localStorage.setItem("marketplaceListings",JSON.stringify(this._marketplaceListings)),this.showNotification(` Listing ${d?"updated":"posted"} successfully!`,"success"),this.closeMarketplacePostModal(),this.closeMarketplaceViewModal(),this.renderMarketplaceListings()}catch(u){console.error("Error posting marketplace listing:",u),this.showNotification("Failed to post listing","error")}finally{o&&(o.textContent=a,o.disabled=!1)}}editMarketplaceListing(n){this.openMarketplacePostModal(n)}async deleteMarketplaceListing(){const n=document.getElementById("edit-listing-id").value;if(!n||!confirm("Are you sure you want to delete this listing?"))return;const i=this._marketplaceListings.findIndex(o=>o.id===n);i!==-1&&(this._marketplaceListings.splice(i,1),window.MARKETPLACE_LISTINGS=this._marketplaceListings,localStorage.setItem("marketplaceListings",JSON.stringify(this._marketplaceListings)),this.ds&&await this.ds.deleteMarketplaceListing?.(n),this.showNotification(" Listing deleted","success"),this.closeMarketplacePostModal(),this.closeMarketplaceViewModal(),this.renderMarketplaceListings())}}let Ml;document.addEventListener("DOMContentLoaded",()=>{Ml=new rE,window.mtApp=Ml,Ml.init()});
