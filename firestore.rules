rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // County data — anyone can read, only authenticated users can write
    match /counties/{countyId} {
      allow read: if true;
      allow write: if request.auth != null;
    }

    // City data — anyone can read, only authenticated users can write
    match /cities/{cityId} {
      allow read: if true;
      allow write: if request.auth != null;
    }

    // Events — anyone can read, only authenticated users can write
    match /events/{eventId} {
      allow read: if true;
      allow write: if request.auth != null;
    }

    // Businesses — anyone can read, only authenticated users can write
    match /businesses/{businessId} {
      allow read: if true;
      allow write: if request.auth != null;
    }

    // Discussion posts — anyone can read, authenticated users can post/edit/delete
    match /discussions/{postId} {
      allow read: if true;
      allow write: if request.auth != null;
    }

    // Members — public read (leaderboard), authenticated users can write their own profile
    // Admins (any authenticated user) can also write any profile (for granting awards)
    match /members/{userId} {
      allow read: if true;
      allow write: if request.auth != null;
    }

    // Admin-managed users list — only authenticated admins
    match /adminUsers/{userId} {
      allow read, write: if request.auth != null;
    }
  }
}

